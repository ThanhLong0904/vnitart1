const __vite__fileDeps=["assets/sectionEditor-BlwiMffW.js","assets/popupEditor-fgIFil0X.js","assets/featureEditor-DAOaHVki.js","assets/componentEditor-D71Vom46.js","assets/exportCustomData-B46Q62uq.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Rs=Object.defineProperty;var Zn=o=>{throw TypeError(o)};var ks=(o,i,e)=>i in o?Rs(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var h=(o,i,e)=>ks(o,typeof i!="symbol"?i+"":i,e),es=(o,i,e)=>i.has(o)||Zn("Cannot "+e);var Gt=(o,i,e)=>(es(o,i,"read from private field"),e?e.call(o):i.get(o)),li=(o,i,e)=>i.has(o)?Zn("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,e),ei=(o,i,e,t)=>(es(o,i,"write to private field"),t?t.call(o,e):i.set(o,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();class Component{constructor(){h(this,"Id",null);h(this,"FieldName",null);h(this,"Order",0);h(this,"ComponentType",null);h(this,"ComponentGroupId",null);h(this,"FormatData",null);h(this,"PlainText",null);h(this,"Column",0);h(this,"Offset",0);h(this,"Row",0);h(this,"CanSearch",!1);h(this,"CanCache",!1);h(this,"Precision",0);h(this,"GroupBy",null);h(this,"GroupFormat",null);h(this,"Label",null);h(this,"ShowLabel",!1);h(this,"Icon",null);h(this,"ClassName",null);h(this,"Style",null);h(this,"ChildStyle",null);h(this,"HotKey",null);h(this,"RefClass",null);h(this,"Events",null);h(this,"Disabled",!1);h(this,"Visibility",!1);h(this,"Validation",null);h(this,"Focus",!1);h(this,"Width",null);h(this,"PopulateField",null);h(this,"GroupEvent",null);h(this,"XsCol",0);h(this,"SmCol",0);h(this,"LgCol",0);h(this,"XlCol",0);h(this,"XxlCol",0);h(this,"DefaultVal",null);h(this,"DateTimeField",null);h(this,"Active",!1);h(this,"InsertedDate",new Date);h(this,"InsertedBy",null);h(this,"UpdatedDate",new Date);h(this,"UpdatedBy",null);h(this,"CanAdd",!1);h(this,"IsPrivate",!1);h(this,"MonthCount",0);h(this,"Query",null);h(this,"IsRealtime",!1);h(this,"RefName",null);h(this,"TopEmpty",!1);h(this,"IsCollapsible",!1);h(this,"Template",null);h(this,"PreQuery",null);h(this,"DisabledExp",null);h(this,"FocusSearch",!1);h(this,"IsSumary",!1);h(this,"FormatSumaryField",null);h(this,"OrderBySumary",null);h(this,"ShowHotKey",!1);h(this,"DefaultAddStart",0);h(this,"DefaultAddEnd",0);h(this,"UpperCase",!1);h(this,"VirtualScroll",!1);h(this,"Migration",null);h(this,"ListClass",null);h(this,"ExcelFieldName",null);h(this,"LiteGrid",!1);h(this,"ShowDatetimeField",!1);h(this,"ShowNull",!1);h(this,"AddDate",!1);h(this,"FilterEq",!1);h(this,"HeaderHeight",0);h(this,"BodyItemHeight",0);h(this,"FooterHeight",0);h(this,"ScrollHeight",0);h(this,"ScriptValidation",null);h(this,"FilterLocal",!1);h(this,"HideGrid",!1);h(this,"GroupReferenceId",null);h(this,"GroupReferenceName",null);h(this,"GroupName",null);h(this,"ShortDesc",null);h(this,"Description",null);h(this,"FeatureId",null);h(this,"ComponentId",null);h(this,"TextAlign",null);h(this,"HasFilter",!1);h(this,"Frozen",!1);h(this,"FilterTemplate",null);h(this,"Editable",!1);h(this,"FormatExcell",null);h(this,"DatabaseName",null);h(this,"Summary",null);h(this,"SummaryColSpan",0);h(this,"BasicSearch",!1);h(this,"ShowExp",null);h(this,"MinWidth",null);h(this,"MaxWidth",null);h(this,"TenantCode",null);h(this,"OrderBy",null);h(this,"ParentId",null);h(this,"Lang",null);h(this,"Name",null);h(this,"IsTab",!1);h(this,"TabGroup",null);h(this,"IsVertialTab",!1);h(this,"Responsive",!1);h(this,"OuterColumn",0);h(this,"XsOuterColumn",0);h(this,"SmOuterColumn",0);h(this,"LgOuterColumn",0);h(this,"XlOuterColumn",0);h(this,"XxlOuterColumn",0);h(this,"BadgeMonth",0);h(this,"IsDropDown",!1);h(this,"Html",null);h(this,"Css",null);h(this,"Javascript",null);h(this,"ParentElement",null);h(this,"Columns",[]);h(this,"LocalQuery")}}class Feature{constructor(){h(this,"Id","");h(this,"Name","");h(this,"Label","");h(this,"ParentId","");h(this,"Order",0);h(this,"ClassName","");h(this,"Style","");h(this,"StyleSheet","");h(this,"Script","");h(this,"Events","");h(this,"Icon","");h(this,"IsDivider",!1);h(this,"IsGroup",!1);h(this,"IsMenu",!1);h(this,"IsPublic",!1);h(this,"StartUp",!1);h(this,"ViewClass","");h(this,"EntityId","");h(this,"Description","");h(this,"Active",!1);h(this,"InsertedDate",new Date);h(this,"InsertedBy","");h(this,"UpdatedDate",new Date);h(this,"UpdatedBy","");h(this,"IsSystem",!1);h(this,"IgnoreEncode",!1);h(this,"InheritParentFeature",!1);h(this,"DeleteTemp",!1);h(this,"CustomNextCell",!1);h(this,"LoadEntity",!1);h(this,"IsLock",!1);h(this,"Html","");h(this,"Components",[]);h(this,"Layout")}}const PositionEnum={absolute:"absolute",fixed:"fixed",inherit:"inherit",initial:"initial",relative:"relative",static:"static",sticky:"sticky",unset:"unset"},KeyCodeEnum={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,Zero:48,One:49,Two:50,Three:51,Four:52,Five:53,Six:54,Seven:55,Eight:56,Nine:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LeftWindowKey:91,RightWindowKey:92,SelectKey:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,EqualSign:187,Comma:188,Dash:189,Period:190,ForwardSlash:191,GraveAccent:192,OpenBracket:219,BackSlash:220,CloseBraket:221,SingleQuote:222},OperatorEnum={In:1,NotIn:2,Gt:3,Ge:4,Lt:5,Le:6,Lr:7,Rl:8},ActiveStateEnum={All:2,Yes:1,No:0},AdvSearchOperation={Equal:1,NotEqual:2,GreaterThan:3,GreaterThanOrEqual:4,LessThan:5,LessThanOrEqual:6,Contains:7,NotContains:8,StartWith:9,NotStartWith:10,EndWidth:11,NotEndWidth:12,In:13,NotIn:14,EqualDatime:15,GreaterThanDatime:21,LessThanDatime:22,NotEqualDatime:16,EqualNull:17,NotEqualNull:18,Like:19,NotLike:20,GreaterEqualDatime:23,LessEqualDatime:24},OperationToSql={[AdvSearchOperation.Equal]:"{0} = N'{1}'",[AdvSearchOperation.NotEqual]:"{0} != N'{1}'",[AdvSearchOperation.GreaterThan]:"{0} > N'{1}'",[AdvSearchOperation.GreaterThanOrEqual]:"{0} >= N'{1}'",[AdvSearchOperation.LessThan]:"{0} < N'{1}'",[AdvSearchOperation.LessThanOrEqual]:"{0} <= N'{1}'",[AdvSearchOperation.Contains]:"charindex(N'{1}', {0}) >= 1",[AdvSearchOperation.NotContains]:"contains({0}, N'{1}') eq false",[AdvSearchOperation.StartWith]:"charindex(N'{1}', {0}) = 1",[AdvSearchOperation.NotStartWith]:"charindex(N'{1}', {0}) > 1",[AdvSearchOperation.EndWidth]:"{0} like N'%{1}')",[AdvSearchOperation.NotEndWidth]:"{0} not like N'%{1}'",[AdvSearchOperation.In]:"{0} in ({1})",[AdvSearchOperation.Like]:"{0} like N'%{1}%'",[AdvSearchOperation.NotLike]:"{0} not like N'{1}'",[AdvSearchOperation.NotIn]:"{0} not in ({1})",[AdvSearchOperation.EqualDatime]:"cast(date, {0}) = N'{1}'",[AdvSearchOperation.NotEqualDatime]:"cast(date, {0}) != N'{1}'",[AdvSearchOperation.EqualNull]:"{0} is null",[AdvSearchOperation.NotEqualNull]:"{0} is not null",[AdvSearchOperation.GreaterThanDatime]:"cast(date, {0}) > N'{1}'",[AdvSearchOperation.GreaterEqualDatime]:"cast(date, {0}) >= N'{1}'",[AdvSearchOperation.LessThanDatime]:"cast(date, {0}) < N'{1}'",[AdvSearchOperation.LessEqualDatime]:"cast(date, {0}) <= N'{1}'"},LogicOperation={And:0,Or:1},OrderbyDirection={ASC:1,DESC:2},HttpMethod={GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE"};/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={toStringTag:tag};P.absoluteValue=P.abs=function(){var o=new this.constructor(this);return o.s<0&&(o.s=1),finalise(o)};P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(o,i){var e,t=this,n=t.constructor;if(o=new n(o),i=new n(i),!o.s||!i.s)return new n(NaN);if(o.gt(i))throw Error(invalidArgument+i);return e=t.cmp(o),e<0?o:t.cmp(i)>0?i:new n(t)};P.comparedTo=P.cmp=function(o){var i,e,t,n,s=this,r=s.d,l=(o=new s.constructor(o)).d,u=s.s,m=o.s;if(!r||!l)return!u||!m?NaN:u!==m?u:r===l?0:!r^u<0?1:-1;if(!r[0]||!l[0])return r[0]?u:l[0]?-m:0;if(u!==m)return u;if(s.e!==o.e)return s.e>o.e^u<0?1:-1;for(t=r.length,n=l.length,i=0,e=t<n?t:n;i<e;++i)if(r[i]!==l[i])return r[i]>l[i]^u<0?1:-1;return t===n?0:t>n^u<0?1:-1};P.cosine=P.cos=function(){var o,i,e=this,t=e.constructor;return e.d?e.d[0]?(o=t.precision,i=t.rounding,t.precision=o+Math.max(e.e,e.sd())+LOG_BASE,t.rounding=1,e=cosine(t,toLessThanHalfPi(t,e)),t.precision=o,t.rounding=i,finalise(quadrant==2||quadrant==3?e.neg():e,o,i,!0)):new t(1):new t(NaN)};P.cubeRoot=P.cbrt=function(){var o,i,e,t,n,s,r,l,u,m,y=this,C=y.constructor;if(!y.isFinite()||y.isZero())return new C(y);for(external=!1,s=y.s*mathpow(y.s*y,1/3),!s||Math.abs(s)==1/0?(e=digitsToString(y.d),o=y.e,(s=(o-e.length+1)%3)&&(e+=s==1||s==-2?"0":"00"),s=mathpow(e,1/3),o=mathfloor((o+1)/3)-(o%3==(o<0?-1:2)),s==1/0?e="5e"+o:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+o),t=new C(e),t.s=y.s):t=new C(s.toString()),r=(o=C.precision)+3;;)if(l=t,u=l.times(l).times(l),m=u.plus(y),t=divide(m.plus(y).times(l),m.plus(u),r+2,1),digitsToString(l.d).slice(0,r)===(e=digitsToString(t.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!n&&e=="4999"){if(!n&&(finalise(l,o+1,0),l.times(l).times(l).eq(y))){t=l;break}r+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(finalise(t,o+1,1),i=!t.times(t).times(t).eq(y));break}return external=!0,finalise(t,o,C.rounding,i)};P.decimalPlaces=P.dp=function(){var o,i=this.d,e=NaN;if(i){if(o=i.length-1,e=(o-mathfloor(this.e/LOG_BASE))*LOG_BASE,o=i[o],o)for(;o%10==0;o/=10)e--;e<0&&(e=0)}return e};P.dividedBy=P.div=function(o){return divide(this,new this.constructor(o))};P.dividedToIntegerBy=P.divToInt=function(o){var i=this,e=i.constructor;return finalise(divide(i,new e(o),0,1,1),e.precision,e.rounding)};P.equals=P.eq=function(o){return this.cmp(o)===0};P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(o){return this.cmp(o)>0};P.greaterThanOrEqualTo=P.gte=function(o){var i=this.cmp(o);return i==1||i===0};P.hyperbolicCosine=P.cosh=function(){var o,i,e,t,n,s=this,r=s.constructor,l=new r(1);if(!s.isFinite())return new r(s.s?1/0:NaN);if(s.isZero())return l;e=r.precision,t=r.rounding,r.precision=e+Math.max(s.e,s.sd())+4,r.rounding=1,n=s.d.length,n<32?(o=Math.ceil(n/3),i=(1/tinyPow(4,o)).toString()):(o=16,i="2.3283064365386962890625e-10"),s=taylorSeries(r,1,s.times(i),new r(1),!0);for(var u,m=o,y=new r(8);m--;)u=s.times(s),s=l.minus(u.times(y.minus(u.times(y))));return finalise(s,r.precision=e,r.rounding=t,!0)};P.hyperbolicSine=P.sinh=function(){var o,i,e,t,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(i=s.precision,e=s.rounding,s.precision=i+Math.max(n.e,n.sd())+4,s.rounding=1,t=n.d.length,t<3)n=taylorSeries(s,2,n,n,!0);else{o=1.4*Math.sqrt(t),o=o>16?16:o|0,n=n.times(1/tinyPow(5,o)),n=taylorSeries(s,2,n,n,!0);for(var r,l=new s(5),u=new s(16),m=new s(20);o--;)r=n.times(n),n=n.times(l.plus(r.times(u.times(r).plus(m))))}return s.precision=i,s.rounding=e,finalise(n,i,e,!0)};P.hyperbolicTangent=P.tanh=function(){var o,i,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(o=t.precision,i=t.rounding,t.precision=o+7,t.rounding=1,divide(e.sinh(),e.cosh(),t.precision=o,t.rounding=i)):new t(e.s)};P.inverseCosine=P.acos=function(){var o,i=this,e=i.constructor,t=i.abs().cmp(1),n=e.precision,s=e.rounding;return t!==-1?t===0?i.isNeg()?getPi(e,n,s):new e(0):new e(NaN):i.isZero()?getPi(e,n+4,s).times(.5):(e.precision=n+6,e.rounding=1,i=i.asin(),o=getPi(e,n+4,s).times(.5),e.precision=n,e.rounding=s,o.minus(i))};P.inverseHyperbolicCosine=P.acosh=function(){var o,i,e=this,t=e.constructor;return e.lte(1)?new t(e.eq(1)?0:NaN):e.isFinite()?(o=t.precision,i=t.rounding,t.precision=o+Math.max(Math.abs(e.e),e.sd())+4,t.rounding=1,external=!1,e=e.times(e).minus(1).sqrt().plus(e),external=!0,t.precision=o,t.rounding=i,e.ln()):new t(e)};P.inverseHyperbolicSine=P.asinh=function(){var o,i,e=this,t=e.constructor;return!e.isFinite()||e.isZero()?new t(e):(o=t.precision,i=t.rounding,t.precision=o+2*Math.max(Math.abs(e.e),e.sd())+6,t.rounding=1,external=!1,e=e.times(e).plus(1).sqrt().plus(e),external=!0,t.precision=o,t.rounding=i,e.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var o,i,e,t,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(o=s.precision,i=s.rounding,t=n.sd(),Math.max(t,o)<2*-n.e-1?finalise(new s(n),o,i,!0):(s.precision=e=t-n.e,n=divide(n.plus(1),new s(1).minus(n),e+o,1),s.precision=o+4,s.rounding=1,n=n.ln(),s.precision=o,s.rounding=i,n.times(.5))):new s(NaN)};P.inverseSine=P.asin=function(){var o,i,e,t,n=this,s=n.constructor;return n.isZero()?new s(n):(i=n.abs().cmp(1),e=s.precision,t=s.rounding,i!==-1?i===0?(o=getPi(s,e+4,t).times(.5),o.s=n.s,o):new s(NaN):(s.precision=e+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=e,s.rounding=t,n.times(2)))};P.inverseTangent=P.atan=function(){var o,i,e,t,n,s,r,l,u,m=this,y=m.constructor,C=y.precision,T=y.rounding;if(m.isFinite()){if(m.isZero())return new y(m);if(m.abs().eq(1)&&C+4<=PI_PRECISION)return r=getPi(y,C+4,T).times(.25),r.s=m.s,r}else{if(!m.s)return new y(NaN);if(C+4<=PI_PRECISION)return r=getPi(y,C+4,T).times(.5),r.s=m.s,r}for(y.precision=l=C+10,y.rounding=1,e=Math.min(28,l/LOG_BASE+2|0),o=e;o;--o)m=m.div(m.times(m).plus(1).sqrt().plus(1));for(external=!1,i=Math.ceil(l/LOG_BASE),t=1,u=m.times(m),r=new y(m),n=m;o!==-1;)if(n=n.times(u),s=r.minus(n.div(t+=2)),n=n.times(u),r=s.plus(n.div(t+=2)),r.d[i]!==void 0)for(o=i;r.d[o]===s.d[o]&&o--;);return e&&(r=r.times(2<<e-1)),external=!0,finalise(r,y.precision=C,y.rounding=T,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(o){return this.cmp(o)<0};P.lessThanOrEqualTo=P.lte=function(o){return this.cmp(o)<1};P.logarithm=P.log=function(o){var i,e,t,n,s,r,l,u,m=this,y=m.constructor,C=y.precision,T=y.rounding,F=5;if(o==null)o=new y(10),i=!0;else{if(o=new y(o),e=o.d,o.s<0||!e||!e[0]||o.eq(1))return new y(NaN);i=o.eq(10)}if(e=m.d,m.s<0||!e||!e[0]||m.eq(1))return new y(e&&!e[0]?-1/0:m.s!=1?NaN:e?0:1/0);if(i)if(e.length>1)s=!0;else{for(n=e[0];n%10===0;)n/=10;s=n!==1}if(external=!1,l=C+F,r=naturalLogarithm(m,l),t=i?getLn10(y,l+10):naturalLogarithm(o,l),u=divide(r,t,l,1),checkRoundingDigits(u.d,n=C,T))do if(l+=10,r=naturalLogarithm(m,l),t=i?getLn10(y,l+10):naturalLogarithm(o,l),u=divide(r,t,l,1),!s){+digitsToString(u.d).slice(n+1,n+15)+1==1e14&&(u=finalise(u,C+1,0));break}while(checkRoundingDigits(u.d,n+=10,T));return external=!0,finalise(u,C,T)};P.minus=P.sub=function(o){var i,e,t,n,s,r,l,u,m,y,C,T,F=this,I=F.constructor;if(o=new I(o),!F.d||!o.d)return!F.s||!o.s?o=new I(NaN):F.d?o.s=-o.s:o=new I(o.d||F.s!==o.s?F:NaN),o;if(F.s!=o.s)return o.s=-o.s,F.plus(o);if(m=F.d,T=o.d,l=I.precision,u=I.rounding,!m[0]||!T[0]){if(T[0])o.s=-o.s;else if(m[0])o=new I(F);else return new I(u===3?-0:0);return external?finalise(o,l,u):o}if(e=mathfloor(o.e/LOG_BASE),y=mathfloor(F.e/LOG_BASE),m=m.slice(),s=y-e,s){for(C=s<0,C?(i=m,s=-s,r=T.length):(i=T,e=y,r=m.length),t=Math.max(Math.ceil(l/LOG_BASE),r)+2,s>t&&(s=t,i.length=1),i.reverse(),t=s;t--;)i.push(0);i.reverse()}else{for(t=m.length,r=T.length,C=t<r,C&&(r=t),t=0;t<r;t++)if(m[t]!=T[t]){C=m[t]<T[t];break}s=0}for(C&&(i=m,m=T,T=i,o.s=-o.s),r=m.length,t=T.length-r;t>0;--t)m[r++]=0;for(t=T.length;t>s;){if(m[--t]<T[t]){for(n=t;n&&m[--n]===0;)m[n]=BASE-1;--m[n],m[t]+=BASE}m[t]-=T[t]}for(;m[--r]===0;)m.pop();for(;m[0]===0;m.shift())--e;return m[0]?(o.d=m,o.e=getBase10Exponent(m,e),external?finalise(o,l,u):o):new I(u===3?-0:0)};P.modulo=P.mod=function(o){var i,e=this,t=e.constructor;return o=new t(o),!e.d||!o.s||o.d&&!o.d[0]?new t(NaN):!o.d||e.d&&!e.d[0]?finalise(new t(e),t.precision,t.rounding):(external=!1,t.modulo==9?(i=divide(e,o.abs(),0,3,1),i.s*=o.s):i=divide(e,o,0,t.modulo,1),i=i.times(o),external=!0,e.minus(i))};P.naturalExponential=P.exp=function(){return naturalExponential(this)};P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)};P.negated=P.neg=function(){var o=new this.constructor(this);return o.s=-o.s,finalise(o)};P.plus=P.add=function(o){var i,e,t,n,s,r,l,u,m,y,C=this,T=C.constructor;if(o=new T(o),!C.d||!o.d)return!C.s||!o.s?o=new T(NaN):C.d||(o=new T(o.d||C.s===o.s?C:NaN)),o;if(C.s!=o.s)return o.s=-o.s,C.minus(o);if(m=C.d,y=o.d,l=T.precision,u=T.rounding,!m[0]||!y[0])return y[0]||(o=new T(C)),external?finalise(o,l,u):o;if(s=mathfloor(C.e/LOG_BASE),t=mathfloor(o.e/LOG_BASE),m=m.slice(),n=s-t,n){for(n<0?(e=m,n=-n,r=y.length):(e=y,t=s,r=m.length),s=Math.ceil(l/LOG_BASE),r=s>r?s+1:r+1,n>r&&(n=r,e.length=1),e.reverse();n--;)e.push(0);e.reverse()}for(r=m.length,n=y.length,r-n<0&&(n=r,e=y,y=m,m=e),i=0;n;)i=(m[--n]=m[n]+y[n]+i)/BASE|0,m[n]%=BASE;for(i&&(m.unshift(i),++t),r=m.length;m[--r]==0;)m.pop();return o.d=m,o.e=getBase10Exponent(m,t),external?finalise(o,l,u):o};P.precision=P.sd=function(o){var i,e=this;if(o!==void 0&&o!==!!o&&o!==1&&o!==0)throw Error(invalidArgument+o);return e.d?(i=getPrecision(e.d),o&&e.e+1>i&&(i=e.e+1)):i=NaN,i};P.round=function(){var o=this,i=o.constructor;return finalise(new i(o),o.e+1,i.rounding)};P.sine=P.sin=function(){var o,i,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(o=t.precision,i=t.rounding,t.precision=o+Math.max(e.e,e.sd())+LOG_BASE,t.rounding=1,e=sine(t,toLessThanHalfPi(t,e)),t.precision=o,t.rounding=i,finalise(quadrant>2?e.neg():e,o,i,!0)):new t(NaN)};P.squareRoot=P.sqrt=function(){var o,i,e,t,n,s,r=this,l=r.d,u=r.e,m=r.s,y=r.constructor;if(m!==1||!l||!l[0])return new y(!m||m<0&&(!l||l[0])?NaN:l?r:1/0);for(external=!1,m=Math.sqrt(+r),m==0||m==1/0?(i=digitsToString(l),(i.length+u)%2==0&&(i+="0"),m=Math.sqrt(i),u=mathfloor((u+1)/2)-(u<0||u%2),m==1/0?i="5e"+u:(i=m.toExponential(),i=i.slice(0,i.indexOf("e")+1)+u),t=new y(i)):t=new y(m.toString()),e=(u=y.precision)+3;;)if(s=t,t=s.plus(divide(r,s,e+2,1)).times(.5),digitsToString(s.d).slice(0,e)===(i=digitsToString(t.d)).slice(0,e))if(i=i.slice(e-3,e+1),i=="9999"||!n&&i=="4999"){if(!n&&(finalise(s,u+1,0),s.times(s).eq(r))){t=s;break}e+=4,n=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(finalise(t,u+1,1),o=!t.times(t).eq(r));break}return external=!0,finalise(t,u,y.rounding,o)};P.tangent=P.tan=function(){var o,i,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(o=t.precision,i=t.rounding,t.precision=o+10,t.rounding=1,e=e.sin(),e.s=1,e=divide(e,new t(1).minus(e.times(e)).sqrt(),o+10,0),t.precision=o,t.rounding=i,finalise(quadrant==2||quadrant==4?e.neg():e,o,i,!0)):new t(NaN)};P.times=P.mul=function(o){var i,e,t,n,s,r,l,u,m,y=this,C=y.constructor,T=y.d,F=(o=new C(o)).d;if(o.s*=y.s,!T||!T[0]||!F||!F[0])return new C(!o.s||T&&!T[0]&&!F||F&&!F[0]&&!T?NaN:!T||!F?o.s/0:o.s*0);for(e=mathfloor(y.e/LOG_BASE)+mathfloor(o.e/LOG_BASE),u=T.length,m=F.length,u<m&&(s=T,T=F,F=s,r=u,u=m,m=r),s=[],r=u+m,t=r;t--;)s.push(0);for(t=m;--t>=0;){for(i=0,n=u+t;n>t;)l=s[n]+F[t]*T[n-t-1]+i,s[n--]=l%BASE|0,i=l/BASE|0;s[n]=(s[n]+i)%BASE|0}for(;!s[--r];)s.pop();return i?++e:s.shift(),o.d=s,o.e=getBase10Exponent(s,e),external?finalise(o,C.precision,C.rounding):o};P.toBinary=function(o,i){return toStringBinary(this,2,o,i)};P.toDecimalPlaces=P.toDP=function(o,i){var e=this,t=e.constructor;return e=new t(e),o===void 0?e:(checkInt32(o,0,MAX_DIGITS),i===void 0?i=t.rounding:checkInt32(i,0,8),finalise(e,o+e.e+1,i))};P.toExponential=function(o,i){var e,t=this,n=t.constructor;return o===void 0?e=finiteToString(t,!0):(checkInt32(o,0,MAX_DIGITS),i===void 0?i=n.rounding:checkInt32(i,0,8),t=finalise(new n(t),o+1,i),e=finiteToString(t,!0,o+1)),t.isNeg()&&!t.isZero()?"-"+e:e};P.toFixed=function(o,i){var e,t,n=this,s=n.constructor;return o===void 0?e=finiteToString(n):(checkInt32(o,0,MAX_DIGITS),i===void 0?i=s.rounding:checkInt32(i,0,8),t=finalise(new s(n),o+n.e+1,i),e=finiteToString(t,!1,o+t.e+1)),n.isNeg()&&!n.isZero()?"-"+e:e};P.toFraction=function(o){var i,e,t,n,s,r,l,u,m,y,C,T,F=this,I=F.d,G=F.constructor;if(!I)return new G(F);if(m=e=new G(1),t=u=new G(0),i=new G(t),s=i.e=getPrecision(I)-F.e-1,r=s%LOG_BASE,i.d[0]=mathpow(10,r<0?LOG_BASE+r:r),o==null)o=s>0?i:m;else{if(l=new G(o),!l.isInt()||l.lt(m))throw Error(invalidArgument+l);o=l.gt(i)?s>0?i:m:l}for(external=!1,l=new G(digitsToString(I)),y=G.precision,G.precision=s=I.length*LOG_BASE*2;C=divide(l,i,0,1,1),n=e.plus(C.times(t)),n.cmp(o)!=1;)e=t,t=n,n=m,m=u.plus(C.times(n)),u=n,n=i,i=l.minus(C.times(n)),l=n;return n=divide(o.minus(e),t,0,1,1),u=u.plus(n.times(m)),e=e.plus(n.times(t)),u.s=m.s=F.s,T=divide(m,t,s,1).minus(F).abs().cmp(divide(u,e,s,1).minus(F).abs())<1?[m,t]:[u,e],G.precision=y,external=!0,T};P.toHexadecimal=P.toHex=function(o,i){return toStringBinary(this,16,o,i)};P.toNearest=function(o,i){var e=this,t=e.constructor;if(e=new t(e),o==null){if(!e.d)return e;o=new t(1),i=t.rounding}else{if(o=new t(o),i===void 0?i=t.rounding:checkInt32(i,0,8),!e.d)return o.s?e:o;if(!o.d)return o.s&&(o.s=e.s),o}return o.d[0]?(external=!1,e=divide(e,o,0,i,1).times(o),external=!0,finalise(e)):(o.s=e.s,e=o),e};P.toNumber=function(){return+this};P.toOctal=function(o,i){return toStringBinary(this,8,o,i)};P.toPower=P.pow=function(o){var i,e,t,n,s,r,l=this,u=l.constructor,m=+(o=new u(o));if(!l.d||!o.d||!l.d[0]||!o.d[0])return new u(mathpow(+l,m));if(l=new u(l),l.eq(1))return l;if(t=u.precision,s=u.rounding,o.eq(1))return finalise(l,t,s);if(i=mathfloor(o.e/LOG_BASE),i>=o.d.length-1&&(e=m<0?-m:m)<=MAX_SAFE_INTEGER)return n=intPow(u,l,e,t),o.s<0?new u(1).div(n):finalise(n,t,s);if(r=l.s,r<0){if(i<o.d.length-1)return new u(NaN);if(o.d[i]&1||(r=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=r,l}return e=mathpow(+l,m),i=e==0||!isFinite(e)?mathfloor(m*(Math.log("0."+digitsToString(l.d))/Math.LN10+l.e+1)):new u(e+"").e,i>u.maxE+1||i<u.minE-1?new u(i>0?r/0:0):(external=!1,u.rounding=l.s=1,e=Math.min(12,(i+"").length),n=naturalExponential(o.times(naturalLogarithm(l,t+e)),t),n.d&&(n=finalise(n,t+5,1),checkRoundingDigits(n.d,t,s)&&(i=t+10,n=finalise(naturalExponential(o.times(naturalLogarithm(l,i+e)),i),i+5,1),+digitsToString(n.d).slice(t+1,t+15)+1==1e14&&(n=finalise(n,t+1,0)))),n.s=r,external=!0,u.rounding=s,finalise(n,t,s))};P.toPrecision=function(o,i){var e,t=this,n=t.constructor;return o===void 0?e=finiteToString(t,t.e<=n.toExpNeg||t.e>=n.toExpPos):(checkInt32(o,1,MAX_DIGITS),i===void 0?i=n.rounding:checkInt32(i,0,8),t=finalise(new n(t),o,i),e=finiteToString(t,o<=t.e||t.e<=n.toExpNeg,o)),t.isNeg()&&!t.isZero()?"-"+e:e};P.toSignificantDigits=P.toSD=function(o,i){var e=this,t=e.constructor;return o===void 0?(o=t.precision,i=t.rounding):(checkInt32(o,1,MAX_DIGITS),i===void 0?i=t.rounding:checkInt32(i,0,8)),finalise(new t(e),o,i)};P.toString=function(){var o=this,i=o.constructor,e=finiteToString(o,o.e<=i.toExpNeg||o.e>=i.toExpPos);return o.isNeg()&&!o.isZero()?"-"+e:e};P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var o=this,i=o.constructor,e=finiteToString(o,o.e<=i.toExpNeg||o.e>=i.toExpPos);return o.isNeg()?"-"+e:e};function digitsToString(o){var i,e,t,n=o.length-1,s="",r=o[0];if(n>0){for(s+=r,i=1;i<n;i++)t=o[i]+"",e=LOG_BASE-t.length,e&&(s+=getZeroString(e)),s+=t;r=o[i],t=r+"",e=LOG_BASE-t.length,e&&(s+=getZeroString(e))}else if(r===0)return"0";for(;r%10===0;)r/=10;return s+r}function checkInt32(o,i,e){if(o!==~~o||o<i||o>e)throw Error(invalidArgument+o)}function checkRoundingDigits(o,i,e,t){var n,s,r,l;for(s=o[0];s>=10;s/=10)--i;return--i<0?(i+=LOG_BASE,n=0):(n=Math.ceil((i+1)/LOG_BASE),i%=LOG_BASE),s=mathpow(10,LOG_BASE-i),l=o[n]%s|0,t==null?i<3?(i==0?l=l/100|0:i==1&&(l=l/10|0),r=e<4&&l==99999||e>3&&l==49999||l==5e4||l==0):r=(e<4&&l+1==s||e>3&&l+1==s/2)&&(o[n+1]/s/100|0)==mathpow(10,i-2)-1||(l==s/2||l==0)&&(o[n+1]/s/100|0)==0:i<4?(i==0?l=l/1e3|0:i==1?l=l/100|0:i==2&&(l=l/10|0),r=(t||e<4)&&l==9999||!t&&e>3&&l==4999):r=((t||e<4)&&l+1==s||!t&&e>3&&l+1==s/2)&&(o[n+1]/s/1e3|0)==mathpow(10,i-3)-1,r}function convertBase(o,i,e){for(var t,n=[0],s,r=0,l=o.length;r<l;){for(s=n.length;s--;)n[s]*=i;for(n[0]+=NUMERALS.indexOf(o.charAt(r++)),t=0;t<n.length;t++)n[t]>e-1&&(n[t+1]===void 0&&(n[t+1]=0),n[t+1]+=n[t]/e|0,n[t]%=e)}return n.reverse()}function cosine(o,i){var e,t,n;if(i.isZero())return i;t=i.d.length,t<32?(e=Math.ceil(t/3),n=(1/tinyPow(4,e)).toString()):(e=16,n="2.3283064365386962890625e-10"),o.precision+=e,i=taylorSeries(o,1,i.times(n),new o(1));for(var s=e;s--;){var r=i.times(i);i=r.times(r).minus(r).times(8).plus(1)}return o.precision-=e,i}var divide=function(){function o(t,n,s){var r,l=0,u=t.length;for(t=t.slice();u--;)r=t[u]*n+l,t[u]=r%s|0,l=r/s|0;return l&&t.unshift(l),t}function i(t,n,s,r){var l,u;if(s!=r)u=s>r?1:-1;else for(l=u=0;l<s;l++)if(t[l]!=n[l]){u=t[l]>n[l]?1:-1;break}return u}function e(t,n,s,r){for(var l=0;s--;)t[s]-=l,l=t[s]<n[s]?1:0,t[s]=l*r+t[s]-n[s];for(;!t[0]&&t.length>1;)t.shift()}return function(t,n,s,r,l,u){var m,y,C,T,F,I,G,Y,le,xe,se,we,g,Ue,Qe,ke,me,Be,ce,de,Le=t.constructor,ue=t.s==n.s?1:-1,J=t.d,j=n.d;if(!J||!J[0]||!j||!j[0])return new Le(!t.s||!n.s||(J?j&&J[0]==j[0]:!j)?NaN:J&&J[0]==0||!j?ue*0:ue/0);for(u?(F=1,y=t.e-n.e):(u=BASE,F=LOG_BASE,y=mathfloor(t.e/F)-mathfloor(n.e/F)),ce=j.length,me=J.length,le=new Le(ue),xe=le.d=[],C=0;j[C]==(J[C]||0);C++);if(j[C]>(J[C]||0)&&y--,s==null?(Ue=s=Le.precision,r=Le.rounding):l?Ue=s+(t.e-n.e)+1:Ue=s,Ue<0)xe.push(1),I=!0;else{if(Ue=Ue/F+2|0,C=0,ce==1){for(T=0,j=j[0],Ue++;(C<me||T)&&Ue--;C++)Qe=T*u+(J[C]||0),xe[C]=Qe/j|0,T=Qe%j|0;I=T||C<me}else{for(T=u/(j[0]+1)|0,T>1&&(j=o(j,T,u),J=o(J,T,u),ce=j.length,me=J.length),ke=ce,se=J.slice(0,ce),we=se.length;we<ce;)se[we++]=0;de=j.slice(),de.unshift(0),Be=j[0],j[1]>=u/2&&++Be;do T=0,m=i(j,se,ce,we),m<0?(g=se[0],ce!=we&&(g=g*u+(se[1]||0)),T=g/Be|0,T>1?(T>=u&&(T=u-1),G=o(j,T,u),Y=G.length,we=se.length,m=i(G,se,Y,we),m==1&&(T--,e(G,ce<Y?de:j,Y,u))):(T==0&&(m=T=1),G=j.slice()),Y=G.length,Y<we&&G.unshift(0),e(se,G,we,u),m==-1&&(we=se.length,m=i(j,se,ce,we),m<1&&(T++,e(se,ce<we?de:j,we,u))),we=se.length):m===0&&(T++,se=[0]),xe[C++]=T,m&&se[0]?se[we++]=J[ke]||0:(se=[J[ke]],we=1);while((ke++<me||se[0]!==void 0)&&Ue--);I=se[0]!==void 0}xe[0]||xe.shift()}if(F==1)le.e=y,inexact=I;else{for(C=1,T=xe[0];T>=10;T/=10)C++;le.e=C+y*F-1,finalise(le,l?s+le.e+1:s,r,I)}return le}}();function finalise(o,i,e,t){var n,s,r,l,u,m,y,C,T,F=o.constructor;e:if(i!=null){if(C=o.d,!C)return o;for(n=1,l=C[0];l>=10;l/=10)n++;if(s=i-n,s<0)s+=LOG_BASE,r=i,y=C[T=0],u=y/mathpow(10,n-r-1)%10|0;else if(T=Math.ceil((s+1)/LOG_BASE),l=C.length,T>=l)if(t){for(;l++<=T;)C.push(0);y=u=0,n=1,s%=LOG_BASE,r=s-LOG_BASE+1}else break e;else{for(y=l=C[T],n=1;l>=10;l/=10)n++;s%=LOG_BASE,r=s-LOG_BASE+n,u=r<0?0:y/mathpow(10,n-r-1)%10|0}if(t=t||i<0||C[T+1]!==void 0||(r<0?y:y%mathpow(10,n-r-1)),m=e<4?(u||t)&&(e==0||e==(o.s<0?3:2)):u>5||u==5&&(e==4||t||e==6&&(s>0?r>0?y/mathpow(10,n-r):0:C[T-1])%10&1||e==(o.s<0?8:7)),i<1||!C[0])return C.length=0,m?(i-=o.e+1,C[0]=mathpow(10,(LOG_BASE-i%LOG_BASE)%LOG_BASE),o.e=-i||0):C[0]=o.e=0,o;if(s==0?(C.length=T,l=1,T--):(C.length=T+1,l=mathpow(10,LOG_BASE-s),C[T]=r>0?(y/mathpow(10,n-r)%mathpow(10,r)|0)*l:0),m)for(;;)if(T==0){for(s=1,r=C[0];r>=10;r/=10)s++;for(r=C[0]+=l,l=1;r>=10;r/=10)l++;s!=l&&(o.e++,C[0]==BASE&&(C[0]=1));break}else{if(C[T]+=l,C[T]!=BASE)break;C[T--]=0,l=1}for(s=C.length;C[--s]===0;)C.pop()}return external&&(o.e>F.maxE?(o.d=null,o.e=NaN):o.e<F.minE&&(o.e=0,o.d=[0])),o}function finiteToString(o,i,e){if(!o.isFinite())return nonFiniteToString(o);var t,n=o.e,s=digitsToString(o.d),r=s.length;return i?(e&&(t=e-r)>0?s=s.charAt(0)+"."+s.slice(1)+getZeroString(t):r>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(o.e<0?"e":"e+")+o.e):n<0?(s="0."+getZeroString(-n-1)+s,e&&(t=e-r)>0&&(s+=getZeroString(t))):n>=r?(s+=getZeroString(n+1-r),e&&(t=e-n-1)>0&&(s=s+"."+getZeroString(t))):((t=n+1)<r&&(s=s.slice(0,t)+"."+s.slice(t)),e&&(t=e-r)>0&&(n+1===r&&(s+="."),s+=getZeroString(t))),s}function getBase10Exponent(o,i){var e=o[0];for(i*=LOG_BASE;e>=10;e/=10)i++;return i}function getLn10(o,i,e){if(i>LN10_PRECISION)throw external=!0,e&&(o.precision=e),Error(precisionLimitExceeded);return finalise(new o(LN10),i,1,!0)}function getPi(o,i,e){if(i>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new o(PI),i,e,!0)}function getPrecision(o){var i=o.length-1,e=i*LOG_BASE+1;if(i=o[i],i){for(;i%10==0;i/=10)e--;for(i=o[0];i>=10;i/=10)e++}return e}function getZeroString(o){for(var i="";o--;)i+="0";return i}function intPow(o,i,e,t){var n,s=new o(1),r=Math.ceil(t/LOG_BASE+4);for(external=!1;;){if(e%2&&(s=s.times(i),truncate(s.d,r)&&(n=!0)),e=mathfloor(e/2),e===0){e=s.d.length-1,n&&s.d[e]===0&&++s.d[e];break}i=i.times(i),truncate(i.d,r)}return external=!0,s}function isOdd(o){return o.d[o.d.length-1]&1}function maxOrMin(o,i,e){for(var t,n=new o(i[0]),s=0;++s<i.length;)if(t=new o(i[s]),t.s)n[e](t)&&(n=t);else{n=t;break}return n}function naturalExponential(o,i){var e,t,n,s,r,l,u,m=0,y=0,C=0,T=o.constructor,F=T.rounding,I=T.precision;if(!o.d||!o.d[0]||o.e>17)return new T(o.d?o.d[0]?o.s<0?0:1/0:1:o.s?o.s<0?0:o:NaN);for(i==null?(external=!1,u=I):u=i,l=new T(.03125);o.e>-2;)o=o.times(l),C+=5;for(t=Math.log(mathpow(2,C))/Math.LN10*2+5|0,u+=t,e=s=r=new T(1),T.precision=u;;){if(s=finalise(s.times(o),u,1),e=e.times(++y),l=r.plus(divide(s,e,u,1)),digitsToString(l.d).slice(0,u)===digitsToString(r.d).slice(0,u)){for(n=C;n--;)r=finalise(r.times(r),u,1);if(i==null)if(m<3&&checkRoundingDigits(r.d,u-t,F,m))T.precision=u+=10,e=s=l=new T(1),y=0,m++;else return finalise(r,T.precision=I,F,external=!0);else return T.precision=I,r}r=l}}function naturalLogarithm(o,i){var e,t,n,s,r,l,u,m,y,C,T,F=1,I=10,G=o,Y=G.d,le=G.constructor,xe=le.rounding,se=le.precision;if(G.s<0||!Y||!Y[0]||!G.e&&Y[0]==1&&Y.length==1)return new le(Y&&!Y[0]?-1/0:G.s!=1?NaN:Y?0:G);if(i==null?(external=!1,y=se):y=i,le.precision=y+=I,e=digitsToString(Y),t=e.charAt(0),Math.abs(s=G.e)<15e14){for(;t<7&&t!=1||t==1&&e.charAt(1)>3;)G=G.times(o),e=digitsToString(G.d),t=e.charAt(0),F++;s=G.e,t>1?(G=new le("0."+e),s++):G=new le(t+"."+e.slice(1))}else return m=getLn10(le,y+2,se).times(s+""),G=naturalLogarithm(new le(t+"."+e.slice(1)),y-I).plus(m),le.precision=se,i==null?finalise(G,se,xe,external=!0):G;for(C=G,u=r=G=divide(G.minus(1),G.plus(1),y,1),T=finalise(G.times(G),y,1),n=3;;){if(r=finalise(r.times(T),y,1),m=u.plus(divide(r,new le(n),y,1)),digitsToString(m.d).slice(0,y)===digitsToString(u.d).slice(0,y))if(u=u.times(2),s!==0&&(u=u.plus(getLn10(le,y+2,se).times(s+""))),u=divide(u,new le(F),y,1),i==null)if(checkRoundingDigits(u.d,y-I,xe,l))le.precision=y+=I,m=r=G=divide(C.minus(1),C.plus(1),y,1),T=finalise(G.times(G),y,1),n=l=1;else return finalise(u,le.precision=se,xe,external=!0);else return le.precision=se,u;u=m,n+=2}}function nonFiniteToString(o){return String(o.s*o.s/0)}function parseDecimal(o,i){var e,t,n;for((e=i.indexOf("."))>-1&&(i=i.replace(".","")),(t=i.search(/e/i))>0?(e<0&&(e=t),e+=+i.slice(t+1),i=i.substring(0,t)):e<0&&(e=i.length),t=0;i.charCodeAt(t)===48;t++);for(n=i.length;i.charCodeAt(n-1)===48;--n);if(i=i.slice(t,n),i){if(n-=t,o.e=e=e-t-1,o.d=[],t=(e+1)%LOG_BASE,e<0&&(t+=LOG_BASE),t<n){for(t&&o.d.push(+i.slice(0,t)),n-=LOG_BASE;t<n;)o.d.push(+i.slice(t,t+=LOG_BASE));i=i.slice(t),t=LOG_BASE-i.length}else t-=n;for(;t--;)i+="0";o.d.push(+i),external&&(o.e>o.constructor.maxE?(o.d=null,o.e=NaN):o.e<o.constructor.minE&&(o.e=0,o.d=[0]))}else o.e=0,o.d=[0];return o}function parseOther(o,i){var e,t,n,s,r,l,u,m,y;if(i.indexOf("_")>-1){if(i=i.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(i))return parseDecimal(o,i)}else if(i==="Infinity"||i==="NaN")return+i||(o.s=NaN),o.e=NaN,o.d=null,o;if(isHex.test(i))e=16,i=i.toLowerCase();else if(isBinary.test(i))e=2;else if(isOctal.test(i))e=8;else throw Error(invalidArgument+i);for(s=i.search(/p/i),s>0?(u=+i.slice(s+1),i=i.substring(2,s)):i=i.slice(2),s=i.indexOf("."),r=s>=0,t=o.constructor,r&&(i=i.replace(".",""),l=i.length,s=l-s,n=intPow(t,new t(e),s,s*2)),m=convertBase(i,e,BASE),y=m.length-1,s=y;m[s]===0;--s)m.pop();return s<0?new t(o.s*0):(o.e=getBase10Exponent(m,y),o.d=m,external=!1,r&&(o=divide(o,n,l*4)),u&&(o=o.times(Math.abs(u)<54?mathpow(2,u):Decimal.pow(2,u))),external=!0,o)}function sine(o,i){var e,t=i.d.length;if(t<3)return i.isZero()?i:taylorSeries(o,2,i,i);e=1.4*Math.sqrt(t),e=e>16?16:e|0,i=i.times(1/tinyPow(5,e)),i=taylorSeries(o,2,i,i);for(var n,s=new o(5),r=new o(16),l=new o(20);e--;)n=i.times(i),i=i.times(s.plus(n.times(r.times(n).minus(l))));return i}function taylorSeries(o,i,e,t,n){var s,r,l,u,m=o.precision,y=Math.ceil(m/LOG_BASE);for(external=!1,u=e.times(e),l=new o(t);;){if(r=divide(l.times(u),new o(i++*i++),m,1),l=n?t.plus(r):t.minus(r),t=divide(r.times(u),new o(i++*i++),m,1),r=l.plus(t),r.d[y]!==void 0){for(s=y;r.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=t,t=r,r=s}return external=!0,r.d.length=y+1,r}function tinyPow(o,i){for(var e=o;--i;)e*=o;return e}function toLessThanHalfPi(o,i){var e,t=i.s<0,n=getPi(o,o.precision,1),s=n.times(.5);if(i=i.abs(),i.lte(s))return quadrant=t?4:1,i;if(e=i.divToInt(n),e.isZero())quadrant=t?3:2;else{if(i=i.minus(e.times(n)),i.lte(s))return quadrant=isOdd(e)?t?2:3:t?4:1,i;quadrant=isOdd(e)?t?1:4:t?3:2}return i.minus(n).abs()}function toStringBinary(o,i,e,t){var n,s,r,l,u,m,y,C,T,F=o.constructor,I=e!==void 0;if(I?(checkInt32(e,1,MAX_DIGITS),t===void 0?t=F.rounding:checkInt32(t,0,8)):(e=F.precision,t=F.rounding),!o.isFinite())y=nonFiniteToString(o);else{for(y=finiteToString(o),r=y.indexOf("."),I?(n=2,i==16?e=e*4-3:i==8&&(e=e*3-2)):n=i,r>=0&&(y=y.replace(".",""),T=new F(1),T.e=y.length-r,T.d=convertBase(finiteToString(T),10,n),T.e=T.d.length),C=convertBase(y,10,n),s=u=C.length;C[--u]==0;)C.pop();if(!C[0])y=I?"0p+0":"0";else{if(r<0?s--:(o=new F(o),o.d=C,o.e=s,o=divide(o,T,e,t,0,n),C=o.d,s=o.e,m=inexact),r=C[e],l=n/2,m=m||C[e+1]!==void 0,m=t<4?(r!==void 0||m)&&(t===0||t===(o.s<0?3:2)):r>l||r===l&&(t===4||m||t===6&&C[e-1]&1||t===(o.s<0?8:7)),C.length=e,m)for(;++C[--e]>n-1;)C[e]=0,e||(++s,C.unshift(1));for(u=C.length;!C[u-1];--u);for(r=0,y="";r<u;r++)y+=NUMERALS.charAt(C[r]);if(I){if(u>1)if(i==16||i==8){for(r=i==16?4:3,--u;u%r;u++)y+="0";for(C=convertBase(y,n,i),u=C.length;!C[u-1];--u);for(r=1,y="1.";r<u;r++)y+=NUMERALS.charAt(C[r])}else y=y.charAt(0)+"."+y.slice(1);y=y+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)y="0"+y;y="0."+y}else if(++s>u)for(s-=u;s--;)y+="0";else s<u&&(y=y.slice(0,s)+"."+y.slice(s))}y=(i==16?"0x":i==2?"0b":i==8?"0o":"")+y}return o.s<0?"-"+y:y}function truncate(o,i){if(o.length>i)return o.length=i,!0}function abs(o){return new this(o).abs()}function acos(o){return new this(o).acos()}function acosh(o){return new this(o).acosh()}function add(o,i){return new this(o).plus(i)}function asin(o){return new this(o).asin()}function asinh(o){return new this(o).asinh()}function atan(o){return new this(o).atan()}function atanh(o){return new this(o).atanh()}function atan2(o,i){o=new this(o),i=new this(i);var e,t=this.precision,n=this.rounding,s=t+4;return!o.s||!i.s?e=new this(NaN):!o.d&&!i.d?(e=getPi(this,s,1).times(i.s>0?.25:.75),e.s=o.s):!i.d||o.isZero()?(e=i.s<0?getPi(this,t,n):new this(0),e.s=o.s):!o.d||i.isZero()?(e=getPi(this,s,1).times(.5),e.s=o.s):i.s<0?(this.precision=s,this.rounding=1,e=this.atan(divide(o,i,s,1)),i=getPi(this,s,1),this.precision=t,this.rounding=n,e=o.s<0?e.minus(i):e.plus(i)):e=this.atan(divide(o,i,s,1)),e}function cbrt(o){return new this(o).cbrt()}function ceil(o){return finalise(o=new this(o),o.e+1,2)}function clamp(o,i,e){return new this(o).clamp(i,e)}function config(o){if(!o||typeof o!="object")throw Error(decimalError+"Object expected");var i,e,t,n=o.defaults===!0,s=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(i=0;i<s.length;i+=3)if(e=s[i],n&&(this[e]=DEFAULTS[e]),(t=o[e])!==void 0)if(mathfloor(t)===t&&t>=s[i+1]&&t<=s[i+2])this[e]=t;else throw Error(invalidArgument+e+": "+t);if(e="crypto",n&&(this[e]=DEFAULTS[e]),(t=o[e])!==void 0)if(t===!0||t===!1||t===0||t===1)if(t)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(cryptoUnavailable);else this[e]=!1;else throw Error(invalidArgument+e+": "+t);return this}function cos(o){return new this(o).cos()}function cosh(o){return new this(o).cosh()}function clone(o){var i,e,t;function n(s){var r,l,u,m=this;if(!(m instanceof n))return new n(s);if(m.constructor=n,isDecimalInstance(s)){m.s=s.s,external?!s.d||s.e>n.maxE?(m.e=NaN,m.d=null):s.e<n.minE?(m.e=0,m.d=[0]):(m.e=s.e,m.d=s.d.slice()):(m.e=s.e,m.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){m.s=1/s<0?-1:1,m.e=0,m.d=[0];return}if(s<0?(s=-s,m.s=-1):m.s=1,s===~~s&&s<1e7){for(r=0,l=s;l>=10;l/=10)r++;external?r>n.maxE?(m.e=NaN,m.d=null):r<n.minE?(m.e=0,m.d=[0]):(m.e=r,m.d=[s]):(m.e=r,m.d=[s]);return}else if(s*0!==0){s||(m.s=NaN),m.e=NaN,m.d=null;return}return parseDecimal(m,s.toString())}else if(u!=="string")throw Error(invalidArgument+s);return(l=s.charCodeAt(0))===45?(s=s.slice(1),m.s=-1):(l===43&&(s=s.slice(1)),m.s=1),isDecimal.test(s)?parseDecimal(m,s):parseOther(m,s)}if(n.prototype=P,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=config,n.clone=clone,n.isDecimal=isDecimalInstance,n.abs=abs,n.acos=acos,n.acosh=acosh,n.add=add,n.asin=asin,n.asinh=asinh,n.atan=atan,n.atanh=atanh,n.atan2=atan2,n.cbrt=cbrt,n.ceil=ceil,n.clamp=clamp,n.cos=cos,n.cosh=cosh,n.div=div,n.exp=exp,n.floor=floor,n.hypot=hypot,n.ln=ln,n.log=log,n.log10=log10,n.log2=log2,n.max=max,n.min=min,n.mod=mod,n.mul=mul,n.pow=pow,n.random=random,n.round=round,n.sign=sign,n.sin=sin,n.sinh=sinh,n.sqrt=sqrt,n.sub=sub,n.sum=sum,n.tan=tan,n.tanh=tanh,n.trunc=trunc,o===void 0&&(o={}),o&&o.defaults!==!0)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<t.length;)o.hasOwnProperty(e=t[i++])||(o[e]=this[e]);return n.config(o),n}function div(o,i){return new this(o).div(i)}function exp(o){return new this(o).exp()}function floor(o){return finalise(o=new this(o),o.e+1,3)}function hypot(){var o,i,e=new this(0);for(external=!1,o=0;o<arguments.length;)if(i=new this(arguments[o++]),i.d)e.d&&(e=e.plus(i.times(i)));else{if(i.s)return external=!0,new this(1/0);e=i}return external=!0,e.sqrt()}function isDecimalInstance(o){return o instanceof Decimal||o&&o.toStringTag===tag||!1}function ln(o){return new this(o).ln()}function log(o,i){return new this(o).log(i)}function log2(o){return new this(o).log(2)}function log10(o){return new this(o).log(10)}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function mod(o,i){return new this(o).mod(i)}function mul(o,i){return new this(o).mul(i)}function pow(o,i){return new this(o).pow(i)}function random(o){var i,e,t,n,s=0,r=new this(1),l=[];if(o===void 0?o=this.precision:checkInt32(o,1,MAX_DIGITS),t=Math.ceil(o/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(i=crypto.getRandomValues(new Uint32Array(t));s<t;)n=i[s],n>=429e7?i[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=n%1e7;else if(crypto.randomBytes){for(i=crypto.randomBytes(t*=4);s<t;)n=i[s]+(i[s+1]<<8)+(i[s+2]<<16)+((i[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(i,s):(l.push(n%1e7),s+=4);s=t/4}else throw Error(cryptoUnavailable);else for(;s<t;)l[s++]=Math.random()*1e7|0;for(t=l[--s],o%=LOG_BASE,t&&o&&(n=mathpow(10,LOG_BASE-o),l[s]=(t/n|0)*n);l[s]===0;s--)l.pop();if(s<0)e=0,l=[0];else{for(e=-1;l[0]===0;e-=LOG_BASE)l.shift();for(t=1,n=l[0];n>=10;n/=10)t++;t<LOG_BASE&&(e-=LOG_BASE-t)}return r.e=e,r.d=l,r}function round(o){return finalise(o=new this(o),o.e+1,this.rounding)}function sign(o){return o=new this(o),o.d?o.d[0]?o.s:0*o.s:o.s||NaN}function sin(o){return new this(o).sin()}function sinh(o){return new this(o).sinh()}function sqrt(o){return new this(o).sqrt()}function sub(o,i){return new this(o).sub(i)}function sum(){var o=0,i=arguments,e=new this(i[o]);for(external=!1;e.s&&++o<i.length;)e=e.plus(i[o]);return external=!0,finalise(e,this.precision,this.rounding)}function tan(o){return new this(o).tan()}function tanh(o){return new this(o).tanh()}function trunc(o){return finalise(o=new this(o),o.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var Decimal=P.constructor=clone(DEFAULTS);LN10=new Decimal(LN10);PI=new Decimal(PI);class SqlViewModel{constructor(){h(this,"SvcId","");h(this,"ComId","");h(this,"Action","");h(this,"Params","");h(this,"Ids",[]);h(this,"AnnonymousTenant",Client.Tenant);h(this,"AnnonymousEnv",Client.Env);h(this,"Paging","");h(this,"Select","");h(this,"Where","");h(this,"OrderBy","");h(this,"GroupBy","");h(this,"Having","");h(this,"Count",!1);h(this,"FieldName",[]);h(this,"SkipXQuery",!1);h(this,"Skip",0);h(this,"Top",0);h(this,"MetaConn",Client.MetaConn);h(this,"DataConn",Client.DataConn);h(this,"Table","");h(this,"WrapQuery",!0)}}class BadGatewayQueue{constructor(){this._queue=[]}Enqueue(i){!i.NoQueue&&i.Method!=="GET"&&(i.Retry=!0,this._queue.push(i))}Dequeue(){return this._queue.shift()}Peek(){return this._queue[0]}get Count(){return this._queue.length}}class Token{constructor(){h(this,"UserId",null);h(this,"CostCenterId",null);h(this,"UserName",null);h(this,"Email",null);h(this,"FirstName",null);h(this,"LastName",null);h(this,"FullName",null);h(this,"Address",null);h(this,"Avatar",null);h(this,"AccessToken",null);h(this,"RefreshToken",null);h(this,"AccessTokenExp",null);h(this,"RefreshTokenExp",null);h(this,"HashPassword",null);h(this,"Recovery",null);h(this,"Vendor",null);h(this,"RoleIds",[]);h(this,"RoleNames",[]);h(this,"CenterIds",[]);h(this,"Ssn",null);h(this,"PhoneNumber",null);h(this,"TeamId",null);h(this,"PartnerId",null);h(this,"RegionId",null);h(this,"Additional",null);h(this,"SigninDate",new Date);h(this,"TenantCode",null);h(this,"Env",null);h(this,"ConnKey",null);h(this,"SystemRole",!1);this.TenantCode=Client.Tenant,this.Env=Client.Env,this.ConnKey=Client.MetaConn}static parse(i){var e=i.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));const s=JSON.parse(n),r=new Token;return r.CopyPropFrom(s),r}}class PatchDetail{constructor(){h(this,"Field","");h(this,"Label","");h(this,"OldVal","");h(this,"Value","");h(this,"HistoryValue","")}}class PatchVM{constructor(){h(this,"FeatureId");h(this,"ComId");h(this,"Table");h(this,"DeletedIds");h(this,"QueueName");h(this,"CacheName");h(this,"MetaConn");h(this,"DataConn");h(this,"Changes",[])}get EntityId(){const i=this.Changes.find(e=>e.Field===Utils.IdField);return i?i.Value:null}set OldId(i){let e=this.Changes.find(t=>t.Field===Utils.IdField);e?e.OldVal=i:this.Changes.push(new PatchDetail(Utils.IdField,"",i,"",""))}}class Toast{static Create(i){const e=document.createElement("div");e.className=`toast ${i.ClassName}`,e.innerHTML=i.Message;var t=document.createElement("i");t.className=i.Icon,e.appendChild(t),document.body.appendChild(e),setTimeout(()=>{e.remove()},i.Timeout)}static Success(i,e=2500,...t){Toast.Create({ClassName:"success",Timeout:e,Icon:"fal fa-check",Message:i,Params:t})}static Warning(i,...e){Toast.Create({ClassName:"warning",Icon:"fal fa-exclamation-triangle",Timeout:2500,Message:i,Params:e})}static Error(i,...e){Toast.Create({ClassName:"error",Timeout:2500,Message:i,Params:e})}static Small(i,e=2500){Toast.Create({ClassName:"sm-tran",Timeout:e,Message:i})}}const Path={ImgExt:["tif","pjp","xbm","jxl","svgz","jpeg","ico","tiff","gif","svg","jfif","webp","png","bmp","pjpeg","avif","jpg"],IsImage(o){const i=this.GetExtension(o).toLowerCase().substring(1);return this.ImgExt.includes(i)},CombineHostAndPath(o,i){return this.ContainHost(i)?i:this.Combine(o,i)},ContainHost(o){return o.includes("http://")||o.includes("https://")},GetExtension(o){return o?o.substring(o.lastIndexOf(".")):""},GetFileName(o){if(!o)return"";const i=o.lastIndexOf("/");return i>=0?o.substring(i+1):o},GetFileNameWithoutExtension(o){if(!o)return"";const i=o.lastIndexOf("/"),e=o.lastIndexOf("."),t=i>=0?i+1:0;return o.substring(t,e)},Combine(...o){return o.length?o.filter(e=>e).map(e=>{const t=e[0]==="/"?1:0,n=e[e.length-1]==="/"?e.length-1:e.length;return e.substring(t,n)}).join("/"):""}};class Action{constructor(){h(this,"hasTrigger",!1);h(this,"handler",[])}add(i){this.handler.push(i)}Invoke(i){var e;this.hasTrigger=!0,(e=this.handler)==null||e.forEach(t=>t(i))}invoke(i){var e;this.hasTrigger=!0,(e=this.handler)==null||e.forEach(t=>t(i))}}var ts,is,ns,ss,rs,as,os,ls,cs,Gi,Li;const Se=class Se{constructor(i,e="",t=!1){h(this,"_nameSpace");h(this,"_config");h(this,"CustomPrefix",(()=>{const i=Array.from(document.head.children).find(e=>e instanceof HTMLMetaElement&&e.name==="prefix");return i==null?void 0:i.content})());this._nameSpace=e,this._config=t,this._nameSpace&&this._nameSpace.charAt(this._nameSpace.length-1)!=="."&&(this._nameSpace+="."),this.EntityName=i}static get Origin(){var i;return((i=document.head.origin)==null?void 0:i.content)||window.location.origin}static get Instance(){return Se._instance||(Se._instance=new Se),Se._instance}static get Token(){const i=Gt(this,Gi);return i||JSON.parse(localStorage.getItem("UserInfo"))}static set Token(i){ei(this,Gi,i),localStorage.setItem("UserInfo",JSON.stringify(i))}static get SystemRole(){var i;return Gt(Se,Li)==null&&ei(Se,Li,(i=Token.parse(Se.Token.AccessToken))==null?void 0:i.SystemRole),Gt(Se,Li)}async UserSvc(i,e=!1){const t={Value:JSON.stringify(i),Url:Utils$1.UserSvc,IsRawString:!0,Method:"POST",AllowAnonymous:e};return this.SubmitAsync(t)}async ComQuery(i){const e={Value:JSON.stringify(i),Url:Utils$1.ComQuery,IsRawString:!0,Method:"POST"};return this.SubmitAsync(e)}GetIds(i){let e,t;const n=new Promise((r,l)=>{e=r,t=l});i.Select="ds.Id",i.Count=!1,i.SkipXQuery=!0;const s={Url:Utils$1.ComQuery,Value:JSON.stringify(i),IsRawString:!0,Method:"POST"};return this.SubmitAsync(s).then(r=>{var u;const l=r.length===0||r[0].length===0?[]:(u=r[0])==null?void 0:u.map(m=>m.Id);e(l)}).catch(t),n}async SubmitAsyncWithToken(i){const e=i.FormData===void 0;return new Promise((n,s)=>{var l;const r=new XMLHttpRequest;!i.Headers&&i.FormData===void 0&&(i.Headers={"Content-Type":"application/json"}),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?ProcessSuccessRequest(i,n,r):ErrorHandler(i,s,r))},i.ProgressHandler!==void 0&&r.addEventListener("progress",i.ProgressHandler),r.open(i.Method,Se.api+(i.FinalUrl??i.Url),!0),i.AllowAnonymous||r.setRequestHeader("Authorization","Bearer "+((l=Se.Token)==null?void 0:l.AccessToken));for(const[u,m]of Object.entries(i.Headers))r.setRequestHeader(u,m);e?r.send(i.JsonData):r.send(i.FormData)})}async SubmitAsync(i){return i.AllowAnonymous||await Se.RefreshToken(),await this.SubmitAsyncWithToken(i)}async FirstOrDefaultAsync(i=null,e=!1,t=!1){var r;const n=ClearCacheHeader(e),s=await this.SubmitAsync({Value:null,AddTenant:t,Url:i,Headers:n,Method:"GET"});return(r=s==null?void 0:s.Value)==null?void 0:r[0]}async GetByIdAsync(i,e){const t={JsonData:JSON.stringify({Table:i,Id:e}),Url:Utils$1.ComQuery,IsRawString:!0,Method:"POST"};return this.SubmitAsync(t)}async PostAsync(i,e="",t=!1){const n={Value:i,Url:e,Method:"POST",AllowAnonymous:t};return this.SubmitAsync(n)}async PatchAsync(i,e=null,t=!1){const n={JsonData:JSON.stringify(i),IsRawString:!0,Url:Utils$1.PatchSvc,Headers:{"Content-type":"application/json"},Method:"PATCH",AllowAnonymous:t,ErrorHandler:e};return this.SubmitAsync(n)}async PostFilesAsync(i,e="",t=null){const n=new FormData;n.append("file",i);const s={FormData:n,File:i,ProgressHandler:t,Method:"POST",Url:e};return this.SubmitAsync(s)}async SendMail(i){return this.SubmitAsync({Value:i,Method:"POST",Url:"Email"})}async DeactivateAsync(i,e,t){const n={Ids:i,Params:e,MetaConn:Se.MetaConn,DataConn:t||Se.DataConn};return this.SubmitAsync({Url:Utils$1.DeactivateSvc,Value:JSON.stringify(n),Method:"DELETE",IsRawString:!0,Headers:{"Content-type":"application/json"}})}async HardDeleteAsync(i,e,t,n=null){const s={Table:e,DeletedIds:i,DataConn:t||Se.DataConn,MetaConn:n||Se.MetaConn};return this.SubmitAsync({Url:Utils$1.DeleteSvc,JsonData:JSON.stringify(s),Method:"DELETE",IsRawString:!0,Headers:{"Content-type":"application/json"}})}static async LoadScript(i){return Array.from(document.body.children).some(n=>n instanceof HTMLScriptElement&&n.src.split("/").pop()===i.split("/").pop())?!0:new Promise(n=>{const s=document.createElement("script");s.src=i,s.addEventListener("load",()=>{n(!0)}),s.onerror=()=>(n(!0),!1),document.body.appendChild(s)})}static async LoadLink(i){return Array.from(document.head.children).some(n=>n instanceof HTMLLinkElement&&n.href.replace(document.location.origin,"")===i)?!0:new Promise(n=>{const s=document.createElement("link");s.href=i,s.addEventListener("load",()=>{n(!0)}),s.onerror=()=>(n(!0),!1),document.head.appendChild(s)})}static async RefreshToken(i=null){const e=Se.Token;if(!e||new Date(e.RefreshTokenExp)<=Se.EpsilonNow)return null;if(new Date(e.AccessTokenExp)>Se.EpsilonNow)return e;if(new Date(e.AccessTokenExp)<=Se.EpsilonNow&&new Date(e.RefreshTokenExp)>Se.EpsilonNow){const t=await Se.GetToken(e);return t&&(Se.Token=t,i==null||i(t)),t}}static async GetToken(i){return await Se.Instance.SubmitAsync({NoQueue:!0,Url:`/api/auth/refreshToken?t=${Se.Token.TenantCode||Se.Tenant}`,Method:"POST",JsonData:JSON.stringify({RefreshToken:i.RefreshToken}),AllowAnonymous:!0,ErrorHandler:t=>{t.status===400&&(Se.Token=null,Toast.Warning("Phiên truy cập đã hết hạn! Vui lòng chờ trong giây lát, hệ thống đang tải lại trang"))}})}static RemoveGuid(i){let t=i;if(i.length>36){const n=Utils$1.GetFileNameWithoutExtension(i);t=n.substring(0,n.length-36)+"."+i.split(".").pop()}return t}static Download(i){const e=this.RemoveGuid(i),t=document.createElement("a");t.href=i.includes("http")?i:Path.Combine(Se.Origin,i),t.target="_blank",t.setAttribute("download",e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}};Gi=new WeakMap,Li=new WeakMap,h(Se,"Entities",[]),h(Se,"EpsilonNow",new Date(Date.now()+1*60*1e3)),h(Se,"ErrorMessage","Hệ thống đang cập nhật vui lòng chờ trong 30s!"),h(Se,"ModelNamespace"),h(Se,"entities"),h(Se,"token"),h(Se,"GuidLength",36),h(Se,"Host",(((ts=document.head.host)==null?void 0:ts.content)||window.location.host).toLowerCase()),h(Se,"BaseUri",(((is=document.head.baseUri)==null?void 0:is.content)||window.location.origin).toLowerCase()),h(Se,"IsPortal",((ns=document.head.startup)==null?void 0:ns.content)!=="admin"),h(Se,"MetaConn",((ss=document.head.metaKey)==null?void 0:ss.content)||"default"),h(Se,"DataConn",((rs=document.head.dataConn)==null?void 0:rs.content)||"bl"),h(Se,"Tenant",((as=document.head.tenant)==null?void 0:as.content)||"System"),h(Se,"Env",((os=document.head.env)==null?void 0:os.content)||"test"),h(Se,"FileFTP",((ls=document.head.file)==null?void 0:ls.content)||"/user"),h(Se,"api",(()=>{const i=Array.from(document.head.childNodes).find(e=>e.name==="api");return i?i.content:"http://localhost:8005"})()),h(Se,"Config",((cs=document.head.config)==null?void 0:cs.content)||""),h(Se,"BadGatewayRequest",new BadGatewayQueue),h(Se,"UnAuthorizedEventHandler",new Action),h(Se,"SignOutEventHandler",new Action),h(Se,"_instance"),li(Se,Gi),li(Se,Li);let Client=Se;function ProcessSuccessRequest(o,i,e){if(o.Retry){i(!0);return}if(!e.responseText){i(null);return}if(o.CustomParser){i(o.CustomParser(e.response));return}const t=typeof o.Value;if(t==="number")i(Number(e.responseText));else if(t==="string")i(e.responseText);else if(t==="object"){const n=JSON.parse(e.responseText);i(n)}else try{const n=JSON.parse(e.responseText);i(n)}catch{i(e.responseText)}}function ErrorHandler(o,i,e){var n;if(o.Retry){i(!1);return}let t;try{t=JSON.parse(e.responseText),t.StatusCode=e.status}catch{t={Message:"Đã có lỗi xảy ra trong quá trình xử lý",StackTrace:e.responseText}}if(o.ErrorHandler){o.ErrorHandler(e),i(new Error(t.Message));return}e.status>=400&&e.status<500?t&&t.Message&&o.ShowError&&console.warn(t.Message):e.status===500||e.status===404?console.warn(t):e.status===401?(n=Client.UnAuthorizedEventHandler)==null||n.call(Client,o):e.status>=502||e.status===504||e.status===503?(o.ShowError&&console.warn("Lỗi kết nối tới máy chủ, vui lòng chờ trong giây lát..."),o.Retry||Client.BadGatewayRequest.Enqueue(o)):e.responseText&&console.warn(e.responseText),i(new Error(t.Message))}function ClearCacheHeader(o){const i={};return o&&(i.Pragma="no-cache",i.Expires="0",i["Last-Modified"]=new Date().toString(),i["If-Modified-Since"]=new Date().toString(),i["Cache-Control"]="no-store, no-cache, must-revalidate, post-check=0, pre-check=0"),i}var ye;let Utils$1=(ye=class{static get HeadChildren(){return document.head.children}static EncodeSpecialChar(i){return i?i.split("").map(e=>ye.SpecialChar[e]||e).join(""):null}static DecodeSpecialChar(i){return!i||i==null||i===null?null:i.replaceAll("%2B","+").replaceAll("%2F","/").replaceAll("%3F","?").replaceAll("%23","#").replaceAll("%26","&")}static GenerateRandomToken(i=32){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;for(let s=0;s<i;s++)e+=t.charAt(Math.floor(Math.random()*n));return e}static ToJson(i){return JSON.stringify(i)}static Clone(i){return JSON.parse(JSON.stringify(i))}static TryParseInt(i){const e=parseInt(i,10);return isNaN(e)?null:e}static TryParseDecimal(i){try{return[!0,new Decimal(i)]}catch{return[!1,null]}}static Parse(i){try{return JSON.parse(i)}catch{return null}}static TryParse(i){try{return JSON.parse(i)}catch{return null}}static ChangeType(i,e){switch(e){case"int":case"number":return ye.TryParseInt(i);case"decimal":return ye.TryParseDecimal(i);case"boolean":return i==="true";default:return i}}static EncodeProperties(i){return!i||typeof i!="object"||Object.keys(i).forEach(e=>{typeof i[e]=="string"&&(i[e]=ye.EncodeSpecialChar(i[e]))}),i}static DecodeProperties(i){return!i||typeof i!="object"||Object.keys(i).forEach(e=>{typeof i[e]=="string"&&(i[e]=ye.DecodeSpecialChar(i[e]))}),i}static GetUrlParam(i=ye.FeatureField,e=null){return new URLSearchParams(e||window.location.search).get(i)}static GetEntityById(i){return Client.Entities[i]}static GetEntity(i){return Object.values(Client.Entities).find(e=>e.Name===i)}static IsNullable(i,e){const t=ye.GetPropValue(i,e);return!t||t==="object"}static GetComplexPropType(i,e){if(!i||!e||typeof e!="object")return null;const t=i.split(".");let n=e;for(const s of t){if(!n.hasOwnProperty(s))return null;n=n[s]}return typeof n}static GetPropValue(i,e){if(!i||!e||typeof i!="object")return null;const t=e.split(".");let n=i;for(const s of t){if(!n.hasOwnProperty(s))return null;n=n[s]}return n}static FormatEntity(i,e){if(i===null)return null;if(e===null)return i;let t=[],n=0,s=!1,r=!1,l=[],u=[];for(let m=0;m<i.length;m++){const y=i[m];switch(y){case"{":s=!0,r=!0,t.push(y+n.toString());break;case":":s&&!r?t.push(y):s?(r=!1,t.push(y),this.GetValues(e,l,u),l=[]):t.push(y);break;case"}":s&&(s=!1,t.push(y),n++,this.GetValues(e,l,u),l=[]);break;default:s&&r?l.push(y):t.push(y);break}}return this.Format(t.join(""),u)}static Format(i,...e){return i.replace(/{(\d+)}/g,(t,n)=>typeof e[n]<"u"?e[n]:t)}static GetValues(i,e,t=[]){if(!(e==null||e==="")){var n=i[e.join("")];t.push(n)}}static SetPropValue(i,e,t){!e||e.trim()===""||i&&typeof i=="object"&&(i[e]=t)}static GetCellText(i,e,t,n=!1,s=null){return this.DecodeSpecialChar(this.GetCellTextInternal(i,e,t,n,s))}static GetCellTextInternal(i,e,t,n=!1,s=null){let r="";if(n||e!==null&&i.FieldName===this.IdField&&typeof e=="number"&&e<=0)return"";if(e===null)return this.isNullOrWhiteSpace(i.FormatEntity)||(this.isFunction(i.FormatEntity)?r=getFunction(i.FormatEntity).call(t,t,s).toString():r=this.GetFormattedRow(i.FormatEntity,t)),r;switch(i.ComponentType){case"Datepicker":let l=new Date,u=Date.parse(e.toString());r=formatDate(u?new Date(e):l,i.FormatData||"dd/MM/yyyy");break;case"Dropdown":case"Select2":try{let T=i.FieldName;i.FieldName.substr(i.FieldName.length-2)===this.IdField&&(T=i.FieldName.substr(0,i.FieldName.length-2));let I=t[T];if(I===null||typeof I=="number"){let G=i.LocalData;I=G&&G.find(Y=>compareIdField(Y,e))}I===null||this.isNullOrWhiteSpace(i.FormatData)?r="":r=this.FormatEntity(i.FormatData,I)}catch{console.log(`Format of ${i.FieldName} is null`),r=""}break;case"MultipleSearchEntry":let m=i.LocalData;r=e.split(",").map(T=>parseInt(T,10)).filter(T=>T!==0).map(T=>{let F=m&&m.find(I=>this.compareIdField(I,T));return F===null||this.isNullOrWhiteSpace(i.FormatData)?"":this.FormatEntity(i.FormatData,null,F,EmptyFormat,EmptyFormat)}).join("");break;default:r=(e==null?void 0:e.toString())??"",this.isNullOrWhiteSpace(i.FormatData)||(r=this.formatString(i.FormatData,r)),this.isNullOrWhiteSpace(i.FormatEntity)||(this.IsFunction(i.FormatEntity)?r=this.getFunction(i.FormatEntity).call(t,t,s).toString():r=this.GetFormattedRow(i.FormatEntity,t)),i.ComponentType==="Number"&&i.UpperCase&&(r=r.replace(/,/g," "));break}return r}static isNullOrWhiteSpace(i){return!i||i.trim()===""||i.trim()===null}static isFunction(i){return typeof window[i]=="function"}static getFunction(i){return window[i]}static getFormattedRow(i,e){return""}static formatDate(i,e){return""}static getPropValue(i,e){return i[e]}static formatString(i,e){return i.replace("{0}",e)}static GetHtmlCode(i,e,t=ye.NullFormatHandler,n=ye.NotFoundHandler){if(!i)return null;const s=[];let r=0,l=!1,u="",m="";for(let y=0;y<i.length;y++){const C=i[y];switch(C){case"$":i[y+1]==="{"?(l=!0,m+="{"+r.toString()):l?u+=C:m+=C;break;case"}":l?(l=!1,m+=C,r++,ye.GetValues(e[0],t,n,u,s),u=""):m+=C;break;default:if(l&&C==="{")break;l?u+=C:m+=C;break}}return m}static GetFormattedRow(i,e){var n;return ye.IsFunction(i)?(n=i(e,e))==null?void 0:n.toString():ye.FormatEntity2(i,null,e,ye.EmptyFormat,ye.EmptyFormat)}static ForEachProp(i,e){if(!i||typeof i!="object"||typeof e!="function")return;Object.keys(i).forEach(n=>e(n,i[n]))}static LastDayOfMonth(i=null){const e=i?new Date(i):new Date,t=e.getFullYear(),n=e.getMonth()+1;return new Date(t,n,0)}static IsFunction(i,e=!1,t){if(e=i&&!i.includes("return"),!i||i==null||i=="")return null;if(i instanceof Function)return i;try{var n=new Function(e?"return "+i:i);return n.call(t)}catch{return null}}static GetFileNameWithoutExtension(i){if(!i)return"";var e=i.lastIndexOf("/");e<0&&(e=0);var t=i.lastIndexOf(".");return i.substring(e+1|0,(t-1|0)-(e>=0?e:0)|0)}static IsImage(i){const e=["png","jpg","jpeg","gif","bmp"],t=s=>{const r=s.lastIndexOf(".")+1;return s.slice(r+1)};return e.includes(t(i).toLowerCase())}static GetExtension(i){return i?i.substring(i.lastIndexOf(".")):""}static IsOwner(i,e=!0){var I,G,Y;const t="Id",n="OwnerUserIds",s="OwnerRoleIds",r="InsertedBy",l=",";if(!i||i[t]!==null||!Client.Token)return e;const u=(I=i[n])==null?void 0:I.toString(),m=(u==null?void 0:u.trim())!==""&&u.split(l).includes(Client.Token.UserId),y=(G=i[s])==null?void 0:G.toString(),C=(y==null?void 0:y.trim())!==""&&y.split(l).some(le=>Client.Token.RoleIds.includes(le)),T=(Y=i[r])==null?void 0:Y.toString();return!u&&T===Client.Token.UserId||C||m}static CastProp(i,e){if(i==null)return null;const t=new e;return this.CopyPropsFrom(i,t),t}static CopyPropsFrom(i,e){for(let t in i)i.hasOwnProperty(t)&&(e[t]=i[t])}static As(i,e){return i instanceof e?i:null}static UploadBase64Image(i,e){const t={Value:i,Url:`/user/image/?name=${e}`,IsRawString:!0,Method:HttpMethod.POST};return Client.Instance.SubmitAsync(t)}static GetMimeType(i){if(i===null)throw new Error("extension cannot be null");switch(i.startsWith(".")&&(i=i.substring(1)),i=i.toLowerCase(),i){case"323":return"text/h323";case"3g2":return"video/3gpp2";case"3gp":return"video/3gpp";case"3gp2":return"video/3gpp2";case"3gpp":return"video/3gpp";case"7z":return"application/x-7z-compressed";case"aa":return"audio/audible";case"aac":return"audio/aac";case"aaf":return"application/octet-stream";case"aax":return"audio/vnd.audible.aax";case"ac3":return"audio/ac3";case"aca":return"application/octet-stream";case"accda":return"application/msaccess.addin";case"accdb":return"application/msaccess";case"accdc":return"application/msaccess.cab";case"accde":return"application/msaccess";case"accdr":return"application/msaccess.runtime";case"accdt":return"application/msaccess";case"accdw":return"application/msaccess.webapplication";case"accft":return"application/msaccess.ftemplate";case"acx":return"application/internet-property-stream";case"addin":return"text/xml";case"ade":return"application/msaccess";case"adobebridge":return"application/x-bridge-url";case"adp":return"application/msaccess";case"adt":return"audio/vnd.dlna.adts";case"adts":return"audio/aac";case"afm":return"application/octet-stream";case"ai":return"application/postscript";case"aif":return"audio/x-aiff";case"aifc":return"audio/aiff";case"aiff":return"audio/aiff";case"air":return"application/vnd.adobe.air-application-installer-package+zip";case"amc":return"application/x-mpeg";case"application":return"application/x-ms-application";case"art":return"image/x-jg";case"asa":return"application/xml";case"asax":return"application/xml";case"ascx":return"application/xml";case"asd":return"application/octet-stream";case"asf":return"video/x-ms-asf";case"ashx":return"application/xml";case"asi":return"application/octet-stream";case"asm":return"text/plain";case"asmx":return"application/xml";case"aspx":return"application/xml";case"asr":return"video/x-ms-asf";case"asx":return"video/x-ms-asf";case"atom":return"application/atom+xml";case"au":return"audio/basic";case"avi":return"video/x-msvideo";case"axs":return"application/olescript";case"bas":return"text/plain";case"bcpio":return"application/x-bcpio";case"bin":return"application/octet-stream";case"bmp":return"image/bmp";case"c":return"text/plain";case"cab":return"application/octet-stream";case"caf":return"audio/x-caf";case"calx":return"application/vnd.ms-office.calx";case"cat":return"application/vnd.ms-pki.seccat";case"cc":return"text/plain";case"cd":return"text/plain";case"cdda":return"audio/aiff";case"cdf":return"application/x-cdf";case"cer":return"application/x-x509-ca-cert";case"chm":return"application/octet-stream";case"class":return"application/x-java-applet";case"clp":return"application/x-msclip";case"cmx":return"image/x-cmx";case"cnf":return"text/plain";case"cod":return"image/cis-cod";case"config":return"application/xml";case"contact":return"text/x-ms-contact";case"coverage":return"application/xml";case"cpio":return"application/x-cpio";case"cpp":return"text/plain";case"crd":return"application/x-mscardfile";case"crl":return"application/pkix-crl";case"crt":return"application/x-x509-ca-cert";case"cs":return"text/plain";case"csdproj":return"text/plain";case"csh":return"application/x-csh";case"csproj":return"text/plain";case"css":return"text/css";case"csv":return"text/csv";case"cur":return"application/octet-stream";case"cxx":return"text/plain";case"dat":return"application/octet-stream";case"DataSourceFilter":return"application/xml";case"dbproj":return"text/plain";case"dcr":return"application/x-director";case"def":return"text/plain";case"deploy":return"application/octet-stream";case"der":return"application/x-x509-ca-cert";case"dgml":return"application/xml";case"dib":return"image/bmp";case"dif":return"video/x-dv";case"dir":return"application/x-director";case"disco":return"text/xml";case"dll":return"application/x-msdownload";case"dll.config":return"text/xml";case"dlm":return"text/dlm";case"doc":return"application/msword";case"docm":return"application/vnd.ms-word.document.macroenabled.12";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"dot":return"application/msword";case"dotm":return"application/vnd.ms-word.template.macroenabled.12";case"dotx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.template";case"dsp":return"application/octet-stream";case"dsw":return"text/plain";case"dtd":return"text/xml";case"dtsconfig":return"text/xml";case"dv":return"video/x-dv";case"dvi":return"application/x-dvi";case"dwf":return"drawing/x-dwf";case"dwp":return"application/octet-stream";case"dxr":return"application/x-director";case"eml":return"message/rfc822";case"emz":return"application/octet-stream";case"eot":return"application/octet-stream";case"eps":return"application/postscript";case"etl":return"application/etl";case"etx":return"text/x-setext";case"evy":return"application/envoy";case"exe":return"application/octet-stream";case"exe.config":return"text/xml";case"fdf":return"application/vnd.fdf";case"fif":return"application/fractals";case"filters":return"application/xml";case"fla":return"application/octet-stream";case"flr":return"x-world/x-vrml";case"flv":return"video/x-flv";case"fsscript":return"application/fsharp-script";case"fsx":return"application/fsharp-script";case"generictest":return"application/xml";case"gif":return"image/gif";case"group":return"text/x-ms-group";case"gsm":return"audio/x-gsm";case"gtar":return"application/x-gtar";case"gz":return"application/x-gzip";case"h":return"text/plain";case"hdf":return"application/x-hdf";case"hdml":return"text/x-hdml";case"hhc":return"application/x-oleobject";case"hhk":return"application/octet-stream";case"hhp":return"application/octet-stream";case"hlp":return"application/winhlp";case"hpp":return"text/plain";case"hqx":return"application/mac-binhex40";case"hta":return"application/hta";case"htc":return"text/x-component";case"htm":return"text/html";case"html":return"text/html";case"htt":return"text/webviewhtml";case"hxa":return"application/xml";case"hxc":return"application/xml";case"hxd":return"application/octet-stream";case"hxe":return"application/xml";case"hxf":return"application/xml";case"hxh":return"application/octet-stream";case"hxi":return"application/octet-stream";case"hxk":return"application/xml";case"hxq":return"application/octet-stream";case"hxr":return"application/octet-stream";case"hxs":return"application/octet-stream";case"hxt":return"text/html";case"hxv":return"application/xml";case"hxw":return"application/octet-stream";case"hxx":return"text/plain";case"i":return"text/plain";case"ico":return"image/x-icon";case"ics":return"application/octet-stream";case"idl":return"text/plain";case"ief":return"image/ief";case"iii":return"application/x-iphone";case"inc":return"text/plain";case"inf":return"application/octet-stream";case"inl":return"text/plain";case"ins":return"application/x-internet-signup";case"ipa":return"application/x-itunes-ipa";case"ipg":return"application/x-itunes-ipg";case"ipproj":return"text/plain";case"ipsw":return"application/x-itunes-ipsw";case"iqy":return"text/x-ms-iqy";case"isp":return"application/x-internet-signup";case"ite":return"application/x-itunes-ite";case"itlp":return"application/x-itunes-itlp";case"itms":return"application/x-itunes-itms";case"itpc":return"application/x-itunes-itpc";case"ivf":return"video/x-ivf";case"jar":return"application/java-archive";case"java":return"application/octet-stream";case"jck":return"application/liquidmotion";case"jcz":return"application/liquidmotion";case"jfif":return"image/pjpeg";case"jnlp":return"application/x-java-jnlp-file";case"jpb":return"application/octet-stream";case"jpe":return"image/jpeg";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"js":return"application/x-javascript";case"jsx":return"text/jscript";case"jsxbin":return"text/plain";case"latex":return"application/x-latex";case"library-ms":return"application/windows-library+xml";case"lit":return"application/x-ms-reader";case"loadtest":return"application/xml";case"lpk":return"application/octet-stream";case"lsf":return"video/x-la-asf";case"lst":return"text/plain";case"lsx":return"video/x-la-asf";case"lzh":return"application/octet-stream";case"m13":return"application/x-msmediaview";case"m14":return"application/x-msmediaview";case"m1v":return"video/mpeg";case"m2t":return"video/vnd.dlna.mpeg-tts";case"m2ts":return"video/vnd.dlna.mpeg-tts";case"m2v":return"video/mpeg";case"m3u":return"audio/x-mpegurl";case"m3u8":return"audio/x-mpegurl";case"m4a":return"audio/m4a";case"m4b":return"audio/m4b";case"m4p":return"audio/m4p";case"m4r":return"audio/x-m4r";case"m4v":return"video/x-m4v";case"mac":return"image/x-macpaint";case"mak":return"text/plain";case"man":return"application/x-troff-man";case"manifest":return"application/x-ms-manifest";case"map":return"text/plain";case"master":return"application/xml";case"mda":return"application/msaccess";case"mdb":return"application/x-msaccess";case"mde":return"application/msaccess";case"mdp":return"application/octet-stream";case"me":return"application/x-troff-me";case"mfp":return"application/x-shockwave-flash";case"mht":return"message/rfc822";case"mhtml":return"message/rfc822";case"mid":return"audio/mid";case"midi":return"audio/mid";case"mix":return"application/octet-stream";case"mk":return"text/plain";case"mmf":return"application/x-smaf";case"mno":return"text/xml";case"mny":return"application/x-msmoney";case"mod":return"video/mpeg";case"mov":return"video/quicktime";case"movie":return"video/x-sgi-movie";case"mp2":return"video/mpeg";case"mp2v":return"video/mpeg";case"mp3":return"audio/mpeg";case"mp4":return"video/mp4";case"mp4v":return"video/mp4";case"mpa":return"video/mpeg";case"mpe":return"video/mpeg";case"mpeg":return"video/mpeg";case"mpf":return"application/vnd.ms-mediapackage";case"mpg":return"video/mpeg";case"mpp":return"application/vnd.ms-project";case"mpv2":return"video/mpeg";case"mqv":return"video/quicktime";case"ms":return"application/x-troff-ms";case"msi":return"application/octet-stream";case"mso":return"application/octet-stream";case"mts":return"video/vnd.dlna.mpeg-tts";case"mtx":return"application/xml";case"mvb":return"application/x-msmediaview";case"mvc":return"application/x-miva-compiled";case"mxp":return"application/x-mmxp";case"nc":return"application/x-netcdf";case"nsc":return"video/x-ms-asf";case"nws":return"message/rfc822";case"ocx":return"application/octet-stream";case"oda":return"application/oda";case"odc":return"text/x-ms-odc";case"odh":return"text/plain";case"odl":return"text/plain";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/oleobject";case"odt":return"application/vnd.oasis.opendocument.text";case"one":return"application/onenote";case"onea":return"application/onenote";case"onepkg":return"application/onenote";case"onetmp":return"application/onenote";case"onetoc":return"application/onenote";case"onetoc2":return"application/onenote";case"orderedtest":return"application/xml";case"osdx":return"application/opensearchdescription+xml";case"p10":return"application/pkcs10";case"p12":return"application/x-pkcs12";case"p7b":return"application/x-pkcs7-certificates";case"p7c":return"application/pkcs7-mime";case"p7m":return"application/pkcs7-mime";case"p7r":return"application/x-pkcs7-certreqresp";case"p7s":return"application/pkcs7-signature";case"pbm":return"image/x-portable-bitmap";case"pcast":return"application/x-podcast";case"pct":return"image/pict";case"pcx":return"application/octet-stream";case"pcz":return"application/octet-stream";case"pdf":return"application/pdf";case"pfb":return"application/octet-stream";case"pfm":return"application/octet-stream";case"pfx":return"application/x-pkcs12";case"pgm":return"image/x-portable-graymap";case"pic":return"image/pict";case"pict":return"image/pict";case"pkgdef":return"text/plain";case"pkgundef":return"text/plain";case"pko":return"application/vnd.ms-pki.pko";case"pls":return"audio/scpls";case"pma":return"application/x-perfmon";case"pmc":return"application/x-perfmon";case"pml":return"application/x-perfmon";case"pmr":return"application/x-perfmon";case"pmw":return"application/x-perfmon";case"png":return"image/png";case"pnm":return"image/x-portable-anymap";case"pnt":return"image/x-macpaint";case"pntg":return"image/x-macpaint";case"pnz":return"image/png";case"pot":return"application/vnd.ms-powerpoint";case"potm":return"application/vnd.ms-powerpoint.template.macroenabled.12";case"potx":return"application/vnd.openxmlformats-officedocument.presentationml.template";case"ppa":return"application/vnd.ms-powerpoint";case"ppam":return"application/vnd.ms-powerpoint.addin.macroenabled.12";case"ppm":return"image/x-portable-pixmap";case"pps":return"application/vnd.ms-powerpoint";case"ppsm":return"application/vnd.ms-powerpoint.slideshow.macroenabled.12";case"ppsx":return"application/vnd.openxmlformats-officedocument.presentationml.slideshow";case"ppt":return"application/vnd.ms-powerpoint";case"pptm":return"application/vnd.ms-powerpoint.presentation.macroenabled.12";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"prf":return"application/pics-rules";case"prm":return"application/octet-stream";case"prx":return"application/octet-stream";case"ps":return"application/postscript";case"psc1":return"application/powershell";case"psd":return"application/octet-stream";case"psess":return"application/xml";case"psm":return"application/octet-stream";case"psp":return"application/octet-stream";case"pub":return"application/x-mspublisher";case"pwz":return"application/vnd.ms-powerpoint";case"qht":return"text/x-html-insertion";case"qhtm":return"text/x-html-insertion";case"qt":return"video/quicktime";case"qti":return"image/x-quicktime";case"qtif":return"image/x-quicktime";case"qtl":return"application/x-quicktimeplayer";case"qxd":return"application/octet-stream";case"ra":return"audio/x-pn-realaudio";case"ram":return"audio/x-pn-realaudio";case"rar":return"application/octet-stream";case"ras":return"image/x-cmu-raster";case"rat":return"application/rat-file";case"rc":return"text/plain";case"rc2":return"text/plain";case"rct":return"text/plain";case"rdlc":return"application/xml";case"resx":return"application/xml";case"rf":return"image/vnd.rn-realflash";case"rgb":return"image/x-rgb";case"rgs":return"text/plain";case"rm":return"application/vnd.rn-realmedia";case"rmi":return"audio/mid";case"rmp":return"application/vnd.rn-rn_music_package";case"roff":return"application/x-troff";case"rpm":return"audio/x-pn-realaudio-plugin";case"rqy":return"text/x-ms-rqy";case"rtf":return"application/rtf";case"rtx":return"text/richtext";case"ruleset":return"application/xml";case"s":return"text/plain";case"safariextz":return"application/x-safari-safariextz";case"scd":return"application/x-msschedule";case"sct":return"text/scriptlet";case"sd2":return"audio/x-sd2";case"sdp":return"application/sdp";case"sea":return"application/octet-stream";case"searchconnector-ms":return"application/windows-search-connector+xml";case"setpay":return"application/set-payment-initiation";case"setreg":return"application/set-registration-initiation";case"settings":return"application/xml";case"sgimb":return"application/x-sgimb";case"sgml":return"text/sgml";case"sh":return"application/x-sh";case"shar":return"application/x-shar";case"shtml":return"text/html";case"sit":return"application/x-stuffit";case"sitemap":return"application/xml";case"skin":return"application/xml";case"sldm":return"application/vnd.ms-powerpoint.slide.macroenabled.12";case"sldx":return"application/vnd.openxmlformats-officedocument.presentationml.slide";case"slk":return"application/vnd.ms-excel";case"sln":return"text/plain";case"slupkg-ms":return"application/x-ms-license";case"smd":return"audio/x-smd";case"smi":return"application/octet-stream";case"smx":return"audio/x-smd";case"smz":return"audio/x-smd";case"snd":return"audio/basic";case"snippet":return"application/xml";case"snp":return"application/octet-stream";case"sol":return"text/plain";case"sor":return"text/plain";case"spc":return"application/x-pkcs7-certificates";case"spl":return"application/futuresplash";case"src":return"application/x-wais-source";case"srf":return"text/plain";case"ssisdeploymentmanifest":return"text/xml";case"ssm":return"application/streamingmedia";case"sst":return"application/vnd.ms-pki.certstore";case"stl":return"application/vnd.ms-pki.stl";case"sv4cpio":return"application/x-sv4cpio";case"sv4crc":return"application/x-sv4crc";case"svc":return"application/xml";case"swf":return"application/x-shockwave-flash";case"t":return"application/x-troff";case"tar":return"application/x-tar";case"tcl":return"application/x-tcl";case"testrunconfig":return"application/xml";case"testsettings":return"application/xml";case"tex":return"application/x-tex";case"texi":return"application/x-texinfo";case"texinfo":return"application/x-texinfo";case"tgz":return"application/x-compressed";case"thmx":return"application/vnd.ms-officetheme";case"thn":return"application/octet-stream";case"tif":return"image/tiff";case"tiff":return"image/tiff";case"tlh":return"text/plain";case"tli":return"text/plain";case"toc":return"application/octet-stream";case"tr":return"application/x-troff";case"trm":return"application/x-msterminal";case"trx":return"application/xml";case"ts":return"video/vnd.dlna.mpeg-tts";case"tsv":return"text/tab-separated-values";case"ttf":return"application/octet-stream";case"tts":return"video/vnd.dlna.mpeg-tts";case"txt":return"text/plain";case"u32":return"application/octet-stream";case"uls":return"text/iuls";case"user":return"text/plain";case"ustar":return"application/x-ustar";case"vb":return"text/plain";case"vbdproj":return"text/plain";case"vbk":return"video/mpeg";case"vbproj":return"text/plain";case"vbs":return"text/vbscript";case"vcf":return"text/x-vcard";case"vcproj":return"application/xml";case"vcs":return"text/plain";case"vcxproj":return"application/xml";case"vddproj":return"text/plain";case"vdp":return"text/plain";case"vdproj":return"text/plain";case"vdx":return"application/vnd.ms-visio.viewer";case"vml":return"text/xml";case"vscontent":return"application/xml";case"vsct":return"text/xml";case"vsd":return"application/vnd.visio";case"vsi":return"application/ms-vsi";case"vsix":return"application/vsix";case"vsixlangpack":return"text/xml";case"vsixmanifest":return"text/xml";case"vsmdi":return"application/xml";case"vspscc":return"text/plain";case"vss":return"application/vnd.visio";case"vsscc":return"text/plain";case"vssettings":return"text/xml";case"vssscc":return"text/plain";case"vst":return"application/vnd.visio";case"vstemplate":return"text/xml";case"vsto":return"application/x-ms-vsto";case"vsw":return"application/vnd.visio";case"vsx":return"application/vnd.visio";case"vtx":return"application/vnd.visio";case"wav":return"audio/wav";case"wave":return"audio/wav";case"wax":return"audio/x-ms-wax";case"wbk":return"application/msword";case"wbmp":return"image/vnd.wap.wbmp";case"wcm":return"application/vnd.ms-works";case"wdb":return"application/vnd.ms-works";case"wdp":return"image/vnd.ms-photo";case"webarchive":return"application/x-safari-webarchive";case"webtest":return"application/xml";case"wiq":return"application/xml";case"wiz":return"application/msword";case"wks":return"application/vnd.ms-works";case"wlmp":return"application/wlmoviemaker";case"wlpginstall":return"application/x-wlpg-detect";case"wlpginstall3":return"application/x-wlpg3-detect";case"wm":return"video/x-ms-wm";case"wma":return"audio/x-ms-wma";case"wmd":return"application/x-ms-wmd";case"wmf":return"application/x-msmetafile";case"wml":return"text/vnd.wap.wml";case"wmlc":return"application/vnd.wap.wmlc";case"wmls":return"text/vnd.wap.wmlscript";case"wmlsc":return"application/vnd.wap.wmlscriptc";case"wmp":return"video/x-ms-wmp";case"wmv":return"video/x-ms-wmv";case"wmx":return"video/x-ms-wmx";case"wmz":return"application/x-ms-wmz";case"wpl":return"application/vnd.ms-wpl";case"wps":return"application/vnd.ms-works";case"wri":return"application/x-mswrite";case"wrl":return"x-world/x-vrml";case"wrz":return"x-world/x-vrml";case"wsc":return"text/scriptlet";case"wsdl":return"text/xml";case"wvx":return"video/x-ms-wvx";case"x":return"application/directx";case"xaf":return"x-world/x-vrml";case"xaml":return"application/xaml+xml";case"xap":return"application/x-silverlight-app";case"xbap":return"application/x-ms-xbap";case"xbm":return"image/x-xbitmap";case"xdr":return"text/plain";case"xht":return"application/xhtml+xml";case"xhtml":return"application/xhtml+xml";case"xla":return"application/vnd.ms-excel";case"xlam":return"application/vnd.ms-excel.addin.macroenabled.12";case"xlc":return"application/vnd.ms-excel";case"xld":return"application/vnd.ms-excel";case"xlk":return"application/vnd.ms-excel";case"xll":return"application/vnd.ms-excel";case"xlm":return"application/vnd.ms-excel";case"xls":return"application/vnd.ms-excel";case"xlsb":return"application/vnd.ms-excel.sheet.binary.macroenabled.12";case"xlsm":return"application/vnd.ms-excel.sheet.macroenabled.12";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xlt":return"application/vnd.ms-excel";case"xltm":return"application/vnd.ms-excel.template.macroenabled.12";case"xltx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.template";case"xlw":return"application/vnd.ms-excel";case"xml":return"text/xml";case"xmta":return"application/xml";case"xof":return"x-world/x-vrml";case"xoml":return"text/plain";case"xpm":return"image/x-xpixmap";case"xps":return"application/vnd.ms-xpsdocument";case"xrm-ms":return"text/xml";case"xsc":return"application/xml";case"xsd":return"text/xml";case"xsf":return"text/xml";case"xsl":return"text/xml";case"xslt":return"text/xml";case"xsn":return"application/octet-stream";case"xss":return"application/xml";case"xtp":return"application/octet-stream";case"xwd":return"image/x-xwindowdump";case"z":return"application/x-compress";case"zip":return"application/x-zip-compressed";default:return"application/octet-stream"}}},h(ye,"SystemId","1"),h(ye,"TenantField","t"),h(ye,"Pixel","px"),h(ye,"FeatureField","f"),h(ye,"QuestionMark","?"),h(ye,"Amp","&"),h(ye,"BreakLine","<br />"),h(ye,"ApplicationJson","application/json"),h(ye,"Authorization","Authorization"),h(ye,"SelfVendorId","65"),h(ye,"IdField","Id"),h(ye,"NewLine",`\r
`),h(ye,"Indent","	"),h(ye,"Dot","."),h(ye,"Slash","/"),h(ye,"Hash","#"),h(ye,"Comma",";"),h(ye,"Semicolon",";"),h(ye,"Space"," "),h(ye,"ComponentId","20"),h(ye,"ComponentGroupId","30"),h(ye,"HistoryId","4199"),h(ye,"InsertedBy","InsertedBy"),h(ye,"OwnerUserIds","OwnerUserIds"),h(ye,"OwnerRoleIds","OwnerRoleIds"),h(ye,"ComQuery","/api/feature/go"),h(ye,"PatchSvc","/api/feature/run"),h(ye,"PatchesSvc","user/SavePatches"),h(ye,"UserSvc","/user/svc"),h(ye,"DeleteSvc","/api/feature/delete"),h(ye,"DeactivateSvc","/user/Deactivate"),h(ye,"ExportExcel","/user/excel"),h(ye,"FileSvc","/user/file"),h(ye,"Return","return "),h(ye,"SpecialChar",{"+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26"}),h(ye,"ReverseSpecialChar",{"%2B":"+","%2F":"/","%3F":"?","%23":"#","%26":"&"}),h(ye,"NullFormatHandler",i=>"null"),h(ye,"NotFoundHandler",i=>"{"+i+"}"),h(ye,"EmptyFormat",i=>""),ye);class OutOfViewPort{constructor(){this.Top=!1,this.Left=!1,this.Right=!1,this.Bottom=!1,this.Any=!1,this.All=!1}}class Str{static Format(i,...e){return i.replace(/{(\d+)}/g,(t,n)=>typeof e[n]<"u"?e[n]:t)}static Join(i,...e){e.join(i)}}h(Str,"Empty",""),h(Str,"Comma",","),h(Str,"Type","string");function HasElement(){return this!=null&&this.length>0}Array.prototype.Nothing=function(){return this.length===0};Array.prototype.Flattern=function(o){if(this.Nothing())return this;var i=this.Select(e=>o(e)).Where(e=>e!=null).SelectMany(e=>e);return i.Nothing()?this:this.concat(i.Flattern(o))};Array.prototype.Any=function(o){if(!o)return this.length>0;for(let i=0;i<this.length;i++)if(o(this[i]))return!0};Array.prototype.Where=Array.prototype.filter;Array.prototype.SelectMany=Array.prototype.flatMap;Array.prototype.SelectForEach=Array.prototype.map;Array.prototype.Select=Array.prototype.map;Array.prototype.HasElement=HasElement;Array.prototype.ToArray=function(){return this};Array.prototype.Contains=function(o){return this.indexOf(o)!==-1};Array.prototype.Remove=function(o){var i=this.indexOf(o);i!==-1&&this.splice(i,1)};Array.prototype.ToDictionary=function(o,i){return i==null&&(i=e=>e),this.reduce((e,t)=>(e[o(t)]=i(t),e),{})};Array.prototype.FirstOrDefault=function(o=null){if(!o)return this.length>0?this[0]:null;for(let i=0;i<this.length;i++)if(o(this[i]))return this[i]};Array.prototype.GroupBy=function(o){const i=this.reduce((e,t)=>{const n=o(t),s=JSON.stringify(n);return e[s]||(e[s]=[],e[s].keyObj=n),e[s].push(t),e},{});return Object.keys(i).map(e=>{const t=i[e];return t.Key=i[e].keyObj,t})};Array.prototype.ForEach=Array.prototype.forEach;Array.prototype.DistinctBy=function(o){return this.GroupBy(o).FirstOrDefault()};Array.prototype.Distinct=function(){return this.GroupBy(o=>o).FirstOrDefault()};Array.prototype.ForEachAsync=async function(o){var i=this.map(o);return await Promise.all(i),this};Array.prototype.Clear=function(){for(;this.length;)this.pop()};Array.prototype.AddRange=Array.prototype.push;Array.prototype.Combine=function(o=null,i=","){return o?this.map(o).join(i):this.join(i)};Array.prototype.OrderBy=function(o,i,e=!0,t=!0){return this.slice().sort((n,s)=>{const r=o(n),l=o(s);if(r!=l)return r>l?e?1:-1:e?-1:1;const u=i(n),m=i(s);return u>m?t?1:-1:t?-1:1})};Array.prototype.All=Array.prototype.every;Array.prototype.IndexOf=Array.prototype.findIndex;Array.prototype.LastOrDefault=function(o=null){return o?this.findLast(o):this.length>0?this[this.length-1]:null};Promise.prototype.Done=Promise.prototype.then;Promise.prototype.done=Promise.prototype.then;Date.prototype.addSeconds=function(o){var i=new Date(this.valueOf());return i.setSeconds(i.getSeconds()+o),i};Date.prototype.addMinutes=function(o){var i=new Date(this.valueOf());return i.setMinutes(i.getMinutes()+o),i};Date.prototype.addHours=function(o){var i=new Date(this.valueOf());return i.setHours(i.getHours()+o),i};Date.prototype.addDays=function(o){var i=new Date(this.valueOf());return i.setDate(i.getDate()+o),i};Date.prototype.addMonths=function(o){var i=new Date(this.valueOf());return i.setMonth(i.getMonth()+o),i};Date.prototype.addYears=function(o){var i=new Date(this.valueOf());return i.setFullYear(i.getFullYear()+o),i};HTMLElement.prototype.HasClass=function(o){return this.classList.contains(o)};HTMLElement.prototype.ReplaceClass=function(o,i){this.classList.remove(o),this.classList.add(i)};Number.prototype.leadingDigit=function(){return this<10?"0"+this:""+this};Event.prototype.Top=function(){return this.clientY};Event.prototype.Left=function(){return parseFloat(this.clientX)};Event.prototype.KeyCode=function(){return this.keyCode??-1};Event.prototype.KeyCodeEnum=function(){return this.keyCode??-1};Event.prototype.ShiftKey=function(){return this.shiftKey};Event.prototype.CtrlOrMetaKey=function(){return this.ctrlKey||this.metaKey};Event.prototype.AltKey=function(){return this.altKey};Event.prototype.GetChecked=function(){return this.target&&this.target.type==="checkbox"?this.target.checked:!1};Event.prototype.GetInputText=function(){return this.target&&typeof this.target.value=="string"?this.target.value:""};HTMLElement.prototype.GetFullHeight=function(){if(!this)return 0;const o=window.getComputedStyle(this),i=parseFloat(o.marginTop)||0,e=parseFloat(o.marginBottom)||0;return this.scrollHeight+i+e};HTMLElement.prototype.AddClass=function(o){!this||!o||this.classList.add(o)};HTMLElement.prototype.RemoveClass=function(o){!this||!o||this.classList.remove(o)};HTMLElement.prototype.ToggleClass=function(o){!this||!o||this.classList.toggle(o)};HTMLElement.prototype.Show=function(){this&&(this.style.display="")};HTMLElement.prototype.GetComputedStyle=function(){return window.getComputedStyle(this)};HTMLElement.prototype.Hide=function(){this&&(this.style.display="none")};HTMLElement.prototype.Hidden=function(){if(!this)return!0;const o=this.getBoundingClientRect();return window.getComputedStyle(this).display==="none"||o.bottom===0&&o.top===0&&o.width===0&&o.height===0};HTMLElement.prototype.OutOfViewport=function(){const o=this.getBoundingClientRect(),i=new OutOfViewPort;return i.Top=o.top<0,i.Left=o.left<0,i.Bottom=o.bottom>window.innerHeight,i.Right=o.right>window.innerWidth,i.Any=i.Top||i.Left||i.Bottom||i.Right,i.All=i.Top&&i.Left&&i.Bottom&&i.Right,i};HTMLCollection.prototype.forEach=function(o){Array.from(this).forEach(o)};class ValidationRule{constructor(i,e,t,n,s,r){this.Rule=i,this.Message=e,this.Value1=t,this.Value2=n,this.Condition=s,this.RejectInvalid=r}}h(ValidationRule,"Required","required"),h(ValidationRule,"MinLength","minLength"),h(ValidationRule,"CheckLength","checkLength"),h(ValidationRule,"MaxLength","maxLength"),h(ValidationRule,"GreaterThanOrEqual","min"),h(ValidationRule,"LessThanOrEqual","max"),h(ValidationRule,"GreaterThan","gt"),h(ValidationRule,"LessThan","lt"),h(ValidationRule,"Equal","eq"),h(ValidationRule,"NotEqual","ne"),h(ValidationRule,"RegEx","regEx"),h(ValidationRule,"Unique","unique");class EventType{}h(EventType,"Abort","abort"),h(EventType,"AfterPrint","afterprint"),h(EventType,"AnimationEnd","animationend"),h(EventType,"AnimationIteration","animationiteration"),h(EventType,"AnimationStart","animationstart"),h(EventType,"BeforePrint","beforeprint"),h(EventType,"BeforeUnload","beforeunload"),h(EventType,"Blocked","blocked"),h(EventType,"Blur","blur"),h(EventType,"Cached","cached"),h(EventType,"CanPlay","canplay"),h(EventType,"CanPlayThrough","canplaythrough"),h(EventType,"Change","change"),h(EventType,"Checking","checking"),h(EventType,"Click","click"),h(EventType,"Close","close"),h(EventType,"Complete","complete"),h(EventType,"CompositionEnd","compositionend"),h(EventType,"CompositionStart","compositionstart"),h(EventType,"CompositionUpdate","compositionupdate"),h(EventType,"ContextMenu","contextmenu"),h(EventType,"Copy","copy"),h(EventType,"Cut","cut"),h(EventType,"DblClick","dblclick"),h(EventType,"DeviceLight","devicelight"),h(EventType,"DeviceMotion","devicemotion"),h(EventType,"DeviceOrientation","deviceorientation"),h(EventType,"DeviceProximity","deviceproximity"),h(EventType,"DischargingTimeChange","dischargingtimechange"),h(EventType,"DOMContentLoaded","domcontentloaded"),h(EventType,"Downloading","downloading"),h(EventType,"Drag","drag"),h(EventType,"DragEnd","dragend"),h(EventType,"DragEnter","dragenter"),h(EventType,"DragLeave","dragleave"),h(EventType,"DragOver","dragover"),h(EventType,"DragStart","dragstart"),h(EventType,"Drop","drop"),h(EventType,"DurationChange","durationchange"),h(EventType,"Emptied","emptied"),h(EventType,"Ended","ended"),h(EventType,"Error","error"),h(EventType,"Focus","focus"),h(EventType,"FocusIn","focusin"),h(EventType,"FocusOut","focusout"),h(EventType,"FullScreenChange","fullscreenchange"),h(EventType,"FullScreenError","fullscreenerror"),h(EventType,"GamepadConnected","gamepadconnected"),h(EventType,"GamepadDisconnected","gamepaddisconnected"),h(EventType,"HashChange","hashchange"),h(EventType,"Input","input"),h(EventType,"Invalid","invalid"),h(EventType,"KeyDown","keydown"),h(EventType,"KeyPress","keypress"),h(EventType,"KeyUp","keyup"),h(EventType,"LevelChange","levelchange"),h(EventType,"Load","load"),h(EventType,"LoadedData","loadeddata"),h(EventType,"LoadedMetaData","loadedmetadata"),h(EventType,"LoadEnd","loadend"),h(EventType,"LoadStart","loadstart"),h(EventType,"Message","message"),h(EventType,"MouseDown","mousedown"),h(EventType,"MouseEnter","mouseenter"),h(EventType,"MouseLeave","mouseleave"),h(EventType,"MouseMove","mousemove"),h(EventType,"MouseOut","mouseout"),h(EventType,"MouseOver","mouseover"),h(EventType,"MouseUp","mouseup"),h(EventType,"NoUpdate","noupdate"),h(EventType,"Obsolete","obsolete"),h(EventType,"Offline","offline"),h(EventType,"Online","online"),h(EventType,"Open","open"),h(EventType,"OrientationChange","orientationchange"),h(EventType,"PageHide","pagehide"),h(EventType,"PageShow","pageshow"),h(EventType,"Paste","paste"),h(EventType,"Pause","pause"),h(EventType,"PointerLockChange","pointerlockchange"),h(EventType,"PointerLockError","pointerlockerror"),h(EventType,"Play","play"),h(EventType,"Playing","playing"),h(EventType,"PopState","popstate"),h(EventType,"Progress","progress"),h(EventType,"RateChange","ratechange"),h(EventType,"ReadyStateChange","readystatechange"),h(EventType,"RepeatEvent","repeatevent"),h(EventType,"Reset","reset"),h(EventType,"Resize","resize"),h(EventType,"Scroll","scroll"),h(EventType,"Seeked","seeked"),h(EventType,"Seeking","seeking"),h(EventType,"Select","select"),h(EventType,"Show","show"),h(EventType,"Stalled","stalled"),h(EventType,"Storage","storage"),h(EventType,"Submit","submit"),h(EventType,"Success","success"),h(EventType,"Suspend","suspend"),h(EventType,"SVGAbort","svgabort"),h(EventType,"SVGError","svgerror"),h(EventType,"SVGLoad","svgload"),h(EventType,"SVGResize","svgresize"),h(EventType,"SVGScroll","svgscroll"),h(EventType,"SVGUnload","svgunload"),h(EventType,"SVGZoom","svgzoom"),h(EventType,"Timeout","timeout"),h(EventType,"TimeUpdate","timeupdate"),h(EventType,"TouchCancel","touchcancel"),h(EventType,"TouchEnd","touchend"),h(EventType,"TouchEnter","touchenter"),h(EventType,"TouchLeave","touchleave"),h(EventType,"TouchMove","touchmove"),h(EventType,"TouchStart","touchstart"),h(EventType,"TransitionEnd","transitionend"),h(EventType,"Unload","unload"),h(EventType,"UpdateReady","updateready"),h(EventType,"UpgradeNeeded","upgradeneeded"),h(EventType,"UserProximity","userproximity"),h(EventType,"VersionChange","versionchange"),h(EventType,"VisibilityChange","visibilitychange"),h(EventType,"VolumeChange","volumechange"),h(EventType,"Waiting","waiting"),h(EventType,"Wheel","wheel");class ComponentType{}h(ComponentType,"Datepicker","Datepicker"),h(ComponentType,"ListView","ListView"),h(ComponentType,"GridView","GridView"),h(ComponentType,"ListViewItem","ListViewItem"),h(ComponentType,"EditForm","EditForm"),h(ComponentType,"Checkbox","Checkbox"),h(ComponentType,"Numbox","Numbox"),h(ComponentType,"Number","Numbox"),h(ComponentType,"Textbox","Textbox"),h(ComponentType,"Textarea","Textarea"),h(ComponentType,"SearchEntry","SearchEntry"),h(ComponentType,"Section","Section"),h(ComponentType,"MultipleSearchEntry","MultipleSearchEntry");class Uuid7{static TimeNs(){return 100*new Date().getTime()}static NewGuid(){return"-"+this.Guid()}static Guid(i=null){let t;if(i===null)t=this.TimeNs();else{if(i===0)return"00000000-0000-0000-0000-000000000000";t=i}let n=BigInt(t),s=BigInt(n/16000000000n),r=n%16000000000n,l=BigInt(r*0x10000n/16000000000n),u;i!==null?(n===this._x&&s===this._y&&l===this._z?this._seq<16383&&(this._seq+=1):(this._seq=0,this._x=n,this._y=s,this._z=l),u=this._seq):(n===this._x_asOf&&s===this._y_asOf&&l===this._z_asOf?this._seq_asOf<16383&&(this._seq_asOf+=1):(this._seq_asOf=0,this._x_asOf=n,this._y_asOf=s,this._z_asOf=l),u=this._seq_asOf);let m=new Uint8Array(8);crypto.getRandomValues(m),m[0]=128|u>>8,m[1]=u&255;let y=new Uint8Array(16);return y.set(new Uint32Array([Number(n),Number(s),Number(l)])),y.set(m,8),[this._toHex(y[3],2),this._toHex(y[2],2),this._toHex(y[1],2),this._toHex(y[0],2),"-",this._toHex(y[5],2),this._toHex(y[4],2),"-",this._toHex(y[7],2),this._toHex(y[6],2),"-",this._toHex(y[8],2),this._toHex(y[9],2),"-",this._toHex(y[10],2),this._toHex(y[11],2),this._toHex(y[12],2),this._toHex(y[13],2),this._toHex(y[14],2),this._toHex(y[15],2)].join("")}static _toHex(i,e){return i.toString(16).padStart(e,"0")}static String(i=null){return this.Guid(i)}static Id25(i=null){let e=this.Guid(i);return this.Id25Internal(e)}static Id25Internal(i){const e="0123456789abcdefghijkmnopqrstuvwxyz";let t=new Array(25),n=new Uint8Array(i.length);for(let u=0;u<i.length;u++)n[u]=i.charCodeAt(u);let s=this.ArrToBigInt(n),r,l=BigInt(e.length);for(let u=24;u>=0;u--)[s,r]=[s/l,s%l],t[u]=e[Number(r)];return t.join("")}static ArrToBigInt(i){return i.reduce((e,t)=>e<<8n|BigInt(t),0n)}static CheckTimingPrecision(){let i=new Set,e=0,t=Date.now();for(;Date.now()-t<500&&e<1e3;)i.add(this.TimeNs()),e+=1;let n=i.size,s=1e6*(Date.now()-t)/n,r=1e6*(Date.now()-t)/e;return n===e?`Precision is ${s.toFixed(0)}ns with no repeats in ${e} loops taking ${Date.now()-t}ms`:`Precision is ${s.toFixed(0)}ns rather than ${r.toFixed(0)}ns (${n} unique timestamps from ${e} loops taking ${Date.now()-t}ms)`}}const qe=class qe{static get Culture(){if(qe._culture!==void 0&&qe._culture!==null)return qe._culture.replace('"',"");const i=localStorage.getItem("Culture");return i!==null&&(qe._culture=i.replace('"',"")),i!==null?i.replace('"',""):null}static set Culture(i){qe._culture!==i&&(qe._culture=i!==null?i.replace('"',""):null,localStorage.setItem("Culture",i!==null?i.replace('"',""):null))}static SetCultureAndTranslate(i){qe.Culture=i,qe.Translate()}static Get(i){if(i===null||i==="")return"";if(qe.Culture===null)return i;const e=qe._dictionaries[qe.Culture];if(e==null){const t=localStorage.getItem(qe.Culture);t!==null&&(qe._dictionaries[qe.Culture]=t)}return e!=null&&e[i]!==void 0?e[i]:i}static async Translate(i=!0){return new Promise((t,n)=>{const s=new SqlViewModel;s.DataConn=Client.MetaConn,s.MetaConn=Client.MetaConn,s.ComId="Dictionary",s.Action="GetAll",s.AnnonymousTenant=Client.Tenant,Client.Instance.UserSvc(s,i).Done(l=>{qe.DictionaryLoaded(l[0].map(u=>u.As())),t(!0)})})}static DictionaryLoaded(i){const e=i.filter((t,n,s)=>s.findIndex(r=>r.Key===t.Key)===n).reduce((t,n)=>(t[n.Key]=n.Value,t),{});qe._dictionaries[qe.Culture]=e,localStorage.setItem(qe.Culture,e),qe.Travel(document).forEach(t=>{const n=t[qe.LangProp];n==null||n===""||n.split(",").forEach(s=>{const r=t[qe.LangKey+s],l=t[qe.LangParam+s],u=e[r]!==void 0?e[r]:r;l!=null&&l.length>0?t[s]=Str.Format(u,l):t[s]=u})})}static*Travel(i){yield i;for(const e of i.childNodes)yield*this.Travel(e)}};h(qe,"LangProp","langprop"),h(qe,"LangKey","langkey"),h(qe,"LangParam","Para"),h(qe,"LangCode","langcode"),h(qe,"Active","Active"),h(qe,"_dictionaries",{}),h(qe,"_culture");let LangSelect=qe;class ElementType{static get a(){return"a"}static get abbr(){return"abbr"}static get address(){return"address"}static get area(){return"area"}static get article(){return"article"}static get aside(){return"aside"}static get audio(){return"audio"}static get b(){return"b"}static get base(){return"base"}static get bdi(){return"bdi"}static get bdo(){return"bdo"}static get blockquote(){return"blockquote"}static get button(){return"button"}static get canvas(){return"canvas"}static get caption(){return"caption"}static get cite(){return"cite"}static get code(){return"code"}static get col(){return"col"}static get colgroup(){return"colgroup"}static get datalist(){return"datalist"}static get dd(){return"dd"}static get del(){return"del"}static get details(){return"details"}static get dfn(){return"dfn"}static get div(){return"div"}static get dl(){return"dl"}static get dt(){return"dt"}static get em(){return"em"}static get embed(){return"embed"}static get fieldset(){return"fieldset"}static get figcaption(){return"figcaption"}static get figure(){return"figure"}static get footer(){return"footer"}static get form(){return"form"}static get h1(){return"h1"}static get h2(){return"h2"}static get h3(){return"h3"}static get h4(){return"h4"}static get h5(){return"h5"}static get h6(){return"h6"}static get head(){return"head"}static get header(){return"header"}static get i(){return"i"}static get iframe(){return"iframe"}static get img(){return"img"}static get input(){return"input"}static get ins(){return"ins"}static get kbd(){return"kbd"}static get keygen(){return"keygen"}static get label(){return"label"}static get legend(){return"legend"}static get li(){return"li"}static get link(){return"link"}static get main(){return"main"}static get map(){return"map"}static get mark(){return"mark"}static get menu(){return"menu"}static get menuitem(){return"menuitem"}static get meta(){return"meta"}static get meter(){return"meter"}static get nav(){return"nav"}static get object(){return"object"}static get ol(){return"ol"}static get optgroup(){return"optgroup"}static get option(){return"option"}static get output(){return"output"}static get p(){return"p"}static get param(){return"param"}static get pre(){return"pre"}static get progress(){return"progress"}static get q(){return"q"}static get rp(){return"rp"}static get rt(){return"rt"}static get ruby(){return"ruby"}static get s(){return"s"}static get samp(){return"samp"}static get script(){return"script"}static get section(){return"section"}static get select(){return"select"}static get small(){return"small"}static get source(){return"source"}static get span(){return"span"}static get strong(){return"strong"}static get style(){return"style"}static get sub(){return"sub"}static get summary(){return"summary"}static get sup(){return"sup"}static get table(){return"table"}static get tbody(){return"tbody"}static get td(){return"td"}static get textarea(){return"textarea"}static get tfoot(){return"tfoot"}static get th(){return"th"}static get thead(){return"thead"}static get time(){return"time"}static get title(){return"title"}static get tr(){return"tr"}static get track(){return"track"}static get u(){return"u"}static get ul(){return"ul"}static get var(){return"var"}static get video(){return"video"}}const Direction={top:"top",right:"right",bottom:"bottom",left:"left"};class HTML{constructor(){h(this,"Context")}get Instance(){return this}Take(i){return i==null?this:(typeof i=="string"?this.Context=document.querySelector(i):this.Context=i,this)}GetContext(){return this.Context}Add(i){const e=document.createElement(i);return this.Context.appendChild(e),this.Context=e,this}get Div(){return this.Add("div")}get Iframe(){return this.Add("iframe")}get Link(){return this.Add("link")}get Script(){return this.Add("script")}get Header(){return this.Add("header")}get Section(){return this.Add("section")}get Canvas(){return this.Add("canvas")}get Video(){return this.Add("video")}get Audio(){return this.Add("audio")}get H1(){return this.Add("h1")}get H2(){return this.Add("h2")}get H3(){return this.Add("h3")}get H4(){return this.Add("h4")}get H5(){return this.Add("h5")}get H6(){return this.Add("h6")}get Nav(){return this.Add("nav")}get Input(){return this.Add("input")}get Select(){return this.Add("select")}get Option(){return this.Add("option")}get Span(){return this.Add("span")}get Small(){return this.Add("small")}get I(){return this.Add("i")}get Img(){return this.Add("img")}get Button(){return this.Add("button")}get Table(){return this.Add("table")}get Thead(){return this.Add("thead")}get Th(){return this.Add("th")}get TBody(){return this.Add("tbody")}get TFooter(){return this.Add("tfoot")}get TRow(){return this.Add("tr")}get TData(){return this.Add("td")}get P(){return this.Add("p")}get TextArea(){return this.Add("textarea")}get Br(){var i=document.createElement("br");return this.Context.appendChild(i),this}get Hr(){var i=document.createElement("hr");return this.Context.appendChild(i),this}get Ul(){return this.Add("ul")}get Li(){return this.Add("li")}get Aside(){return this.Add("aside")}get A(){return this.Add("a")}get Form(){return this.Add("form")}get Label(){return this.Add("label")}get End(){return this.Context=this.Context.parentElement,this}Render(){}Event(i,e,...t){return this.Context.addEventListener(i,n=>e(n,...t)),this}Trigger(i){var e=new Event(i);return this.Context.dispatchEvent(e),this}ClassName(i){return this.Context.className!=""?this.Context.className+=" "+i:this.Context.className=i,this}Id(i){return this.Context.id=i,this}Style(i){return i==null?this:(this.Context.style.cssText+=i,this)}Width(i){return this.Context.style.width=i,this}Padding(i,e,t){return t==null&&(t="px"),this.Style(`padding-${i}: ${e}${t}`)}TextAlign(i){return this.Style("text-align: "+i)}Text(i){if(i==null)return this;var e=new Text(i);return this.Context.appendChild(e),this}Button2(i="",e="button info small",t=""){return this.Button.Render(),t!==""&&this.Span.ClassName(t).End.Text(" ").Render(),this.ClassName(e).IText(i)}Title(i){return i?(this.MarkLangProp(this.Context,i,"title"),this.Attr("title",LangSelect.Get(i))):this}Margin(i,e,t="px"){return this.Style(`margin-${i} : ${e}${t}`)}MarginRem(i,e){return this.Style(`margin-${i} : ${e}rem`)}IText(i,...e){if(!i)return this;const t=LangSelect.Get(i),n=e.length>0?Str.Format(t,e):t,s=document.createTextNode(n);return this.MarkLangProp(s,i,"TextContent",e),this.Context.appendChild(s),this}InnerHTML(i){return this.Context.innerHTML=i,this}SmallCheckbox(i=!1){return this.Label.ClassName("checkbox input-small transition-on style2").Input.Attr("type","checkbox").Type("checkbox").End.Span.ClassName("check myCheckbox"),this.Context.previousElementSibling.checked=i,this}Type(i){return this.Context.type=i,this}Attr(i,e){return this.Context.setAttribute(i,e),this}Href(i){return this.Context.setAttribute("href",i),this}Src(i){return this.Context.setAttribute("src",i),this}TabIndex(i){return this.Context.setAttribute("tabindex",i.toString()),this}DataAttr(i,e){return this.Context.setAttribute("data-"+i,e),this}PlaceHolder(i){return!i||i.trim()===""?this:(this.MarkLangProp(this.Context,i,"placeholder"),this.Attr("placeholder",LangSelect.Get(i)))}MarkLangProp(i,e,t,...n){if(!i)return;const s=LangSelect.LangKey+t,r=LangSelect.LangParam+t;i[s]=e,n.length>0&&(i[r]=n);const l=i[LangSelect.LangProp],m=(l?l+","+t:t).split(",").filter((y,C,T)=>T.indexOf(y)===C);i[LangSelect.LangProp]=m.join(",")}Value(i){const e=this.Context;return e.value=i,this}Icon(i){const e=i.includes("mif")||i.includes("fa")||i.includes("fa-");return this.Span.ClassName("icon"),e?this.ClassName(i).Render():this.Style(`background-image: url(${Client.Origin+i});`).ClassName("iconBg").Render(),this}Position(i,e=null,t="px"){return e==null?this.Style(`position: {${i}}`):this.Style(`position: ${i}; ${i}: ${e}${t};`)}Escape(i){const e=this.Context;return e.tabIndex=-1,e.focus(),e.addEventListener("keydown",t=>{if(t.keyCode===27){const n=e.parentElement;t.stopPropagation(),i(t),n.focus()}}),this}IconForSpan(i){if(!i||i.trim().length===0)return this;i=i.trim();const e=this.Context;return this.ClassName("icon"),i.includes("mif")||i.includes("fa")||i.includes("fa-")?e.classList.add(i):(e.classList.add("iconBg"),e.style.backgroundImage=`url(${i})`),this}Floating(i,e){return this.Position(PositionEnum.fixed).Position(Direction.top,i).Position(Direction.left,e)}IHtml(i,...e){if(!i)return this;const t=this.Context,n=LangSelect.Get(i);return this.MarkLangProp(t,i,"innerHTML",e),t.innerHTML=n,this}ColSpan(i){return this.Attr("colspan",i.toString())}RowSpan(i){return this.Attr("rowspan",i.toString())}EndOf(i){typeof i=="object"&&i.toString&&(i=i.toString());let e=this.Context;for(;e!==null&&e.querySelector(i)===null;)e=e.parentElement;if(e===null)throw new Error("Cannot find the element of selector "+i);return this.Context=e,this}Closest(i){return this.Context&&typeof this.Context.closest=="function"&&(this.Context=this.Context.closest(i.toString())),this}Clear(){return this.Context.innerHTML="",this}Checkbox(i){this.Add(ElementType.input);var e=this.Context;return e instanceof HTMLInputElement&&(e.setAttribute("type","checkbox"),e.checked=i??!1),this}Sticky(i=null,e=null){const t=this.Context;return t?(t.previousElementSibling&&t.tagName===t.previousElementSibling.tagName&&(e==="0"?e=`${t.offsetLeft}px`:i==="0"&&(i=`${t.offsetTop}px`)),i!==null&&this.Style(`top: ${i};`),e!==null&&this.Style(`left: ${e};`),this.Style("position: sticky; z-index: 1;")):this}ForEach(i,e){for(let t=0;t<i.length;t++)e(i[t],t);return this}Display(i){const e=this.Context;return e.style.display=i?"":"none",this}Visibility(i){var e=this.Context;return e.style.visibility=i?"":"hidden",this}}const Html=new HTML;var $i,wi,Ai,qi,bi;const Xt=class Xt{constructor(i,e=null){h(this,"DefaultObject",{});h(this,"TabGroup",!1);h(this,"IsListViewItem",!1);h(this,"Parent");h(this,"Children",[]);h(this,"ParentElement");h(this,"Element");h(this,"Entity",null);h(this,"Meta");h(this,"DefaultValue");h(this,"Classes",[]);li(this,$i);h(this,"Disposed",new Action);h(this,"DOMContentLoaded",new Action);h(this,"OnToggle",new Action);li(this,wi);h(this,"UserInput",new Action);h(this,"OldValue");h(this,"ValidationResult",{});h(this,"ValidationRules",{});li(this,Ai);li(this,qi);h(this,"_dirty");h(this,"AlwaysValid");h(this,"IdField","Id");h(this,"AfterSaved",new Action);h(this,"BeforeSaved",new Action);h(this,"PopulateDirty",!0);h(this,"LocalData",[]);h(this,"IsListViewItem",!1);h(this,"IsButton",!1);h(this,"IsRow",!1);h(this,"IsListView",!1);h(this,"IsSearchEntry",!1);h(this,"IsEditForm",!1);h(this,"Popup",!1);h(this,"IsTab",!1);h(this,"_events",{});li(this,bi);var n,s;if(this.Meta=i,this.ParentElement=(n=this.Meta)==null?void 0:n.ParentElement,this.Element=e,this.AlwaysLogHistory=!1,this.Entity={},((s=this.Meta)==null?void 0:s.Validation)!=null){var t=typeof i.Validation===Str.Type?JSON.parse(i.Validation.toString()):i.Validation;t.length>0&&(this.ValidationRules=t.ToDictionary(r=>r.Rule,r=>r))}this.DOMContentLoaded.add(()=>{this.SetRequired(),this.SendQueueAction("Subscribe"),i!=null&&i.Events&&this.DispatchEvent(i.Events,EventType.DOMContentLoaded,this.Entity).Done()})}get ClassName(){return this.Element.className}set ClassName(i){this.Element.className=i}get TabEditor(){if(Gt(this,wi)!=null)return Gt(this,wi);ei(this,wi,this.FindClosest(i=>i.IsTab))}set TabEditor(i){ei(this,wi,i)}get EditForm(){return Gt(this,qi)}set EditForm(i){ei(this,qi,i)}get IsSmallUp(){return document.body.clientWidth>768}get IsMediumUp(){return document.body.clientWidth>992}get IsLargeUp(){return document.body.clientWidth>1200}get Disabled(){return Gt(this,Ai)}set Disabled(i){ei(this,Ai,i),this.SetDisableUI(i),this.Children.Flattern(e=>e.Children).forEach(e=>{ei(e,Ai,i),e.SetDisableUI(i)})}get Dirty(){var i=this._dirty&&!this.AlwaysValid||this.FilterChildren(e=>e._dirty,e=>!e.PopulateDirty||e.AlwaysValid).Any();return i}set Dirty(i){this._dirty=i,i||this.FilterChildren(e=>e._dirty,e=>!e.PopulateDirty||e.AlwaysValid).forEach(e=>e._dirty=!1)}get IsValid(){return Object.keys(this.ValidationResult).length===0}get CacheName(){var t;var i=(t=this.Meta)==null?void 0:t.CacheName;if(!i)return null;var e=Utils$1.IsFunction(i);return e?e.call(null,this):i}get QueueName(){var i;return(i=this.Meta)==null?void 0:i.QueueName}get EntityId(){var i;return(i=this.Entity)==null?void 0:i.Id}set EntityId(i){this.Entity!=null&&(this.Entity.Id=i)}get ComLabel(){var i;return(i=this.Meta)==null?void 0:i.Label}get Name(){var i;return(i=this.Meta)==null?void 0:i.FieldName}set Name(i){this.Meta==null&&(this.Meta=new Component),this.Meta.FieldName=i||null}get Id(){var i;return(i=this.Meta)==null?void 0:i.Id}set Id(i){this.Meta==null&&(this.Meta=new Component),this.Meta.Id=i}get ComponentType(){var i;return(i=this.Meta)==null?void 0:i.ComponentType}set ComponentType(i){this.Meta==null&&(this.Meta=new Component),this.Meta.ComponentType=i}get EmptyRow(){return Gt(this,$i)}set EmptyRow(i){ei(this,$i,i)}get MetaConn(){var i;return(i=this.Meta)==null?void 0:i.MetaConn}get DataConn(){var i;return(i=this.Meta)==null?void 0:i.DataConn}get FieldVal(){return!this.Entity||!this.Name?null:this.Entity[this.Name]}set FieldVal(i){this.Entity==null||this.Name==null||(this.Entity[this.Name]=i)}get FirstChild(){return this.Children.FirstOrDefault()}DispatchEvent(i,e,...t){return i?this.InvokeEvent(i,e,...t):Promise.resolve(!0)}InvokeEvent(i,e,...t){let n;try{n=JSON.parse(i)}catch{return Promise.resolve(!1)}const s=n[e];if(!s)return Promise.resolve(!1);const r=Utils$1.IsFunction(s);if(r)return r.call(null,this,this.EditForm),Promise.resolve(!0);let l=this.EditForm;if(!l)return Promise.resolve(!1);const u=l[s];return u?new Promise((y,C)=>{let T=u.apply(l,t);!T||T.isCompleted==null?y(!1):T.then(()=>y(!0)).catch(F=>C(F))}):Promise.resolve(!1)}DispatchCustomEvent(i,e,...t){if(!i)return Promise.resolve(!0);const n=e.toString();return this.InvokeEvent(i,n,...t)}SetRequired(){var e;const i=this.Element;i!=null&&((e=this.ValidationRules)!=null&&e.hasOwnProperty(ValidationRule.Required)?i.setAttribute(ValidationRule.Required,"true"):i.removeAttribute(ValidationRule.Required))}Validate(i,e,t){var y,C;if(!this.ValidationRules.hasOwnProperty(i))return!0;let n=this.ValidationRules[i];if(n===null||n.Value1===null)return!0;let s=n.Value1.toString();if(s==="")return!0;let r=n.Value1,l=r,[u,m]=this.Entity.GetComplexProp(s);if(u&&(l=(C=(y=this.Parent.FirstOrDefault(T=>T.Name===s))==null?void 0:y.Meta)==null?void 0:C.Label,r=m),t(e,r))delete this.ValidationResult[i];else return this.ValidationResult[i]=Str.Format(n.Message,this.Meta.Label,l),!0;return!1}SetDisableUI(i){const e=this.Element;e!=null&&(i?e.setAttribute("disabled","disabled"):(e.removeAttribute("disabled"),e.setAttribute("enable","true")))}SetDefaultVal(){if(!Utils$1.isNullOrWhiteSpace(this.Meta.DefaultVal)&&!(this.Entity==null||this.EntityId==null)){var i=Utils$1.IsFunction(this.Meta.DefaultVal);i?i.call(this,this):this.Entity[this.Name]==null&&(this.Entity[this.Name]=this.DefaultValue)}}ValidateRequired(i){if(this.Element===null||Object.keys(this.ValidationRules).length===0||this.EmptyRow||this.AlwaysValid)return!0;if(!this.ValidationRules.hasOwnProperty(ValidationRule.Required))return this.Element.removeAttribute(ValidationRule.Required),!0;const e=this.ValidationRules[ValidationRule.Required];return this.Element.setAttribute(ValidationRule.Required,"true"),i==null||i.toString().trim()===""?(this.Element.removeAttribute("readonly"),this.ValidationResult[ValidationRule.Required]=e.Message.replace("{0}",LangSelect.Get(this.Meta.Label)).replace("{1}",this.Entity),!1):(delete this.ValidationResult[ValidationRule.Required],!0)}AddRule(i){this.ValidationRules[i.Rule]=i,i.Rule===ValidationRule.Required&&this.Element.setAttribute(ValidationRule.Required,"true")}RemoveRule(i){delete this.ValidationRules[i],Object.keys(this.ValidationRules).includes(ValidationRule.Required)||this.Element.removeAttribute(ValidationRule.Required)}GetInvalid(){return this.Children.Flattern(i=>i.AlwaysValid?null:i.Children).Where(i=>!i.IsValid)}CascadeField(){if(!this.Meta.CascadeField)return;const i=this.FindClosest(t=>t.IsRow)??this.EditForm,e=this.Meta.CascadeField.split(",").map(t=>t.trim()).filter(t=>t!=="");e.length!==0&&e.forEach(t=>{i.FilterChildren(n=>n.Name===t).forEach(n=>{n instanceof SearchEntry&&n!==null?(n.Value=null,n.Meta.LocalData=null):n.UpdateView()})})}PopulateFields(i=null){if(this.Entity==null||this.Meta.PopulateField==null)return;const e=this.FindClosest(ListViewItem.prototype)??this.FindClosest(ComponentType.EditForm),t=e!==null?e:this.EditForm,n=Utils$1.IsFunction(this.Meta.PopulateField);if(n){try{n.call(null,this,i)}catch(r){console.error(r)}t.UpdateView(!0);return}const s=this.Meta.PopulateField.split(",").map(r=>r.trim()).filter(r=>r!=="");i===null||s.length===0||s.forEach(r=>{t.FilterChildren(l=>l.Name===r).forEach(l=>{const u=Utils$1.GetPropValue(i,r),m=Utils$1.GetPropValue(this.Entity,r),y=this.Entity[r];u===m||y===null||new y!==m||(this.Entity[r]=u,l.UpdateView(!0,!1))})})}GetValueTextAct(){return this.Element.textContent}AddIdToPatch(i){const e=i.findIndex(t=>t.Field===Utils$1.IdField);e!==-1&&i.splice(e,1),this.EntityId===null?i.push({Field:Utils$1.IdField,Value:Uuid7.Id25()}):i.push({Field:Utils$1.IdField,Value:this.EntityId,OldVal:this.EntityId})}addEventListener(i,e){if(e===null)throw new Error("Handler cannot be null");const t=this._events[i]||null;t==null?this._events[i]=[e]:t.push(e)}removeEventListener(i,e){if(e===null)throw new Error("Handler cannot be null");(this._events[i]||null)!==null&&delete this._events[i]}FindComponentByName(i,e){return this.FirstOrDefault(t=>t.Name===i&&(e==null||t.Classes.includes(e)))}FindClosest(i=null){let e=this;for(;e!=null;){if(i==null||i(e))return e;e=e.Parent}return null}get Show(){return Gt(this,bi)}set Show(i){this.Toggle(i)}Toggle(i){this.Element&&(ei(this,bi,i),Gt(this,bi)?(this.Element.style.display="",this.Meta&&this.Meta.ShowLabel&&!this.Parent&&this.Meta.FieldName&&(this.Element.parentElement.style.display="",this.Element.parentElement.previousElementSibling.style.display=""),this.OnToggle.invoke(Gt(this,bi))):(this.Element.style.display="none",this.Meta&&this.Meta.ShowLabel&&!this.Parent&&this.Meta.FieldName&&(this.Element.parentElement.style.display="none",this.Element.parentElement.previousElementSibling.style.display="none")))}ToggleShow(i){var e=Utils$1.IsFunction(i);if(e){var t=e.call(null,this);this.Show=t??!1}}ToggleDisabled(i){if(i instanceof Boolean){this.Disabled=i;return}var e=Utils$1.IsFunction(i);if(e){let t=e(null,this)||!1;this.Disabled=t}}ListViewItemTab(i){}UpdateView(i=!1,e=null,...t){if(this.PrepareUpdateView(i,e),!(!this.Children||this.Children.length===0))if(t.length>0){const n=this.FilterChildren(l=>l instanceof Section&&t.includes(l.Name)).flatMap(l=>l.FilterChildren(u=>!(u instanceof Section))),s=this.FilterChildren(l=>t.includes(l.Name)&&!(l instanceof Section));[...new Set([...n,...s].filter(l=>!(l instanceof Section)))].forEach(l=>{l.PrepareUpdateView(i,e),l.UpdateView(i,e,...t)})}else this.FilterChildren(s=>s.ComponentType!="Section").forEach(s=>{s.PrepareUpdateView(i,e),s.UpdateView(i,e,...t)})}PrepareUpdateView(i,e){var t,n;i&&(this.EmptyRow=!1),this.ToggleShow((t=this.Meta)==null?void 0:t.ShowExp),this.ToggleDisabled((n=this.Meta)==null?void 0:n.DisabledExp),e!==void 0&&(this._setDirty=e)}Nothing(){return!this.Children||this.Children.length===0}DisposeChildren(){if(this.Nothing())return;let i=this.Flatten(e=>e.Children).filter(e=>e.Element!==null&&e.Parent!==null&&e.Nothing());for(;i.length>0&&i==1&&i[0]!=this;)i.forEach(e=>{e!==null&&(e.Dispose(),e.Parent&&e.Parent.Children&&(e.Parent.Children=e.Parent.Children.filter(t=>t!==e)))}),i=this.Flatten(e=>e.Children).filter(e=>e.Element!==null&&e.Parent!==null&&e.Nothing())}Flatten(i){const e=[],t=[this];for(;t.length>0;){const n=t.pop();e.push(n);const s=i(n);s&&t.push(...s)}return e}Dispose(){var i;this.SendQueueAction("Unsubscribe"),this.DisposeChildren(),this.RemoveDOM(),this.Children=null,this.DOMContentLoaded=null,this.OnToggle=null,this.Parent!=null&&this.Parent.Children!=null&&this.Parent.Children.ToArray().HasElement()&&this.Parent.Children.ToArray().Contains(this)&&this.Parent.Children.ToArray().Remove(this),(i=this.Disposed)==null||i.Invoke()}RemoveDOM(){this.Element!=null&&(this.Element.remove(),this.Element=null)}SendQueueAction(i){var n,s;var e=this.QueueName;if(!e)return;const t={QueueName:e,Action:i};(s=(n=this.EditForm)==null?void 0:n.NotificationClient)==null||s.Send(JSON.stringify(t)),i=="Subscribe"?window.addEventListener(e,this.QueueHandler):window.removeEventListener(e,this.QueueHandler)}GetValueText(){return this.Element===null?"":this.Element instanceof HTMLInputElement?this.Element.value:this.Element instanceof HTMLTextAreaElement?this.Element.value:""}ValidateAsync(){return Promise.resolve(!0)}static IsEmpty(i){return i.length===0}FilterChildren(i,e,t=null){return this.FilterChildrenTyped(i,e,t)}FilterChildrenTyped(i=null,e=null,t=new Set){if(t=t??new Set,Xt.IsEmpty(this.Children))return[];let n=[];for(const s of this.Children){let r=s instanceof Xt?s:null;r===null&&Xt.IsEmpty(s.Children)||e&&e(r)||(r!==null&&(!i||i(r))&&!t.has(r)&&(t.add(r),n.push(r)),n=n.concat(s.FilterChildrenTyped(i,e,t)))}return n}FindActiveComponent(i){const e=t=>!t.hidden()&&i(t);return this.Children.Where(e).Flattern(t=>e(t)?t.Children:null)}FirstOrDefault(i){return this.Children.Flattern(e=>e.Children).FirstOrDefault(i)}AddChild(i,e=null,t=null,n=null){if(i.IsSingleton){i.Render();return}i.ParentElement||(i.ComponentType==null&&this.TabEditor?i.Popup?i.ParentElement=Element||this.TabEditor.TabContainer:i.ParentElement=this.TabEditor.TabContainer:i.ParentElement=Html.Context),(!i.Entity||this.DeepEqual(i.Entity,this.DefaultObject))&&(i.Entity=this.Entity??{}),!i.EditForm&&!i.Popup&&(i.EditForm=this.EditForm),e===null||e>=this.Children.length||e<0?this.Children.push(i):this.Children.splice(e,1,i),i.Parent||(i.Parent=this),Html.Take(i.ParentElement),i.Render(),i.ToggleShow(t||(i.Meta?i.Meta.ShowExp:"")),i.ToggleDisabled(n||(i.Meta?i.Meta.DisabledExp:""))}DeepEqual(i,e){if(i===e)return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;let t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(let s of t)if(!n.includes(s)||!deepEqual(i[s],e[s]))return!1;return!0}RemoveChild(i){const e=this.Children.indexOf(i);e>-1&&this.Children.splice(e,1)}Focus(){var i;(i=this.Element)==null||i.focus()}SetDisabled(i,...e){e==null||e.length==0?this.Disabled=i:this.FilterChildren(t=>e.includes(t.Name)).forEach(t=>t.Disabled=i)}};$i=new WeakMap,wi=new WeakMap,Ai=new WeakMap,qi=new WeakMap,bi=new WeakMap,h(Xt,"SmallScreen",768),h(Xt,"ExSmallScreen",567),h(Xt,"MediumScreen",992),h(Xt,"LargeScreen",1200),h(Xt,"ExLargeScreen",1452),h(Xt,"TabContainer",document.getElementById("tab-content"));let EditableComponent=Xt;const editableComponent=Object.freeze(Object.defineProperty({__proto__:null,EditableComponent},Symbol.toStringTag,{value:"Module"}));class Textbox extends EditableComponent{constructor(i,e){super(i,e),this.DefaultValue="",e.tagName=="INPUT"?this.Input=e:e.tagName=="TEXTAREA"&&(this.TextArea=e),this._value=null,this.MultipleLine=!1,this.Password=!1,this._text="",this._oldText=""}get Text(){return this._text}set Text(i){this._text=i,this.Input!=null&&(this.Input.value=this._text),this.TextArea!=null&&(this.TextArea.value=this._text)}get Value(){return this._value}set Value(i){var t;this._value=i,this._value!==null&&typeof this._value===Str.Type&&this.EditForm&&this.EditForm.Meta&&!this.EditForm.Meta.IgnoreEncode&&(this.Entity[this.Name]=Utils$1.EncodeSpecialChar(Utils$1.DecodeSpecialChar(this._value))),this.Entity&&(this.Entity[this.Name]=this._value);let e=this.EditForm&&this.EditForm.Meta&&this.EditForm.Meta.IgnoreEncode?this._value:Utils$1.DecodeSpecialChar(this._value);this.Meta.FormatData&&(e=Utils$1.FormatEntity(this.Meta.FormatData,this.Entity[this.Name])),this.Meta.FormatEntity&&(e=Utils$1.FormatEntity2(this.Meta.FormatEntity,null,this.Entity,Utils$1.EmptyFormat,Utils$1.EmptyFormat)),(t=Utils$1.IsFunction(this.Meta.Renderer))==null||t.call(this,this),this.Text=e,this.PopulateFields()}Render(){var n,s,r;this.SetDefaultVal();var i=this.Entity&&this.Entity[this.Name]||null,e=i!=null&&typeof i===Str.Type&&this.EditForm!=null&&this.EditForm.Meta!=null&&!this.EditForm.Meta.IgnoreEncode;if(e){const l=Utils$1.DecodeSpecialChar(i),u=Utils$1.EncodeSpecialChar(l);this.Entity[this.Name]=u}var t=i;this.Meta.FormatData&&(t=Utils$1.FormatEntity(this.Meta.FormatData,i)),this.Meta.FormatEntity&&(t=Utils$1.FormatEntity(this.Meta.FormatEntity,this.Entity)),this._text=this.EditForm!=null&&this.EditForm.Meta!=null&&this.EditForm.Meta.IgnoreEncode?t:Utils$1.DecodeSpecialChar(t)??"",this.OldValue=this._text,this.MultipleLine||this.TextArea!=null?(this.TextArea==null?(Html.Take(this.ParentElement).TextArea.Value(this._text).PlaceHolder(this.Meta.PlainText),this.Element=this.TextArea=Html.Context):this.TextArea&&(Html.Take(this.Element),this.Element=this.TextArea,this.TextArea.value=this._text),this.Meta.Row>0&&Html.Instance.Attr("rows",this.Meta.Row??1),this.TextArea.addEventListener("input",l=>this.PopulateUIChange(EventType.Input)),this.TextArea.addEventListener("change",l=>this.PopulateUIChange(EventType.Change))):(this.Input==null?((n=Html.Take(this.ParentElement).Input.Value(this._text))==null||n.PlaceHolder(this.Meta.PlainText),this.Element=this.Input=Html.Context):(Html.Take(this.Element),this.Element=this.Input,this.Input.value=this._text),this.Input.addEventListener("input",l=>this.PopulateUIChange(EventType.Input)),this.Input.addEventListener("change",l=>this.PopulateUIChange(EventType.Change))),(s=Utils$1.IsFunction(this.Meta.Renderer))==null||s.call(this,this),this.Password&&Html.Instance.Style("text-security: disc;-webkit-text-security: disc;-moz-text-security: disc;"),this.Meta.ShowLabel||Html.Instance.PlaceHolder(this.Meta.PlainText),this.Element&&this.Element.closest("td")&&this.Element.closest("td").addEventListener("keydown",this.ListViewItemTab.bind(this)),(r=this.DOMContentLoaded)==null||r.Invoke()}PopulateUIChange(i,e=!1){var t,n;this.Disabled||(this._oldText=this._text,this._text=this.Input?this.Input.value:this.TextArea.value,this._text=this.Password?this._text:e?(t=this._text)==null?void 0:t.trim():this._text,this.Meta.UpperCase&&this._text!=null&&(this.Text=this._text.toLocaleUpperCase()),this._value=this.EditForm!=null&&this.EditForm.Meta!=null&&this.EditForm.Meta.IgnoreEncode?this._text:Utils$1.EncodeSpecialChar(this._text),this.Entity[this.Name]=this._value,this.Dirty=!0,(n=this.UserInput)==null||n.Invoke({NewData:this._text,OldData:this._oldText,EvType:i}),this.PopulateFields(),this.DispatchEvent(this.Meta.Events,i,this.Entity))}UpdateView(i=!1,e=null,...t){var n;this.Value=this.Entity&&Utils$1.GetPropValue(this.Entity,this.Name),this.Dirty||((n=this.DOMContentLoaded)==null||n.Invoke(),this.OldValue=this._text)}ValidateAsync(){return this.ValidationRules.Nothing()?Promise.resolve(!0):new Promise((e,t)=>{this.ValidationResult.Clear(),this.Validate(ValidationRule.MinLength,this._text,(n,s)=>this._text!=null&&this._text.length>=s),this.Validate(ValidationRule.CheckLength,this._text,(n,s)=>this._text==null||this._text==""||this._text.length==s),this.Validate(ValidationRule.MaxLength,this._text,(n,s)=>this._text==null||this._text.length<=s),this.Validate(ValidationRule.RegEx,this._text,this.ValidateRegEx),this.ValidateRequired(this.Text),this.ValidateUnique().then(()=>{e(this.IsValid)})})}ValidateRegEx(i,e){if(i===null)return!0;var t=new RegExp(e),n=t.test(i),s=this.ValidationRules[ValidationRule.RegEx];if(s&&!n&&s.RejectInvalid){var r=this.Input.selectionEnd;return this.Text=this._oldText,this._value=this._oldText,this.Input.selectionStart=r,this.Input.selectionEnd=r,t.test(this._oldText)}return n}ValidateUnique(){if(!this.ValidationRules.hasOwnProperty(ValidationRule.Unique))return Promise.resolve(!0);var i=this.ValidationRules[ValidationRule.Unique];if(i===null||this._text.trim()==="")return Promise.resolve(!0);const e=Utils$1.IsFunction(this.Meta.PreQuery);this.Meta.RefName?this.EditForm.Meta.EntityName:this.Meta.RefName;const t={ComId:this.Meta.Id,Params:e?JSON.stringify(e.call(null,this)):null,MetaConn:this.MetaConn,DataConn:this.DataConn};var n=new Promise((s,r)=>{Client.Instance.ComQuery(t).then(l=>{var u=l.length>0&&l[0].length>0;return u}).then(l=>{l?this.ValidationResult[ValidationRule.Unique]=`${i.Message} ${LangSelect.Get(this.Meta.Label)} ${this._text}`:delete this.ValidationResult[ValidationRule.Unique],s(!0)}).catch(l=>{console.error("Query error:",l),r(l)})});return n}SetDisableUI(i){this.Input!=null&&(this.Input.readOnly=i),this.TextArea!=null&&(this.TextArea.readOnly=i)}}class Numbox extends EditableComponent{constructor(i,e=null){super(i,e),e&&e.tagName=="INPUT"&&(this._input=e),this._value=null,this._isString=!1,this._decimalSeparator=".",this.SetSelection=!0,this.DefaultValue=0}get Value(){return this._value}set Value(i){var l,u,m,y;const e=this._value;if(this._value=i,i===null)this._input.value="",this._value=null;else{var[t,n]=Utils$1.TryParseDecimal((l=this._value)==null?void 0:l.toString());if(t){this._value=n;const C=(((u=this._input.value)==null?void 0:u.match(/,/g))||[]).length,T=this._input.selectionEnd;this._input.value.split("").filter(I=>I===".").length>1;var s=this._value.toFixed(this.Meta.Precision??0).replace(/\B(?=(\d{3})+(?!\d))/g,",");this._input.value=s;const F=(((m=this._input.value)==null?void 0:m.match(/,/g))||[]).length-C;this.SetSelection&&(this._input.selectionStart=T+F,this._input.selectionEnd=T+F)}else{var[t,n]=Utils$1.TryParseDecimal(e==null?void 0:e.toString());t||(this.parsedVal=new Decimal(0)),this._value=new Decimal(n),this._input.value=n.toFixed(this.Meta.Precision||0)}}e==null||this._value==null?this.Dirty=e!=this._value:this.Dirty=!((y=this._value)!=null&&y.eq(e)),this.Entity[this.Name]=this._value,this.PopulateFields();var r=Utils$1.IsFunction(this.Meta.Renderer);r&&r.call(this,this)}SetValue(){var s;const i=this._value;if(this.EmptyRow=!1,!this._input.value){this.Value=null;return}this._input.value=this._input.value.trim(),this._input.value.slice(-1)===this._decimalSeparator&&(this._input.value=this._input.value.substring(0,this._input.value.length-1));const e=this._input.value.replace(/,/g,""),[t,n]=Utils$1.TryParseDecimal(e);if(!t){this.Value=this._value;return}this._value=new Decimal(n),this.Value=this._value,(s=this.UserInput)==null||s.invoke({NewData:this._value,OldData:i,EvType:EventType.Input}),this.DispatchEvent(this.Meta.Events,EventType.Input,this.Entity,this._value,i).done()}Render(){var e;if(this.SetDefaultVal(),this.Entity!=null&&this.Entity[this.Name]!=null&&(this._value=this.GetDecimalValue()),!this._input||this._input===null){Html.Take(this.ParentElement).Input.Render();const t=Html.Context;t instanceof HTMLInputElement&&(this.Element=this._input=t)}else this.Element=this._input;this._input.type="tel",this._input.setAttribute("autocorrect","off"),this._input.setAttribute("spellcheck","false"),this._input.addEventListener("input",this.SetValue.bind(this)),this._input.addEventListener("change",this.ChangeSetValue.bind(this)),this._input.autocomplete="off",this.Value=this._value;let i=Utils$1.IsFunction(this.Meta.Renderer);i&&window.setTimeout(()=>i.call(this,this,this._input),100),(e=this.DOMContentLoaded)==null||e.invoke()}IsNullable(){const i=this.Entity.GetComplexProp(this.Name);return i==null}ChangeSetValue(){var s,r;const i=this._value;if(this.EmptyRow=!1,!this._input.value){this.Value=null,(s=this.UserInput)==null||s.Invoke({NewData:null,OldData:i,EvType:EventType.Change});return}this._input.value=this._input.value.trim(),this._input.value.slice(-1)==="."&&(this._input.value=this._input.value.substring(0,this._input.value.length-1));const e=this._input.value.replace(",",""),[t,n]=Utils$1.TryParseDecimal(e);if(!t){this.Value=this._value;return}this.Value=new Decimal(n),this.Dirty=!0,(r=this.UserInput)==null||r.Invoke({NewData:n,OldData:i,EvType:EventType.Change}),this.PopulateFields(),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity,n,i).done()}GetDecimalValue(){if(this.Entity==null)return null;const i=this.Entity[this.Meta.FieldName];if(i==null||this._isString&&i.toString().IsNullOrWhiteSpace())return null;try{return new Decimal(i)}catch{return null}}UpdateView(i=!1,e=null,...t){var n;this.Value=this.GetDecimalValue(),this.Dirty||((n=this.DOMContentLoaded)==null||n.invoke(),this.OldValue=this._input.value)}async ValidateAsync(){return this.ValidationRules.Nothing()?!0:(this.ValidationResult.Clear(),this.ValidateRequired(this._value),this.Validate(ValidationRule.GreaterThan,this._value,(i,e)=>e==null||i!=null&&i>e),this.Validate(ValidationRule.LessThan,this._value,(i,e)=>e==null||i!=null&&i<e),this.Validate(ValidationRule.GreaterThanOrEqual,this._value,(i,e)=>e==null||i!=null&&i>=e),this.Validate(ValidationRule.LessThanOrEqual,this._value,(i,e)=>e==null||i!=null&&i<=e),this.Validate(ValidationRule.Equal,this._value,(i,e)=>i===e),this.Validate(ValidationRule.NotEqual,this._value,(i,e)=>i!==e),this.IsValid)}SetDisableUI(i){this._input.readOnly=i}}const Ci=class Ci{constructor(){}static Init(){if(this._instance!==null)return;this._instance=new Ci;let i=document.getElementById("spinner");if(i)this._span=i,this._backdrop=i.previousElementSibling;else{let e=document.createElement("div");e.className="backdrop",e.style.background="transparent !important",document.body.appendChild(e);let t=document.createElement("span");t.className="spinner",e.appendChild(t),this._span=t,this._backdrop=e}this._span.style.display="none",this._backdrop.style.display="none"}static AppendTo(i,e=!0,t=!0,n=7e3){this._span&&(this._span.parentElement===i&&this._span.style.display===""||(i?i.appendChild(this._span):document.body.appendChild(this._span),this._span.style.display="",e&&(this._backdrop.style.display=""),t&&(window.clearTimeout(this._hiddenAwaiter),this._hiddenAwaiter=window.setTimeout(()=>this.Hide(),n))))}static Hide(){this._span&&(this._span.style.display="none",this._backdrop.style.display="none")}};h(Ci,"_instance",null),h(Ci,"_span",null),h(Ci,"_backdrop",null),h(Ci,"_hiddenAwaiter",null);let Spinner=Ci;const scriptRel="modulepreload",assetsURL=function(o){return"/vnitart1/"+o},seen={},__vitePreload=function(i,e,t){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),r=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.all(e.map(l=>{if(l=assetsURL(l),l in seen)return;seen[l]=!0;const u=l.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":scriptRel,u||(y.as="script",y.crossOrigin=""),y.href=l,r&&y.setAttribute("nonce",r),document.head.appendChild(y),u)return new Promise((C,T)=>{y.addEventListener("load",C),y.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>i()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})},CustomEventType={BeforeCopied:"BeforeCopied",UpdateHeader:"UpdateHeader",AfterWebsocket:"AfterWebsocket",AfterCopied:"AfterCopied",BeforeDeleted:"BeforeDeleted",AfterDeleted:"AfterDeleted",Deactivated:"Deactivated",BeforePasted:"BeforePasted",AfterPasted:"AfterPasted",BeforeCreated:"BeforeCreated",AfterCreated:"AfterCreated",BeforeEmptyRowCreated:"BeforeEmptyRowCreated",AfterEmptyRowCreated:"AfterEmptyRowCreated",BeforeCreatedList:"BeforeCreatedList",AfterCreatedList:"AfterCreatedList",Selected:"Selected",RowFocusIn:"RowFocusIn",RowFocusOut:"RowFocusOut",RowMouseEnter:"RowMouseEnter",RowMouseLeave:"RowMouseLeave",OpenRef:"OpenRef",BeforePatchUpdate:"BeforePatchUpdate",ValidatePatchUpdate:"ValidatePatchUpdate",BeforePatchCreate:"BeforePatchCreate",AfterPatchUpdate:"AfterPatchUpdate"};class Message{}h(Message,"NotDirty","Data was not changed!"),h(Message,"ReasonOfChange","Auto change");class StringBuilder{constructor(i=""){this._buffer=[i]}Append(i){return this._buffer.push(i),this}ToString(){return this._buffer.join("")}}class FeaturePolicy{constructor(){h(this,"Id","");h(this,"FeatureId","");h(this,"RoleId","");h(this,"CanRead",!1);h(this,"CanWrite",!1);h(this,"CanDelete",!1);h(this,"CanDeleteAll",!1);h(this,"Active",!1);h(this,"InsertedDate",new Date);h(this,"InsertedBy","");h(this,"UpdatedDate",null);h(this,"UpdatedBy","");h(this,"CanDeactivate",!1);h(this,"CanDeactivateAll",!1);h(this,"LockDeleteAfterCreated","");h(this,"LockUpdateAfterCreated","");h(this,"EntityId","");h(this,"RecordId","");h(this,"UserId","");h(this,"CanShare",!1);h(this,"CanShareAll",!1);h(this,"Desc","");h(this,"CanWriteAll",!1);h(this,"EntityName","");h(this,"CanWriteMeta",!1);h(this,"CanWriteMetaAll",!1)}}class ObservableArgs{constructor(){h(this,"EvType");h(this,"Com");h(this,"NewData");h(this,"OldData");h(this,"NewMatch");h(this,"OldMatch");h(this,"NewEntity");h(this,"OldEntity");h(this,"FieldName")}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var dayjs_min={exports:{}};(function(o,i){(function(e,t){o.exports=t()})(commonjsGlobal,function(){var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",l="minute",u="hour",m="day",y="week",C="month",T="quarter",F="year",I="date",G="Invalid Date",Y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,le=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,xe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ue){var J=["th","st","nd","rd"],j=ue%100;return"["+ue+(J[(j-20)%10]||J[j]||J[0])+"]"}},se=function(ue,J,j){var oe=String(ue);return!oe||oe.length>=J?ue:""+Array(J+1-oe.length).join(j)+ue},we={s:se,z:function(ue){var J=-ue.utcOffset(),j=Math.abs(J),oe=Math.floor(j/60),Z=j%60;return(J<=0?"+":"-")+se(oe,2,"0")+":"+se(Z,2,"0")},m:function ue(J,j){if(J.date()<j.date())return-ue(j,J);var oe=12*(j.year()-J.year())+(j.month()-J.month()),Z=J.clone().add(oe,C),ne=j-Z<0,te=J.clone().add(oe+(ne?-1:1),C);return+(-(oe+(j-Z)/(ne?Z-te:te-Z))||0)},a:function(ue){return ue<0?Math.ceil(ue)||0:Math.floor(ue)},p:function(ue){return{M:C,y:F,w:y,d:m,D:I,h:u,m:l,s:r,ms:s,Q:T}[ue]||String(ue||"").toLowerCase().replace(/s$/,"")},u:function(ue){return ue===void 0}},g="en",Ue={};Ue[g]=xe;var Qe="$isDayjsObject",ke=function(ue){return ue instanceof de||!(!ue||!ue[Qe])},me=function ue(J,j,oe){var Z;if(!J)return g;if(typeof J=="string"){var ne=J.toLowerCase();Ue[ne]&&(Z=ne),j&&(Ue[ne]=j,Z=ne);var te=J.split("-");if(!Z&&te.length>1)return ue(te[0])}else{var V=J.name;Ue[V]=J,Z=V}return!oe&&Z&&(g=Z),Z||!oe&&g},Be=function(ue,J){if(ke(ue))return ue.clone();var j=typeof J=="object"?J:{};return j.date=ue,j.args=arguments,new de(j)},ce=we;ce.l=me,ce.i=ke,ce.w=function(ue,J){return Be(ue,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var de=function(){function ue(j){this.$L=me(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[Qe]=!0}var J=ue.prototype;return J.parse=function(j){this.$d=function(oe){var Z=oe.date,ne=oe.utc;if(Z===null)return new Date(NaN);if(ce.u(Z))return new Date;if(Z instanceof Date)return new Date(Z);if(typeof Z=="string"&&!/Z$/i.test(Z)){var te=Z.match(Y);if(te){var V=te[2]-1||0,q=(te[7]||"0").substring(0,3);return ne?new Date(Date.UTC(te[1],V,te[3]||1,te[4]||0,te[5]||0,te[6]||0,q)):new Date(te[1],V,te[3]||1,te[4]||0,te[5]||0,te[6]||0,q)}}return new Date(Z)}(j),this.init()},J.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},J.$utils=function(){return ce},J.isValid=function(){return this.$d.toString()!==G},J.isSame=function(j,oe){var Z=Be(j);return this.startOf(oe)<=Z&&Z<=this.endOf(oe)},J.isAfter=function(j,oe){return Be(j)<this.startOf(oe)},J.isBefore=function(j,oe){return this.endOf(oe)<Be(j)},J.$g=function(j,oe,Z){return ce.u(j)?this[oe]:this.set(Z,j)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(j,oe){var Z=this,ne=!!ce.u(oe)||oe,te=ce.p(j),V=function(He,Pe){var Ee=ce.w(Z.$u?Date.UTC(Z.$y,Pe,He):new Date(Z.$y,Pe,He),Z);return ne?Ee:Ee.endOf(m)},q=function(He,Pe){return ce.w(Z.toDate()[He].apply(Z.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(Pe)),Z)},M=this.$W,z=this.$M,ae=this.$D,be="set"+(this.$u?"UTC":"");switch(te){case F:return ne?V(1,0):V(31,11);case C:return ne?V(1,z):V(0,z+1);case y:var We=this.$locale().weekStart||0,Ze=(M<We?M+7:M)-We;return V(ne?ae-Ze:ae+(6-Ze),z);case m:case I:return q(be+"Hours",0);case u:return q(be+"Minutes",1);case l:return q(be+"Seconds",2);case r:return q(be+"Milliseconds",3);default:return this.clone()}},J.endOf=function(j){return this.startOf(j,!1)},J.$set=function(j,oe){var Z,ne=ce.p(j),te="set"+(this.$u?"UTC":""),V=(Z={},Z[m]=te+"Date",Z[I]=te+"Date",Z[C]=te+"Month",Z[F]=te+"FullYear",Z[u]=te+"Hours",Z[l]=te+"Minutes",Z[r]=te+"Seconds",Z[s]=te+"Milliseconds",Z)[ne],q=ne===m?this.$D+(oe-this.$W):oe;if(ne===C||ne===F){var M=this.clone().set(I,1);M.$d[V](q),M.init(),this.$d=M.set(I,Math.min(this.$D,M.daysInMonth())).$d}else V&&this.$d[V](q);return this.init(),this},J.set=function(j,oe){return this.clone().$set(j,oe)},J.get=function(j){return this[ce.p(j)]()},J.add=function(j,oe){var Z,ne=this;j=Number(j);var te=ce.p(oe),V=function(z){var ae=Be(ne);return ce.w(ae.date(ae.date()+Math.round(z*j)),ne)};if(te===C)return this.set(C,this.$M+j);if(te===F)return this.set(F,this.$y+j);if(te===m)return V(1);if(te===y)return V(7);var q=(Z={},Z[l]=t,Z[u]=n,Z[r]=e,Z)[te]||1,M=this.$d.getTime()+j*q;return ce.w(M,this)},J.subtract=function(j,oe){return this.add(-1*j,oe)},J.format=function(j){var oe=this,Z=this.$locale();if(!this.isValid())return Z.invalidDate||G;var ne=j||"YYYY-MM-DDTHH:mm:ssZ",te=ce.z(this),V=this.$H,q=this.$m,M=this.$M,z=Z.weekdays,ae=Z.months,be=Z.meridiem,We=function(Pe,Ee,ct,ge){return Pe&&(Pe[Ee]||Pe(oe,ne))||ct[Ee].slice(0,ge)},Ze=function(Pe){return ce.s(V%12||12,Pe,"0")},He=be||function(Pe,Ee,ct){var ge=Pe<12?"AM":"PM";return ct?ge.toLowerCase():ge};return ne.replace(le,function(Pe,Ee){return Ee||function(ct){switch(ct){case"YY":return String(oe.$y).slice(-2);case"YYYY":return ce.s(oe.$y,4,"0");case"M":return M+1;case"MM":return ce.s(M+1,2,"0");case"MMM":return We(Z.monthsShort,M,ae,3);case"MMMM":return We(ae,M);case"D":return oe.$D;case"DD":return ce.s(oe.$D,2,"0");case"d":return String(oe.$W);case"dd":return We(Z.weekdaysMin,oe.$W,z,2);case"ddd":return We(Z.weekdaysShort,oe.$W,z,3);case"dddd":return z[oe.$W];case"H":return String(V);case"HH":return ce.s(V,2,"0");case"h":return Ze(1);case"hh":return Ze(2);case"a":return He(V,q,!0);case"A":return He(V,q,!1);case"m":return String(q);case"mm":return ce.s(q,2,"0");case"s":return String(oe.$s);case"ss":return ce.s(oe.$s,2,"0");case"SSS":return ce.s(oe.$ms,3,"0");case"Z":return te}return null}(Pe)||te.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(j,oe,Z){var ne,te=this,V=ce.p(oe),q=Be(j),M=(q.utcOffset()-this.utcOffset())*t,z=this-q,ae=function(){return ce.m(te,q)};switch(V){case F:ne=ae()/12;break;case C:ne=ae();break;case T:ne=ae()/3;break;case y:ne=(z-M)/6048e5;break;case m:ne=(z-M)/864e5;break;case u:ne=z/n;break;case l:ne=z/t;break;case r:ne=z/e;break;default:ne=z}return Z?ne:ce.a(ne)},J.daysInMonth=function(){return this.endOf(C).$D},J.$locale=function(){return Ue[this.$L]},J.locale=function(j,oe){if(!j)return this.$L;var Z=this.clone(),ne=me(j,oe,!0);return ne&&(Z.$L=ne),Z},J.clone=function(){return ce.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},ue}(),Le=de.prototype;return Be.prototype=Le,[["$ms",s],["$s",r],["$m",l],["$H",u],["$W",m],["$M",C],["$y",F],["$D",I]].forEach(function(ue){Le[ue[1]]=function(J){return this.$g(J,ue[0],ue[1])}}),Be.extend=function(ue,J){return ue.$i||(ue(J,de,Be),ue.$i=!0),Be},Be.locale=me,Be.isDayjs=ke,Be.unix=function(ue){return Be(1e3*ue)},Be.en=Ue[g],Be.Ls=Ue,Be.p={},Be})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var vi={exports:{}};(function(o,i){(function(e,t){o.exports=t(dayjs_minExports)})(commonjsGlobal,function(e){function t(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var n=t(e),s={name:"vi",weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(r){return r},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"}};return n.default.locale(s,null,!0),s})})(vi);dayjs.locale("vi");class Datepicker extends EditableComponent{constructor(e,t=null){var n;super(e,t);h(this,"HHmmFormat","00");h(this,"formats",["DD/MM/YYYY - HH:mm","DD/MM/YYYY - HH:m","DD/MM/YYYY - H:mm","DD/MM/YYYY - HH:","DD/MM/YYYY - H:","DD/MM/YYYY - H:m","DD/MM/YYYY - HH","DD/MM/YYYY - H","DD/MM/YYYY","DDMMYYYY","D/M/YYYY","DMYYYY","DD/MM/YY","DDMMYY","D/M","DM","DD/MM","DDMM"]);h(this,"calendar",null);h(this,"renderAwaiter",null);h(this,"closeAwaiter",null);h(this,"value");h(this,"_closeAwaiter");this.DefaultValue=dayjs(),this.Meta=e,this.InitFormat=(n=this.Meta.FormatData)!=null&&n.includes("{0:")?this.Meta.FormatData.replace("{0:","").replace("}",""):this.Meta.Precision===7?"dd/MM/yyyy - HH:mm":"DD/MM/YYYY",this.currentFormat=this.InitFormat,t!=null&&(t.firstElementChild instanceof HTMLInputElement?this.Input=t.firstElementChild:this.Input=Html.Take(t).Input.Context),this.value=null,this.nullable=!1,this.simpleNoEvent=!1,this.show=!1,this.someday=new Date,this.hour=null,this.minute=null}get Value(){return this.value}set Value(e){if(this.value!==e){if(this.value=e,this.value){const n=this.Input.selectionEnd;var t=Utils$1.IsFunction(this.Meta.FormatEntity);t?this.Input.value=t.call(this,e,this):this.Input.value=dayjs(this.value).format(this.InitFormat),this.Input.selectionStart=n,this.Input.selectionEnd=n}else this.nullable?this.Input.value=null:(this.value=new Date,this.Input.value=dayjs(this.value).format(this.InitFormat));this.Entity[this.Name]=this.value,this.Dirty=!0}}Render(){var t;this.SetDefaultVal(),this.Entity[this.Name]=this.value;let e="";this.Entity[this.Name]!==null&&(e=dayjs(this.Entity[this.Name]).format(this.InitFormat)),Html.Take(this.ParentElement),this.Input?(Html.Take(this.Input),this.Element=this.Input):(Html.Div.ClassName("datetime-picker").TabIndex(-1),Html.Input.Render(),this.Element=Html.Context,this.Input=this.Element),Html.Event("keydown",n=>{this.Disabled||!n||n.keyCode===13&&this.ParseDate()}).Value(e).Event("focus",()=>{if(this.simpleNoEvent){this.simpleNoEvent=!1;return}this.Meta.FocusSearch||this.RenderCalendar()}).Event("change",()=>this.ParseDate()).PlaceHolder(this.Meta.PlainText).Attr("autocomplete","off").Attr("name",this.Name),this.Input.addEventListener("keydown",n=>this.KeyDownDateTime(n)),(t=this.Input.parentElement)==null||t.addEventListener("focusout",()=>this.CloseCalendar()),Html.End.Div.ClassName("btn-group").Button.TabIndex(-1).Span.ClassName("fal fa-calendar").Event("click",()=>{this.Input.Disabled||(this.show?this.CloseCalendar():this.RenderCalendar())})}KeyDownDateTime(e){if(e.KeyCodeEnum()===KeyCodeEnum.Enter&&this.value===null){if(this.Disabled)return;this.show?this.CloseCalendar():this.RenderCalendar()}}IsNullable(e){return this.Entity===null||Utils$1.IsNullable(this.Name,this.Entity)}ParseDate(){if(Utils$1.isNullOrWhiteSpace(this.Input.value)){this.Input.value="",this.TriggerUserChange(null);return}const{parsed:e,datetime:t,format:n}=this.TryParseDateTime(this.Input.value);if(e)this.Value=t,this.TriggerUserChange(t);else{if(this.EditForm.Meta.CustomNextCell)return;this.Input.value="",this.TriggerUserChange(null)}}CloseCalendar(){this._closeAwaiter=setTimeout(()=>{this.show=!1,this.calendar&&(this.calendar.style.display="none"),this.Input.value=this.value?dayjs(this.value).format(this.InitFormat):"",this.hour=null,this.minute=null},250)}RenderCalendar(e=null){this.Disabled||(clearTimeout(this._closeAwaiter),this._closeAwaiter=setTimeout(()=>{this.RenderCalendarTask(e||this.value||new Date)},100))}RenderCalendarTask(e){if(this.Disabled)return;let t=e||this.value||new Date;this.show=!0,clearTimeout(this._closeAwaiter),this.calendar?(this.calendar.innerHTML="",this.calendar.style.display=""):(Html.Take(document.body).Div.ClassName("datepicker-content open open-up").TabIndex(-1).Trigger("focus"),this.calendar=Html.Context),Html.Take(this.calendar).Div.ClassName("calendar-container datepicker").Div.ClassName("v2-calendar relative").Div.ClassName("calendar-header day-select").Div.ClassName("relative flex justify-space align-center").Div.ClassName("icon-calendar-header left-icon fal fa-arrow-left").Event("click",()=>{t.setDate(1),t.setMonth(t.getMonth()-1),this.RenderCalendarTask(t)}).End.Div.ClassName("calender-current-date").Span.IText(t.getMonth()+1).End.End.Div.ClassName("icon-calendar-header right-icon fal fa-arrow-right").Event("click",()=>{t.setDate(1),t.setMonth(t.getMonth()+1),this.RenderCalendarTask(t)}).End.Div.ClassName("icon-calendar-header left-icon fal fa-arrow-left").Event("click",()=>{t.setDate(1),t.setFullYear(t.getFullYear()-1),this.RenderCalendarTask(t)}).End.Div.ClassName("calender-current-date").Span.IText(t.getFullYear()).End.End.Div.ClassName("icon-calendar-header right-icon fal fa-arrow-right").Event("click",()=>{t.setDate(1),t.setFullYear(t.getFullYear()+1),this.RenderCalendarTask(t)}).End.End.End.Div.ClassName("separate-line-header").End.Div.ClassName("calendar-body").Table.ClassName("calendar-table").Thead.TRow.Th.Text("T2").End.Th.Text("T3").End.Th.Text("T4").End.Th.Text("T5").End.Th.Text("T6").End.Th.Text("T7").End.Th.Text("CN").End.End.End.TBody.ClassName("date-in-month").Render();const n=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0);for(var l=new Date(s);l.getDay()!==1;)l.setDate(l.getDate()-1);for(var u=new Date(r);u.getDay()!==0;)u.setDate(u.getDate()+1);(u-l)/(1e3*60*60*24*7)>=6&&u.setDate(u.getDate()-7);var m=new Date(l);const y=this.SetSelectedDay.bind(this);for(;m<=u;)for(var C=0;C<7;C++)m.getDay()===1&&Html.Instance.TRow.Render(),m<s||m>r?Html.Instance.TData.ClassName("ms-date").Text(""):Html.Instance.TData.ClassName("date-in-table ms-date").Text(m.getDate().toString()).Event("click",y,m),m.getDate()===n.getDate()&&m.getMonth()===n.getMonth()&&m.getFullYear()===t.getFullYear()&&Html.Instance.ClassName("date-in-table ms-date ms-date-current"),this.value&&m.getDate()===this.value.getDate()&&m.getMonth()===this.value.getMonth()&&m.getFullYear()===this.value.getFullYear()&&Html.Instance.ClassName("date-in-table ms-date ms-date-day-seleted"),Html.Instance.End.Render(),m.getDay()===0&&Html.Instance.End.Render(),m=m.addDays(1);Html.Instance.End.End.Div.ClassName("SeparateLine").End.End.Render(),this.Meta.Precision===7&&Html.Instance.Div.ClassName("Time").Div.ClassName("ms-label mr-12-px ms-label-bold").IText("Time").End.Div.ClassName("change-hour").Div.ClassName("ms-number ms-number-container input-time").Span.Div.ClassName("ms-number-group").Div.ClassName("ms-number-input").Input.Value(t.getHours().toString().padStart(2,"0")).Event("click",()=>clearTimeout(_closeAwaiter)).Event("change",this.ChangeHour).End.End.End.End.End.Div.ClassName("ms-label mr-6-px ml-6-px").Text(":").End.Div.ClassName("change-minute").Div.ClassName("ms-number ms-number-container input-time").Span.Div.ClassName("ms-number-group").Div.ClassName("ms-number-input").Input.Value(t.getMinutes().toString().padStart(2,"0")).Event("click",()=>clearTimeout(_closeAwaiter)).Event("change",this.ChangeMinute).End.End.End.End.End.End.Render(),Html.Instance.Div.ClassName("calendar-footer").Button.Event("click",()=>{this.TriggerUserChange(n)}).ClassName("pick-today-button").IText("Today").End.End.End.End.Render(),ComponentExt.AlterPosition(this.calendar,this.Element);const T=this.Element.closest(".scroll-content");T&&T.addEventListener("scroll",ComponentExt.AlterPosition(this.calendar,this.Element))}TryParseDateTime(e){let t=dayjs(),n=!1,s=null;for(let r=0;r<this.formats.length;r++)if(t=dayjs(e,this.formats[r],!0),t.isValid()){n=!0,s=this.formats[r];break}return{parsed:n,dateTime:t,format:s}}TriggerUserChange(e){var s;if(this.Disabled)return;let t=this.value;this.Value=e;var n={NewData:this.value,OldData:t,EvType:"change"};(s=this.UserInput)==null||s.invoke(n),this.PopulateFields(),this.CascadeField(),this.simpleNoEvent=!0,this.Input.focus()}SetSelectedDay(e,t){this.CloseCalendar(),this.TriggerUserChange(t)}IncreaseTime(e,t=!1){let n=this.value||this.someday;t?(n.setMinutes(n.getMinutes()+e),this.minute.value=n.getMinutes().toString().padStart(2,"0")):(n.setHours(n.getHours()+e),this.hour.value=n.getHours().toString().padStart(2,"0")),this.TriggerUserChange(n)}ChangeHour(e){let t=parseInt(this.hour.value);if(isNaN(t)||t<0||t>23)return;let n=this.value||this.someday;n.setHours(t),this.TriggerUserChange(n)}ChangeMinute(e){let t=parseInt(this.minute.value);if(isNaN(t)||t<0||t>59)return;let n=this.value||this.someday;n.setMinutes(t),this.TriggerUserChange(n)}ChangeHourMinuteHotKey(e){e.KeyCode()===KeyCodeEnum.UpArrow?this.IncreaseTime(1,e.target===this.minute):e.KeyCode()===KeyCodeEnum.DownArrow&&this.IncreaseTime(-1,e.target===this.minute)}ValidateAsync(){if(!this.ValidationRules||this.ValidationRules.Nothing())return Promise.resolve(!0);let e=!0;return["gt","lt","min","max","eq","ne"].forEach(n=>{e=e&&this.Validate(n,this.value)}),Promise.resolve(e)}Validate(e,t){switch(e){case"gt":return t>new Date(this.Meta.MinDate);case"lt":return t<new Date(this.Meta.MaxDate);default:return!0}}RemoveDOM(){var e;(e=this.Element)!=null&&e.parentElement&&(this.Element.parentElement.innerHTML=Str.Empty,this.Element=null)}SetDisableUI(e){var t;return this.Input&&(this.Input.readonly=e),(t=this.FieldVal)==null?void 0:t.toString()}}class Checkbox extends EditableComponent{constructor(e,t=null){super(e);h(this,"_value",null);h(this,"_input",null);if(!e)throw new Error("ui is required");this.Meta=e,this.ParentElement=t,t&&t.tagName.toLowerCase()==="input"?(this.Element=t,this._input=t):this.ParentElement=t,this.DefaultValue=!1}Render(){var e,t;this.ParentElement!=null&&this.Element==null&&(Html.Take(this.ParentElement).TabIndex(-1).SmallCheckbox(this._value??!1),this._input=Html.Context.previousElementSibling),this.Element=this._input.parentElement??this._input,Html.Take(this._input).Event("input",this.UserChange.bind(this)),this.SetDisableUI(!this.Meta.Editable),this.SetDefaultVal(),this.Value=Utils$1.GetPropValue(this.Entity,this.Name),this.Entity[this.Name]=this._value,(e=this.Element.closest("td"))==null||e.addEventListener("keydown",this.ListViewItemTab.bind(this)),(t=this.DOMContentLoaded)==null||t.invoke()}GetValueText(){return this._value===null?"N/A":this._value?"Check":"Not check"}UserChange(e){if(this.Disabled){e.preventDefault();return}const t=this._input.checked;this.DataChanged(t)}DataChanged(e){var s;const t=this._value;this._value=e,this.Entity&&(this.Entity[this.Name]=e),this.Dirty=!0;var n=new ObservableArgs({NewData:this._value,OldData:t,EvType:EventType.Change}),n={NewData:this._value,OldData:t,EvType:EventType.Change};(s=this.UserInput)==null||s.invoke(n),this.PopulateFields(),this.CascadeField(),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity).Done()}get Value(){return this._value}set Value(e){this._value=e,this._input.checked=e}UpdateView(e=!1,t=null,...n){var r;const s=(r=this.Entity)==null?void 0:r.GetComplexProp(this.Name);this.Value=s,this.Dirty||(this.OldValue=this._input.value)}SetDisableUI(e){e?this.Element.setAttribute("disabled","disabled"):this.Element.removeAttribute("disabled"),this._input.disabled=e}}class ConfirmDialog extends EditableComponent{constructor(){super(null);h(this,"DivElement");h(this,"DisposeAfterYes",!0);h(this,"YesConfirmed",new Action);h(this,"NoConfirmed",new Action);this._yesBtn=null,this.PElement=null,this.OpenEditForm=null,this.Textbox=null,this.Number=null,this.Datepicker=null,this.Precision=null,this.SearchEntry=null,this.Canceled=null,this.IgnoreNoButton=!1,this.MultipleLine=!0,this.YesText="Đồng ý",this.NoText="Không",this.CancelText="Đóng",this.Content="Bạn có chắc chắn muốn xóa dữ liệu?",this.NeedAnswer=!1,this.ComType="Textbox",this.IgnoreCancelButton=!0,this.PopulateDirty=!1,this.Title="Xác nhận"}Render(){if(Html.Take(this.PElement||document.body),Html.Div.ClassName("backdrop").Style("align-items: center;").Escape(()=>this.Dispose()),this.PElement&&Html.Instance.Style("position: fixed !important;"),this.Element=Html.Context,this.ParentElement=this.Element.parentElement,Html.Instance.Div.ClassName("popup-content confirm-dialog").Style("top: auto;").Div.ClassName("popup-title").IHtml(this.Title).Div.ClassName("icon-box").Span.ClassName("fa fa-times").Event("click",()=>this.CloseDispose()).EndOf(".popup-title").Div.ClassName("popup-body").P.IHtml(this.Content).End.Div.ClassName("box-shadow panel group").Event("keydown",t=>this.HotKeyHandler(t)).MarginRem("top",1).TextAlign("center"),this.DivElement=Html.Context,this.NeedAnswer){if(this.ComType==="Textbox"){const t=new Component;t.PlainText="Nhập câu trả lời",t.ShowLabel=!1,t.FieldName=Message.ReasonOfChange,t.Row=2,t.MultipleLine=this.MultipleLine;const n=new Textbox(t);this.AddChild(n),Html.Instance.End.Render()}if(this.ComType==="Number"){const t={PlainText:"Nhập số",FieldName:"ReasonOfChange",Visibility:!0,ShowLabel:!1},n=new Numbox(t);this.AddChild(n)}if(this.ComType==="Datepicker"){const t={plainText:"Chọn ngày",showLabel:!1,fieldName:"ReasonOfChange",row:2,focusSearch:!0,visibility:!0,precision:this.Precision},n=new Datepicker(t);this.AddChild(n)}}Html.Instance.Button2(this.YesText,"btn btn-success mt-2","fal fa-check").Event("click",()=>{this.ValidateAsync().then(t=>{var n;if(t){try{this.YesConfirmed&&((n=this.YesConfirmed)==null||n.invoke())}catch(s){console.error(s.stack)}this.DisposeAfterYes&&this.Dispose()}})}).End.Render(),this._yesBtn=Html.Context,this.IgnoreNoButton||Html.Instance.Button2(this.NoText,"btn btn-danger  mt-2","fal fa-window-close").MarginRem("left",1).Event("click",()=>{var t;try{(t=this.NoConfirmed)==null||t.invoke()}catch(n){console.error(n.stack)}this.CloseDispose()}).End.Render(),this.IgnoreCancelButton||Html.Instance.Button2(this.CancelText,"btn btn-success mt-2","fal fa-times").MarginRem("left",1).Event("click",()=>this.Dispose()).Render()}Dispose(){super.Dispose()}CloseDispose(){this.Canceled&&this.Canceled(),super.Dispose()}static RenderConfirm(e,t,n=null){const s=new ConfirmDialog;return s.Content=e,s.Render(),s.YesConfirmed=t,s.NoConfirmed=n,s}HotKeyHandler(e){e.KeyCode()===KeyCodeEnum.Enter&&this._yesBtn.click()}}const vt=class vt extends EditableComponent{constructor(i,e){super(i,e),this._path="",this._input=document.createElement("input"),this._preview=null,this._disabledDelete=!1,this._gallerys=document.createElement("div"),this.DataSource=this.Meta.Template||"image/*",this.DefaultValue="",this.FileUploaded=new Action,this.zoomLevel=0,this.flagZoomIn=1,this.zoomMaxLevel=3}get Path(){return this._path}set Path(i){if(this.Element.parentElement.querySelectorAll(".gallery").forEach(n=>n.remove()),this._path=i,this.Entity&&(this.Entity[this.Name]=this._path),!this._path||this._path.trim()==="")return;const t=this._path.split(vt.PathSeparator);!t||t.length===0||t.forEach(n=>{this.RenderFileThumb(n)})}get ImageSources(){return this.Path?this.Path.split(vt.PathSeparator):null}Render(){var i,e,t;this._path=(i=Utils$1.GetPropValue(this.Entity,this.Name))==null?void 0:i.toString(),this._path&&this._path.split(vt.PathSeparator),this.RenderUploadForm(),this.Path=this._path,(e=this.DOMContentLoaded)==null||e.invoke(),(t=this.Element.closest("td"))==null||t.addEventListener("keydown",this.ListViewItemTab)}RenderFileThumb(i){const e=document.createElement("div");e.className="gallery",this._gallerys.appendChild(e);const t=this.RemoveGuid(i);if(Utils$1.IsImage(i)){const s=document.createElement("img");s.className="image",Object.assign(s.style,this.Meta.ChildStyle),s.src=i.includes("http")?i:Client.Origin+Utils$1.DecodeSpecialChar(i),e.appendChild(s),s.addEventListener("click",()=>this.Preview(i))}else{const s=document.createElement("a");s.className=t.includes("pdf")?"fal fa-file-pdf":"fal fa-file",s.title=Utils$1.DecodeSpecialChar(t),Object.assign(s.style,this.Meta.ChildStyle),s.href=i.includes("http")?i:Client.Origin+Utils$1.DecodeSpecialChar(i),e.appendChild(s)}if(!this.Disabled){const s=document.createElement("i");s.className="fas fa-trash-alt",s.addEventListener("click",()=>this.RemoveFile(i)),e.appendChild(s)}return this._gallerys}RemoveGuid(i){let e=i;if(i.length>vt.GuidLength){const t=Utils$1.GetFileNameWithoutExtension(i);e=t.substring(0,t.length-vt.GuidLength)+"."+i.split(".").pop()}return e}SetCanDeleteImage(i){this._disabledDelete=!i,i&&this.UpdateView()}Preview(i){if(!Utils$1.IsImage(i)){console.log("Not an image: Downloading file."),window.location.href=i;return}let e=document.createElement("img");e.src=i,e.style.cssText="width:100%;",this._preview&&this._preview.remove(),this._preview=e,document.body.appendChild(e),e.addEventListener("click",()=>{e.remove(),this._preview=null}),zoom()}ZoomImage(i){this.flagZoomIn<this.zoomMaxLevel?(this.zoomLevel===0||this.zoomLevel<this.zoomMaxLevel)&&(i.style.cursor="zoom-in",i.height+=450,i.width+=400,this.zoomLevel++,this.flagZoomIn++):this.flagZoomIn===this.zoomMaxLevel&&(this.zoomLevel===1&&(this.flagZoomIn=1),i.style.cursor="zoom-out",i.height-=450,i.width-=400,this.zoomLevel--)}MoveAround(i,e){const t=i.keyCode;if(![37,39].includes(t))return;const n=i.target.querySelector("img");n&&(t===37?this.MoveLeft(e,n):t===39&&this.MoveRight(e,n))}MoveLeft(i,e){const t=this.Path.split("    ");let n=t.indexOf(i);return n===0?n=t.length-1:n--,e.Src=(this.Path.includes("http")?"":Client.Origin)+t[n],t[n]}MoveRight(i,e){const t=this.Path.split("    ");let n=t.indexOf(i);return n===t.length-1?n=0:n++,e.Src=(this.Path.includes("http")?"":Client.Origin)+t[n],t[n]}OpenFileDialog(i){this.Disabled||this.OpenNativeFileDialog(i)}RenderUploadForm(){var i=this.Meta.Precision==0;this.Meta.VirtualScroll?(Html.Take(this.ParentElement).Div.ClassName("ms-upload").Div.ClassName("ms-title-upload").Div.ClassName("attach-text").Div.ClassName("mi mi-18 mi-attach m-r-8 cursor-default").End.Div.IText(this.Meta.Label??"Attach").End.End.Div.ClassName("max-size-upload").IText("Maximum size 5MB").End.End.Span.Div.ClassName("ms-img-upload").Div.ClassName("ms-input-upload").Input.Type("file").Attr("title","").Attr("accept",""),i&&Html.Instance.Attr("multiple","multiple"),this.Element=this._input=Html.Context,this.Element.addEventListener("drop",e=>this.UploadDropImages(e)),this.Element.addEventListener("change",e=>this.UploadSelectedImages(e)),this.CanWrite||(this._input.readOnly=!0),Html.Instance.End.Div.ClassName("w-full-100").Div.ClassName("w-full-100").End.Div.ClassName("img-upload"),this._gallerys=Html.Context,Html.Instance.End.End.Span.ClassName("text-input").IText("Drag/drop files here or click here").EndOf(".ms-upload").End.Render()):(Html.Take(this.ParentElement).ClassName("choose-files-file").Input.Type("file").Attr("name","files").ClassName("d-none").Attr("accept",DataSourceFilter),Element=_input=Html.Context,this.Element.addEventListener("change",e=>this.UploadSelectedImages(e)),i&&Html.Instance.Attr("multiple","multiple"),Html.Take(this.ParentElement).Div.ClassName("file-upload"),this.CanWrite&&Html.Instance.I.ClassName("fal fa-cloud-upload").Event(EventType.Click,this.OpenFileDialog).End.Render(),Html.Instance.Div.ClassName("gallerys-file").Render(),this._gallerys=Html.Context)}RemoveFile(i,e){if(this.Disabled||(i.StopPropagation(),!e||e.trim()===""))return;const n=`Bạn chắc chắn muốn xóa ${Utils$1.GetFileNameWithoutExtension(this.RemoveGuid(Utils$1.DecodeSpecialChar(e)))+Utils$1.GetExtension(this.RemoveGuid(Utils$1.DecodeSpecialChar(e)))}`;ConfirmDialog.RenderConfirm(n,()=>{Client.Instance.PostAsync(e,Client.FileFTP+"/DeleteFile").then(s=>{var m;const r=this._path,l=this._path.replace(e,"").replace(vt.PathSeparator+vt.PathSeparator,"").split(vt.PathSeparator).filter(y=>y!=null).Distinct();this.Path=l.join(vt.PathSeparator),this.dirty=!0;const u={NewData:this._path,OldData:r,FieldName:this.Name,EvType:EventType.Change};(m=this.UserInput)==null||m.Invoke(u),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity)})})}UploadSelectedImages(i){if(i.preventDefault(),this.EditForm.IsLock){console.log("Edit form is locked.");return}const e=i.target.files;if(!e.length){console.log("No files selected.");return}const t=this._path;this.UploadAllFiles(e).then(()=>{var s;this.Dirty=!0,this._input.value="";const n={NewData:this._path,OldData:t,FieldName:this.Name,EvType:EventType.Change};(s=this.UserInput)==null||s.Invoke(n),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity)}).catch(n=>{console.error("Failed to upload files:",n)})}UpdateView(i=!1,e=null,...t){var n;this.Path=(n=Utils$1.GetPropValue(this.Entity,this.Name))==null?void 0:n.toString(),super.UpdateView(i,e,...t)}async UploadFile(i){if(this.Meta.IsRealtime||!i.type.match("image.*"))try{return await Client.Instance.PostFilesAsync(i,Utils$1.FileSvc)}catch(e){throw console.error("Error posting file:",e),e}else return new Promise((e,t)=>{const n=new FileReader;n.onload=async s=>{try{const r=await Utils$1.UploadBase64Image(s.target.result,i.name);e(r),await Client.Instance.PatchAsync({Table:"FileUpload",Changes:[{Field:"Id",Value:Uuid7.Id25()},{Field:"EntityName",Value:this.Meta.RefName},{Field:"RecordId",Value:this.EntityId},{Field:"SectionId",Value:this.Meta.ComponentGroupId},{Field:"FieldName",Value:this.Name},{Field:"FileName",Value:i.name},{Field:"FilePath",Value:r}]})}catch(r){console.error("Error in file upload process:",r),t(r)}},n.readAsDataURL(i)})}async UploadAllFiles(i){var n;Spinner.AppendTo(this.EditForm.Element);const e=Array.from(i).map(this.UploadFile);let t=await Promise.all(e);if(t.length){if(this.Meta.Precision===0){const s=this.Path+vt.PathSeparator+t.join(vt.PathSeparator);t=[...new Set(s.trim().split(vt.PathSeparator))]}this._path,this.Path=t.join(vt.PathSeparator),Spinner.Hide(),(n=this.FileUploaded)==null||n.Invoke()}}OpenNativeFileDialog(i){i==null||i.preventDefault(),this._input.click()}GetValueText(){return!this.ImageSources||this.ImageSources.length===0?null:this.ImageSources.map(i=>{const e=this.RemoveGuid(i);return`<a target="_blank" href="${i}">${e}</a>`}).join(",")}};h(vt,"PathSeparator","    "),h(vt,"PNGUrlPrefix","data:image/png;base64,"),h(vt,"JpegUrlPrefix","data:image/jpeg;base64,"),h(vt,"GuidLength",36);let Image=vt;class Button extends EditableComponent{constructor(e,t=null){super(e);h(this,"IsButton",!0);this.Meta=e,this.ButtonEle=t,this._textEle=null}Render(){var e,t;if(this.ButtonEle)this.Element=this.ButtonEle;else{if(!this.ParentElement)throw new Error("ParentElement is required");Html.Take(this.ParentElement).Button.Render(),this.Element=this.ButtonEle=Html.Context}Html.Take(this.Element).ClassName(this.Meta.ClassName).Event("click",()=>this.DispatchClick()).Style(this.Meta.Style),this.Meta.Icon&&Html.Icon(this.Meta.Icon).End.Text(" ").Render(),Html.Span.ClassName("caption").IText(this.Meta.Label||""),this._textEle=Html.Context,(e=this.Element.closest("td"))==null||e.addEventListener("keydown",n=>this.ListViewItemTab(n)),(t=this.DOMContentLoaded)==null||t.invoke()}async DispatchClick(){if(!(this.Disabled||this.Element.hidden)){this.Disabled=!0;try{Spinner.AppendTo(this.Element),this.DispatchEvent(this.Meta.Events,"click",this.Entity,this).then(()=>{this.Disabled=!1,Spinner.Hide()})}finally{window.setTimeout(()=>{this.Disabled=!1},2e3)}}}GetValueText(){var e;return!this.Entity||!this.Name?this._textEle.textContent:(e=this.FieldVal)==null?void 0:e.toString()}}class ObservableList{constructor(i=[]){this._data=i,this.Listeners=[]}Clear(){for(;this._data.length;)this._data.pop()}Subscribe(i){this.Listeners.push(i)}Unsubscribe(i){this.Listeners=this.Listeners.filter(e=>e!==i)}Notify(i,e,t){const n={ListData:this._data,Item:e,Index:t,Action:i};this.Listeners.forEach(s=>s(n))}get Data(){return this._data}set Data(i){this._data=i,this.Notify("Render")}Add(i,e=this._data.length){this._data.splice(e,0,i),this.Notify("Add",i,e)}Remove(i){const e=this._data.indexOf(i);e>-1&&(this._data.splice(e,1),this.Notify("Remove",i,e))}RemoveAt(i){if(i>=0&&i<this._data.length){const e=this._data[i];this._data.splice(i,1),this.Notify("Remove",e,i)}}Update(i,e){e>=0&&e<this._data.length&&(this._data[e]=i,this.Notify("Update",i,e))}}let SearchEntry$1=class extends EditableComponent{constructor(i,e=null){super(i);h(this,"IsSearchEntry",!0);h(this,"IsMultiple",!1);h(this,"_findMatchTextAwaiter");this.DefaultValue="",this.SEntryClass="search-entry",this.Meta.ComponentGroup=null,this.Meta.Row=this.Meta.Row??50,this.RowData=new ObservableList,this._input=null,this._rootResult=null,this._parentInput=null,this._backdrop=null,this._waitForInput=null,this._waitForDispose=null,this._contextMenu=!1,this.SearchResultEle=null,this._gv=null,this.DisplayField=this.Meta.FieldName.substring(0,this.Meta.FieldName.length-2)}Render(){this.SetDefaultVal(),this._value=this.Entity[this.Name],this.RenderInputAndEvents(),this.RenderIcons(),this.FindMatchText(),this.SearchResultEle=this.Element.closest("div")}RenderInputAndEvents(){if(this.ParentElement.tagName=="INPUT"&&(this.Element=this._input=this.ParentElement),this.Element==null)this.Element=this._input=Html.Take(this.ParentElement).Div.Position(PositionEnum.relative).TabIndex(-1).ClassName(this.SEntryClass).Input.GetContext(),this._parentInput=this._input.parentElement;else if(this._input=this.Element,!this._input.parentElement.classList.includes(this.SEntryClass)){var i=document.createElement("div");i.classList.add(this.SEntryClass),this._input.parentElement.appendChild(i),this._input.parentElement.insertBefore(i,this._input)}this._input.autocomplete="off",Html.Take(this._input).PlaceHolder(this.Meta.PlainText).Event(EventType.ContextMenu,()=>this._contextMenu=!0).Event(EventType.Focus,this.FocusIn.bind(this)).Event(EventType.FocusOut,this.DiposeGvWrapper.bind(this)).Event(EventType.Click,this.SEClickOpenRef.bind(this)).Event(EventType.Change,this.SEChangeHandler.bind(this)).Event(EventType.Input,()=>this.Search(this._input.value,!1,null,!0,!1))}SEClickOpenRef(){this.Disabled&&!this.Meta.FocusSearch&&this.OpenRefDetail()}SEChangeHandler(){this._value===null&&(this._input.value="")}SEKeydownHandler(i){var t,n;if(this.Disabled||i===null)return;let e=i.KeyCodeEnum();switch(e){case KeyCodeEnum.Escape:this._gv!==null&&(i.stopPropagation(),this._gv.Show=!1);break;case KeyCodeEnum.UpArrow:((t=this._gv)==null?void 0:t.Element)!==null&&this._gv.Show&&(i.stopPropagation(),this._gv.MoveUp());break;case KeyCodeEnum.DownArrow:((n=this._gv)==null?void 0:n.Element)!==null&&this._gv.Show&&(i.stopPropagation(),this._gv.MoveDown());break;case KeyCodeEnum.Enter:this.EnterKeydownHandler(e);break;case KeyCodeEnum.F6:this._gv!==null&&this._gv.Show&&(i.preventDefault(),this._gv.HotKeyF6Handler(i,KeyCodeEnum.F6));break;default:i.shiftKey&&e===KeyCodeEnum.Delete&&(this._input.value=null,this.Search());break}}EnterKeydownHandler(i){if(this.Meta.HideGrid){this.Search(this._input.value,!0,0,!0);return}this.EditForm.Meta.CustomNextCell&&(this._gv===null||!this._gv.Show)||(this._gv!==null&&this._gv.Show?this.EnterKeydownTableStillShow(i):this.Search(null,!0,0))}EnterKeydownTableStillShow(i){var e,t,n;if(this._gv.SelectedIndex>=0){let s=(e=this._gv)==null?void 0:e.AllListViewItem.find(r=>r.RowNo===this._gv.SelectedIndex).Entity;this.EntrySelected(s)}else((t=this._gv)==null?void 0:t.RowData)!==null&&this._gv.RowData.Data.length===1&&i===KeyCodeEnum.Enter&&this.EntrySelected((n=this._gv)==null?void 0:n.RowData.Data[0])}FocusIn(){if(this.ParentElement.classList.add("cell-selected"),this._contextMenu){this._contextMenu=!1;return}this.Disabled||this.Meta.FocusSearch||this.Search(null,!1,0)}FocusOut(){this.ParentElement.classList.remove("cell-selected")}Dispose(){this.DisposeGv(),super.Dispose()}DiposeGvWrapper(i=null){window.clearTimeout(this._waitForDispose),this._waitForDispose=window.setTimeout(this.DisposeGv.bind(this),50)}DisposeGv(){this.DisposeMobileSearchResult(),this._gv!==null&&(this._gv.Show=!1),this._parentInput.appendChild(this._input)}RenderIcons(){let i=LangSelect.Get("Tạo mới dữ liệu ");Html.Take(this.Element.parentElement).Div.ClassName("search-icons");let e=Html.Instance.Icon("fa fa-info-circle").Title(LangSelect.Get("Thông tin chi tiết ")+LangSelect.Get(this.Meta.Label)).Event("click",this.OpenRefDetail.bind(this)).End.Icon("fa fa-plus").Title(`${i} ${LangSelect.Get(this.Meta.Label)}`).Event("click",this.OpenRefDetail.bind(this)).End.GetContext();this.Element.nextElementSibling!==null?this.Element.parentElement.insertBefore(e,this.Element.nextElementSibling):this.Element.parentElement.appendChild(e)}OpenRefDetail(){!this.Meta.RefClass||this.Matched===null||ComponentExt.LoadFeature(this.Meta.RefClass).Done(this.FeatureLoaded.bind(this))}FeatureLoaded(feature){var i;let instance=new(eval(this.Meta.RefClass));instance.Id=feature.Name,instance.ParentForm=this.TabEditor,instance.ParentElement=this.TabEditor.Element,this.TabEditor.AddChild(instance);let res;if(!this.Meta.Template.trim()!==""){Utils$1.IsFunction(this.Meta.Template)?(i=Utils$1.IsFunction(this.Meta.Template))==null||i.call(null,res,this):res=Utils$1.FormatEntity2(this.Meta.Template,null,this.Matched,Utils$1.EmptyFormat,Utils$1.EmptyFormat);let e=JSON.parse(res);instance.Entity=e}instance.DOMContentLoaded+=()=>{let e=instance.FindComponentByName("Button"),t=document.createElement("td");e.Element.querySelector("tr").prepend(t),Html.Take(t).Button.ClassName("btn btn-secondary").Icon("fal fa-file-check").End.IText("Apply").Event("click",()=>{instance.IsFormValid().Done(s=>{s&&instance.SavePatch().Done(r=>{r&&(this.SaveAndApply(instance.Entity),instance.Dispose())})})}).End.Render()}}SaveAndApply(i){var t,n,s;let e=this.Value;if(this.Dirty=!0,this.Matched=i,!this.Parent.IsListViewItem){this.Value=(t=i[this.IdField])==null?void 0:t.toString(),this.Dirty=!0,this.Parent.EditForm.Dirty=!0,this.UserInput!==null&&(this.CascadeAndPopulate(),(n=this.UserInput)==null||n.Invoke({NewData:this._value,OldData:e,EvType:EventType.Change}));return}this.UserInput!==null&&(this.CascadeAndPopulate(),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity,this.Parent.Entity,this.Matched),(s=this.UserInput)==null||s.Invoke({NewData:this._value,OldData:e,EvType:EventType.Change}))}Search(i=null,e=!0,t=500,n=!1,s=!1){this.Meta.HideGrid&&!s||(window.clearTimeout(this._waitForInput),this._waitForInput=window.setTimeout(()=>{if(this._gv!==null&&(this._gv.Wheres=[],this._gv.AdvSearchVM.Conditions=[],this._gv.CellSelected=[]),e&&!this._input.value){this.InputEmptyHandler(n);return}this.TriggerSearch(i)},t))}TriggerSearch(i=null){this.RenderGridView(Utils$1.DecodeSpecialChar(i))}async RenderGridView(i=null){var t,n,s;if(!this._isRendering){if(this._isRendering=!0,this._gv!==null){this.RenderRootResult(),this._gv.ParentElement=this._rootResult,this._gv.Entity=this.Entity,this._gv.ListViewSearch.EntityVM.SearchTerm=i,this._gv.RowData.Data=[],this._gv.ActionFilter(),this.GridResultDomLoaded(),this._isRendering=!1;return}Utils$1.isNullOrWhiteSpace(this.Meta.GroupBy)&&(this._gv=new GridView$1(this.Meta)),this.RenderRootResult(),this.ParentElement=this._rootResult,this._gv.EditForm=this.EditForm,this._gv.Meta=this.Meta,this._gv.ParentElement=this._rootResult,this._gv.Entity=this.Entity,this._gv.Parent=this,this._gv.AlwaysValid=!0,this._gv.PopulateDirty=!1,this._gv.ShouldSetEntity=!1,this._gv.DOMContentLoaded.add(this.GridResultDomLoaded.bind(this)),this._gv.AddSections(),this._gv.Show=!1,this._gv.Render(),this._gv.Element.classList.add("floating"),this._gv.RowClick.add(this.EntrySelected.bind(this)),this._isRendering=!1,this._gv.Paginator&&((t=this._gv.Paginator)==null?void 0:t.Element)!==null&&(this._gv.Paginator.Element.tabIndex=-1,this._gv.Paginator.Element.addEventListener("focusin",()=>window.clearTimeout(this._waitForDispose)),this._gv.Paginator.Element.addEventListener("focusout",this.DiposeGvWrapper.bind(this))),this._gv.MainSection&&((n=this._gv.MainSection)==null?void 0:n.Element)!==null&&(this._gv.MainSection.Element.tabIndex=-1,this._gv.MainSection.Element.addEventListener("focusin",()=>window.clearTimeout(this._waitForDispose)),this._gv.MainSection.Element.addEventListener("focusout",this.DiposeGvWrapper.bind(this))),this._gv.HeaderSection&&((s=this._gv.HeaderSection)==null?void 0:s.Element)!==null&&(this._gv.HeaderSection.Element.tabIndex=-1,this._gv.HeaderSection.Element.addEventListener("focusin",()=>window.clearTimeout(this._waitForDispose)),this._gv.HeaderSection.Element.addEventListener("focusout",this.DiposeGvWrapper.bind(this))),this.Meta.LocalHeader===null&&(this.Meta.LocalHeader=Array.from(this._gv.header.filter(r=>r.id!=null)));var e=this.Element.closest(".tab-item");e!=null&&e.addEventListener(EventType.Scroll,this.AlterPositionGV.bind(this))}}RenderRootResult(){this._rootResult===null&&(!this.IsSmallUp&&this._backdrop===null?(Html.Take(EditableComponent.TabContainer).Div.ClassName("backdrop"),this._backdrop=Html.Context,Html.Instance.Div.ClassName("popup-content").Style("top: 0;width: 100%;").Div.ClassName("popup-title").Span.IconForSpan("fal fal fa-search").End.Span.IText("Search").End.Div.ClassName("icon-box").Span.ClassName("fa fa-times").Event("click",this.DisposeMobileSearchResult.bind(this)).End.End.End.Div.ClassName("popup-body scroll-content"),this._rootResult=Html.Context,this._rootResult.appendChild(this._input)):this.IsSmallUp&&(this._rootResult=document.createElement("div"),this._rootResult.classList.add("result-wrapper"),this.SearchResultEle.appendChild(this._rootResult)))}DisposeMobileSearchResult(){this._parentInput.appendChild(this._input),this._backdrop!==null&&(this._backdrop.remove(),this._backdrop=null),this._rootResult!==null&&(this._rootResult.remove(),this._rootResult=null)}async GridResultDomLoaded(){var i;this.FocusBackWithoutEvent(),this._gv.SelectedIndex=-1,this._gv.RowAction(e=>{e.Selected=!1}),this._gv.Element.style.inset=null,this.RenderRootResult(),this._rootResult.appendChild(this._gv.Element),this.Meta.HideGrid||(this._gv.Show=!0),this.IsSmallUp?ComponentExt.AlterPosition(this._gv.Element,this._input):(this._gv.Element.style.maxWidth="100%",this._gv.Element.style.minWidth="calc(100% - 2rem)"),this.Meta.HideGrid&&this.EntrySelected((i=this._gv)==null?void 0:i.RowData.Data[0]),this.FocusBackWithoutEvent()}AlterPositionGV(){ComponentExt.AlterPosition(this._gv.Element,this._input)}FocusBackWithoutEvent(){window.clearTimeout(this._waitForDispose),window.clearTimeout(this._waitForInput),this.Meta.IsPivot||this._input.focus()}InputEmptyHandler(i){var n;let e=this._value,t=this.Matched;this.Matched=null,this._value=null,this._input.value="",t!==this.Matched&&(this.Entity[this.Name]=null,this.Dirty=!0,this.CascadeAndPopulate(),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity,this.Matched,t).Done(),(n=this.UserInput)==null||n.Invoke({NewData:this._value,OldData:e,EvType:EventType.Change})),!(i&&!this._input.value)&&(this.IsMultiple&&(this._isRendering=!1),this.TriggerSearch(null))}FindMatchText(){this.Matched=this.Entity[this.DisplayField]||null,this.SetMatchedValue()}CascadeAndPopulate(){this.CascadeField(),this.PopulateFields(this.Matched)}SetMatchedValue(){this._input.value=this.EmptyRow?"":this.GetMatchedText(this.Matched),this.UpdateValue()}UpdateValue(){var i,e;this.Dirty||(this.OriginalText=this._input.value,(i=this.DOMContentLoaded)==null||i.invoke(),this.OldValue=(e=this._value)==null?void 0:e.toString())}PatchDetail(){let i=[{Label:this.ComLabel+"(value)",Field:this.Name,Value:this._value,OldVal:this.OldValue}];if(!this.Meta.FieldText){let e=Utils$1.GetPropValue(this.Entity,this.Meta.DisplayField)??{};e[this.Meta.DisplayDetail]=this._input.value,i.push({Label:this.ComLabel+"(text)",Field:this.Meta.DisplayField,Value:JSON.stringify(e),HistoryValue:this._input.value,OldVal:this.OriginalText})}return i}GetMatchedText(i){if(i===null&&this.Entity===null||!i)return"";let e=Utils$1.FormatEntity(this.Meta.FormatData,i);return Utils$1.DecodeSpecialChar(e??"")}EntrySelected(i){if(window.clearTimeout(this._waitForDispose),this.EmptyRow=!1,i===null||this.Disabled)return;let e=this.Matched;this.Matched=i;let t=this._value;this._value=i[this.IdField],this.Entity!==null&&this.Name&&(this.Entity[this.Name]=this._value),this.Dirty=!0,this.Matched=i,this.SetMatchedValue(),this._gv!==null&&(this._gv.Show=!1),this.CascadeAndPopulate(),this.DispatchEvent(this.Meta.Events,EventType.Change,this.Entity,i,e).Done(()=>{var n;(n=this.UserInput)==null||n.Invoke({NewData:this._value,OldData:t,EvType:EventType.Change}),this.DiposeGvWrapper()})}UpdateView(i=!1,e=null,...t){if(this._value=Utils$1.GetPropValue(this.Entity,this.Name),this._value===null){this.Matched=null,this._input.value=null,this.UpdateValue();return}this.FindMatchText()}async ValidateAsync(){return this.ValidationRules.Nothing()?!0:(this.ValidationResult.Clear(),this.ValidateRequired(this._value),this.Validate(ValidationRule.Equal,this._value,(i,e)=>i===e),this.Validate(ValidationRule.NotEqual,this._value,(i,e)=>i!==e),this.IsValid)}SetDisableUI(i){this._input!==null&&(this._input.readOnly=i)}RemoveDOM(){this._input!==null&&this._input.parentElement!==null&&this._input.parentElement.remove()}};const searchEntry=Object.freeze(Object.defineProperty({__proto__:null,SearchEntry:SearchEntry$1},Symbol.toStringTag,{value:"Module"})),Ui=class Ui extends EditableComponent{constructor(e,t=null){super(e);h(this,"time");this.Element=t||null,this.DefaultValue="",this.editor=null}Render(){this.Element||(this.ParentElement.style.textAlign="unset",Html.Take(this.ParentElement).Div.ClassName("code-editor").Style("height:150px;max-height:150px;position: relative;"),this.Element=Html.Context),this.Config().then(()=>{typeof require>"u"||require(["vs/editor/editor.main"],this.EditorLoaded.bind(this))})}UpdateView(e=!1,t=null,...n){this.editor.setValue(this.FieldVal)}async Config(){if(typeof require>"u"||Ui._hasConfig)return;Ui._hasConfig=!0,require.config({paths:{vs:"https://unpkg.com/monaco-editor@0.8.3/min/vs"}}),window.MonacoEnvironment={getWorkerUrl:()=>e};let e=URL.createObjectURL(new Blob([`
            self.MonacoEnvironment = {
                baseUrl: 'https://unpkg.com/monaco-editor@0.8.3/min/'
            };
            importScripts('https://unpkg.com/monaco-editor@0.8.3/min/vs/base/worker/workerMain.js');
            `],{type:"text/javascript"}))}EditorLoaded(){this.editor=monaco.editor.create(this.Element,{value:this.FieldVal??Str.Empty,language:this.Meta.Lang??"javascript",theme:this.Meta.Theme??"vs-light",automaticLayout:!0,minimap:{enabled:!1}}),window.addEventListener("resize",this.ResizeHandler.bind(this)),this.editor.getModel().onDidChangeContent(()=>{this.FieldVal=this.editor.getValue(),this.Dirty=!0}),this.Element.classList.add("code-editor"),this.Element.style.resize="both",this.Element.style.border="1px solid #dde",this.addEventListener("UpdateView",()=>{this.editor.setValue(this.FieldVal)}),Html.Take(this.Element).Icon("fal fal fa-compress-wide").Style("position: absolute; z-index: 1000; top: 0; right: 0;").Event("click",()=>{ComponentExt.FullScreen(this.Element)})}ResizeHandler(){window.clearTimeout(this.time),this.time=window.setTimeout(()=>{const e=this.Parent.Element.clientWidth-30;this.Element.style.width=e+"px"},200)}};h(Ui,"_hasConfig");let CodeEditor=Ui;class ComponentFactory{static GetComponent(i,e,t=null,n=!1){if(i===null)throw new Error("ui is required");if(!i.ComponentType)return null;i.ComponentType=i.ComponentType.trim();let s;switch(i.ComponentType){case"Input":s=new Textbox(i,t);break;case"Number":s=new Numbox(i,t);break;case"Datepicker":s=new Datepicker(i,t);break;case"Checkbox":s=new Checkbox(i,t);break;case"FileUpload":s=new Image(i,t);break;case"Button":s=new Button(i,t);break;case"GridView":s=new GridView$1(i,t);break;case"Dropdown":s=new SearchEntry$1(i,t);break;case"CodeEditor":s=new CodeEditor(i,t);break;default:s=new Textbox(i,t);break}return s.CanWrite=n,s[Utils$1.IdField]=`${i.Id.toString()}`,s.Name=i.FieldName,s.ComponentType=i.ComponentType,s.EditForm=e,s}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(o,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},extendStatics(o,i)};function __extends(o,i){extendStatics(o,i);function e(){this.constructor=o}o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}function __values(o){var i=typeof Symbol=="function"&&o[Symbol.iterator],e=0;return i?i.call(o):{next:function(){return o&&e>=o.length&&(o=void 0),{value:o&&o[e++],done:!o}}}}function __read(o,i){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var t=e.call(o),n,s=[],r;try{for(;(i===void 0||i-- >0)&&!(n=t.next()).done;)s.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(e=t.return)&&e.call(t)}finally{if(r)throw r.error}}return s}function __spread(){for(var o=[],i=0;i<arguments.length;i++)o=o.concat(__read(arguments[i]));return o}var Event$1=function(){function o(i,e){this.target=e,this.type=i}return o}(),ErrorEvent=function(o){__extends(i,o);function i(e,t){var n=o.call(this,"error",t)||this;return n.message=e.message,n.error=e,n}return i}(Event$1),CloseEvent=function(o){__extends(i,o);function i(e,t,n){e===void 0&&(e=1e3),t===void 0&&(t="");var s=o.call(this,"close",n)||this;return s.wasClean=!0,s.code=e,s.reason=t,s}return i}(Event$1);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var getGlobalWebSocket=function(){if(typeof WebSocket<"u")return WebSocket},isWebSocket=function(o){return typeof o<"u"&&!!o&&o.CLOSING===2},DEFAULT={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};(function(){function o(i,e,t){var n=this;t===void 0&&(t={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){n._debug("open event");var r=n._options.minUptime,l=r===void 0?DEFAULT.minUptime:r;clearTimeout(n._connectTimeout),n._uptimeTimeout=setTimeout(function(){return n._acceptOpen()},l),n._ws.binaryType=n._binaryType,n._messageQueue.forEach(function(u){return n._ws.send(u)}),n._messageQueue=[],n.onopen&&n.onopen(s),n._listeners.open.forEach(function(u){return n._callEventListener(s,u)})},this._handleMessage=function(s){n._debug("message event"),n.onmessage&&n.onmessage(s),n._listeners.message.forEach(function(r){return n._callEventListener(s,r)})},this._handleError=function(s){n._debug("error event",s.message),n._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),n.onerror&&n.onerror(s),n._debug("exec error listeners"),n._listeners.error.forEach(function(r){return n._callEventListener(s,r)}),n._connect()},this._handleClose=function(s){n._debug("close event"),n._clearTimeouts(),n._shouldReconnect&&n._connect(),n.onclose&&n.onclose(s),n._listeners.close.forEach(function(r){return n._callEventListener(s,r)})},this._url=i,this._protocols=e,this._options=t,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(o,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(o,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(o,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CONNECTING",{get:function(){return o.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OPEN",{get:function(){return o.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CLOSING",{get:function(){return o.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CLOSED",{get:function(){return o.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(i){this._binaryType=i,this._ws&&(this._ws.binaryType=i)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bufferedAmount",{get:function(){var i=this._messageQueue.reduce(function(e,t){return typeof t=="string"?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e},0);return i+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?o.CLOSED:o.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),o.prototype.close=function(i,e){if(i===void 0&&(i=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(i,e)},o.prototype.reconnect=function(i,e){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(i,e),this._connect())},o.prototype.send=function(i){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",i),this._ws.send(i);else{var e=this._options.maxEnqueuedMessages,t=e===void 0?DEFAULT.maxEnqueuedMessages:e;this._messageQueue.length<t&&(this._debug("enqueue",i),this._messageQueue.push(i))}},o.prototype.addEventListener=function(i,e){this._listeners[i]&&this._listeners[i].push(e)},o.prototype.dispatchEvent=function(i){var e,t,n=this._listeners[i.type];if(n)try{for(var s=__values(n),r=s.next();!r.done;r=s.next()){var l=r.value;this._callEventListener(i,l)}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return!0},o.prototype.removeEventListener=function(i,e){this._listeners[i]&&(this._listeners[i]=this._listeners[i].filter(function(t){return t!==e}))},o.prototype._debug=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];this._options.debug&&console.log.apply(console,__spread(["RWS>"],i))},o.prototype._getNextDelay=function(){var i=this._options,e=i.reconnectionDelayGrowFactor,t=e===void 0?DEFAULT.reconnectionDelayGrowFactor:e,n=i.minReconnectionDelay,s=n===void 0?DEFAULT.minReconnectionDelay:n,r=i.maxReconnectionDelay,l=r===void 0?DEFAULT.maxReconnectionDelay:r,u=0;return this._retryCount>0&&(u=s*Math.pow(t,this._retryCount-1),u>l&&(u=l)),this._debug("next delay",u),u},o.prototype._wait=function(){var i=this;return new Promise(function(e){setTimeout(e,i._getNextDelay())})},o.prototype._getNextUrl=function(i){if(typeof i=="string")return Promise.resolve(i);if(typeof i=="function"){var e=i();if(typeof e=="string")return Promise.resolve(e);if(e.then)return e}throw Error("Invalid URL")},o.prototype._connect=function(){var i=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var e=this._options,t=e.maxRetries,n=t===void 0?DEFAULT.maxRetries:t,s=e.connectionTimeout,r=s===void 0?DEFAULT.connectionTimeout:s,l=e.WebSocket,u=l===void 0?getGlobalWebSocket():l;if(this._retryCount>=n){this._debug("max retries reached",this._retryCount,">=",n);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!isWebSocket(u))throw Error("No valid WebSocket class provided");this._wait().then(function(){return i._getNextUrl(i._url)}).then(function(m){i._closeCalled||(i._debug("connect",{url:m,protocols:i._protocols}),i._ws=i._protocols?new u(m,i._protocols):new u(m),i._ws.binaryType=i._binaryType,i._connectLock=!1,i._addListeners(),i._connectTimeout=setTimeout(function(){return i._handleTimeout()},r))})}},o.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new ErrorEvent(Error("TIMEOUT"),this))},o.prototype._disconnect=function(i,e){if(i===void 0&&(i=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(i,e),this._handleClose(new CloseEvent(i,e,this))}catch{}}},o.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},o.prototype._callEventListener=function(i,e){"handleEvent"in e?e.handleEvent(i):e(i)},o.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},o.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},o.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},o})();const hn=class hn extends EditableComponent{constructor(){super(...arguments);h(this,"PElement",null);h(this,"Top",0);h(this,"Left",0);h(this,"_selectedContextMenuItem",null);h(this,"_selectedItem",null);h(this,"IsRoot",!1);h(this,"_selectedIndex",-1);h(this,"MenuItems",[]);h(this,"_active","active");h(this,"IsSingleton",!0);h(this,"time")}static get Instance(){return this._instance||(this._instance=new hn,this._instance.MenuItems=[]),this._instance.PElement=null,this._instance}Render(){this.Element==null&&(Html.Take(this.PElement??document.body).Ul.ClassName("context-menu"),this.Element=Html.Instance.Context),this.PElement==null&&this.Element!=null&&document.body.appendChild(this.Element),this.PElement!=null&&this.Element!=null&&this.PElement.appendChild(this.Element),this.Element=this.Element,this.Element.addEventListener("focusout",()=>this.Dispose()),this.Element.addEventListener("keydown",e=>this.HotKeyHandler(e)),Html.Take(this.Element).Clear().TabIndex(-1).Floating(this.Top,this.Left),this.ParentElement=this.Element.ParentElement,this.RenderMenuItems(this.MenuItems),window.setTimeout(()=>{this.Element!=null&&(this.Element.style.display="block",this.Element.focus(),this.AlterPosition())},50)}RenderMenuItems(e,t=0){for(let n=0;n<e.length;n++){const s=e[n];s&&(Html.Instance.Li.Style(s.Style).Render(),s.Ele=Html.Context,n==0&&t==0&&(e[n].MenuItems==null||e[n].MenuItems.length==0)&&(this._selectedIndex=n,this.SetSelectedItem(Html.Context)),s.Disabled?Html.Instance.Attr("disabled","disabled"):Html.Instance.Event("click",r=>this.MenuItemClickHandler(r,s)),Html.Instance.Icon(s.Icon).End.Span.IText(s.Text).End.Render(),s.MenuItems!=null&&s.MenuItems.length>0&&(Html.Instance.Ul.Render(),this.RenderMenuItems(s.MenuItems,t+1),Html.Instance.End.Render()),Html.Instance.End.Render())}}SetSelectedItem(e){this._selectedItem=e,this._selectedItem.classList.add(this._active)}MenuItemClickHandler(e,t){e.stopPropagation(),!(!t||!t.Click)&&(t.Click(t.Parameter),this.Element.dispatchEvent(new Event("focusout")))}HotKeyHandler(e){if(e.preventDefault(),!this.Element||!this.Element.children||this.Element.children.length===0)return;const t=this._selectedItem?this._selectedItem.parentElement.children:this.Element.children;switch(e.KeyCode()){case 27:this.Dispose();break;case 37:if(this.IsRoot||!this._selectedItem||!this._selectedItem.parentElement)return;Array.from(this._selectedItem.parentElement.children).forEach(r=>r.classList.remove(this._active)),this._selectedItem=this._selectedItem.parentElement;break;case 38:e.preventDefault(),e.stopPropagation(),Array.from(t).forEach(r=>r.classList.remove(this._active)),this._selectedIndex=this._selectedIndex>0?this._selectedIndex-1:t.length-1,this.SetSelectedItem(t[this._selectedIndex]);break;case 39:const s=this._selectedItem?this._selectedItem.lastElementChild:null;if(!s||!s.children||s.children.length===0)return;Array.from(s.children).forEach(r=>r.classList.remove(this._active)),this.SetSelectedItem(s.firstElementChild);break;case 40:e.preventDefault(),e.stopPropagation(),Array.from(t).forEach(r=>r.classList.remove(this._active)),this._selectedIndex=this._selectedIndex<t.length-1?this._selectedIndex+1:0,this.SetSelectedItem(t[this._selectedIndex]);break;case 13:!this._selectedItem&&this.Element.firstElementChild instanceof HTMLElement&&this.SetSelectedItem(this.Element.firstElementChild),this.MenuItemClickHandler(e,this.MenuItems.find(r=>r.Ele===this._selectedItem));break}}AlterPosition(){this.Floating(this.Top,this.Left);const e=this.Element.getBoundingClientRect(),t=this.Element.OutOfViewport();t.Bottom&&(this.Element.style.top=`${this.Top-e.height}px`),t.Right&&(this.Element.style.left=`${this.Left-e.width}px`,this.Element.style.top=`${this.Top}px`),this.Element.OutOfViewport().Bottom&&(this.Element.style.top=`${this.Top-e.height}px`,this.Element.style.top=`${this.Top-e.height-this.Element.clientHeight}px`)}Dispose(){window.clearTimeout(this.time),this.time=window.setTimeout(()=>{this.Element!=null&&(this.Element.remove(),this.Element=null)},100)}Floating(e,t){this.Element.style.position="fixed",this.Element.style.top=`${e}px`,this.Element.style.left=`${t}px`}};h(hn,"_instance",null);let ContextMenu=hn;const nt=class nt extends EditableComponent{constructor(e=null){super(null);h(this,"IsEditForm",!0);h(this,"OpenFrom");h(this,"ListViews",[]);h(this,"Pop",!1);h(this,"Portal",!0);h(this,"IsLock",!1);h(this,"Meta");h(this,"_allCom",[]);h(this,"TabGroup",[]);h(this,"SectionMd");h(this,"BeforeSaved",new Action);h(this,"AfterSaved",new Action);h(this,"ShouldLoadEntity",!1);h(this,"IconElement",null);h(this,"TitleElement",null);h(this,"Policies",[]);h(this,"_componentCoppy");h(this,"CtxCom");this.urlSearch=new URLSearchParams(window.location.search),this.entity=e,this.Meta=new Feature,e!=null&&window.addEventListener(EventType.Resize,this.ResizeHandler.bind(this))}get AllCom(){return this._allCom!==null?this._allCom:(nt.LayoutForm===null?this._allCom=this.Meta.Component.slice():this._allCom=this.Meta.Component.concat(nt.LayoutForm.Meta.Component),this._allCom)}get FeatureName(){var e;return this.Name||((e=this.Meta)==null?void 0:e.Name)}get Href(){return this.href}set Href(e){this.href=e}GetPatchEntity(){const e=this.EntityId==null,t=this.FilterChildren(r=>!r.IsButton&&(e||r.Dirty)&&r.Meta!=null&&r.Name!=null,r=>r.IsListView||r.AlwaysValid||!r.PopulateDirty),n=t.SelectMany(r=>{var m;if(typeof r.GetPatchDetail=="function")return r.GetPatchDetail();const l=Utils$1.GetPropValue(r.Entity,r.Name);return[{Label:r.ComLabel,Field:r.Name,OldVal:r.OldValue!=null?r.OldValue.toString():(m=r.OldValue)==null?void 0:m.toString(),Value:l!=null?l.toString():this.EditForm.Meta.IgnoreEncode?l==null?void 0:l.toString().trim():Utils$1.EncodeSpecialChar(l==null?void 0:l.toString().trim())}]}).DistinctBy(r=>r.Field);return this.AddIdToPatch(t),{Changes:n,Table:this.Meta.EntityName,QueueName:this.QueueName,CacheName:this.CacheName}}async SavePatch(){if(!this.Dirty)return Toast.Warning(Message.NotDirty),!1;try{if(!await this.IsFormValid())return!1;let t=[];Object.getOwnPropertyNames(this.Entity).forEach(r=>{if(this.Entity[r]instanceof Array||this.Entity[r]instanceof Object)return;let l;typeof this.Entity[r]=="boolean"?l=this.Entity[r]?"1":"0":l=this.Entity[r];let u={Label:r,Field:r,OldVal:null,Value:l};t.push(u)});let n={Changes:t,Table:this.Meta.EntityId};const s=await Client.Instance.PatchAsync(n);return this.Dirty=!1,Toast.Success("Update success"),s}catch(e){return Toast.Warning(e.message),!1}}ResizeHandler(){this.ResizeTabGroup(),this.ResizeListView()}ResizeListView(){const e=this.ListViews.find(s=>!s.Element.Hidden());if(!e)return;const t=e.Parent.Children.filter(s=>s.IsListView),n=t.some(s=>s.Name.includes("Mobile"));t.forEach(s=>{n?(s.Show=this.IsSmallUp?!s.Name.includes("Mobile"):s.Name.includes("Mobile"),s.Show&&(this._CurrentListView=s)):this._CurrentListView=s})}ResizeTabGroup(){this.Element&&(this.Element.HasClass("mobile")||this.TabGroup.Nothing())||this.TabGroup.ForEach(e=>{!e||!e.Element||(this.IsLargeUp&&e.Meta.Responsive&&e.Element.parentElement.HasClass("tab-horizontal")?e.Element.parentElement.ReplaceClass("tab-horizontal","tab-vertical"):!this.IsLargeUp&&e.Meta.Responsive&&e.Element.parentElement.HasClass("tab-vertical")&&e.Element.parentElement.ReplaceClass("tab-vertical","tab-horizontal"))})}async LoadFeatureAndRender(e=null){this.SectionMd=this.SectionMd||await __vitePreload(()=>Promise.resolve().then(()=>section),void 0);const t=ComponentExt.LoadFeature(this.Meta.FieldName);this.LoadEntity().then(n=>{t.then(s=>{this.LayoutLoaded(s,e)})})}Render(){this.LoadFeatureAndRender(),this.LastForm=this}LayoutLoaded(e,t=null){this.SetCurrentUserProperties(),this.SetFeatureProperties(e);const n=this.BuildTree(e.ComponentGroup.sort((s,r)=>s.Order-r.Order));this.SetFeatureStyleSheet(e.StyleSheet),this.Policies=e.FeaturePolicies,this.RenderTabOrSection(n,this),this.ResizeHandler(),this.InitDOMEvents(),t==null||t.call(null),this.DispatchFeatureEvent(e.Events,EventType.DOMContentLoaded)}InitDOMEvents(){Html.Take(this.Element).TabIndex(-1).Trigger("focus").Event(EventType.FocusIn,()=>this.DispatchFeatureEvent(this.Meta.Events,EventType.FocusIn)).Event(EventType.KeyDown,e=>this.KeyDownIntro(e)).Event(EventType.FocusOut,()=>this.DispatchFeatureEvent(this.Meta.Events,EventType.FocusOut)),this.Popup||Html.Instance.ClassName("tab-item")}SetCurrentUserProperties(){const e=Client.Token;this.currentUserId=e==null?void 0:e.UserId,this.regionId=e==null?void 0:e.RegionId,this.centerIds=e!=null&&e.CenterIds?e.CenterIds.join(Str.Comma):Str.Empty,this.roleIds=e!=null&&e.RoleIds?e.RoleIds.join(Str.Comma):Str.Empty,this.costCenterId=e==null?void 0:e.CostCenterId,this.roleNames=e!=null&&e.RoleNames?e.RoleNames.join(Str.Comma):Str.Empty}UpdateIndependantGridView(){const e=this.GetDirtyGrid();return e.length?e.flatMap(t=>t.GetPatches()):null}GetDirtyGrid(){return this.ListViews.filter(e=>e.Meta.Id&&e.Meta.CanAdd).filter(e=>e.FilterChildren(t=>t.Dirty,t=>!t.PopulateDirty).length>0)}DeleteGridView(){this.GetDeleteGrid().forEach(t=>{Client.Instance.HardDeleteAsync(t.DeleteTempIds,t.Meta.RefName,t.DataConn,t.MetaConn).then(n=>{if(!n){Toast.Warning("Error deleting details, please check again");return}t.RowAction(s=>{t.DeleteTempIds.includes(s.EntityId)&&s.Dispose()}),t.DeleteTempIds.Clear()})})}GetDeleteGrid(){return this.ListViews.filter(e=>e.Meta.Id).filter(e=>e.DeleteTempIds.length>0)}BuildTree(e){const t=new Map(e.map(r=>[r.Id,r]));let n;for(const r of e)if(r.IsVerticalTab&&this.Element.clientWidth<EditableComponent.SmallScreen&&(r.IsVerticalTab=!1),!!r.ParentId){if(!t.has(r.ParentId)){console.log(`The parent key ${r.ParentId} of ${r.FieldName} doesn't exist`);continue}n=t.get(r.ParentId),n.Children||(n.Children=[]),n.Children.includes(r)||n.Children.push(r),r.Parent=n}for(const r of e)if(!(!r.Children||!r.Children.length)){for(const l of r.Children)l.ComponentGroup=r;r.Children&&(r.Children=r.Children.sort((l,u)=>l.Order-u.Order))}e.forEach(r=>this.CalcItemInRow(r.Children.slice()));const s=e.filter(r=>!r.ParentId);return s.length||console.log("No component group is root component. Wrong feature name or the configuration is wrong"),s}CalcItemInRow(e){let t=0,n=0,s=0;for(let r=0;r<e.length;r++){const l=e[r],u=this.GetInnerColumn(l.Parent),m=this.GetOuterColumn(l);if(!(u<=0)&&(n++,t+=m,t%u===0)){let y=r;for(;y>=s;)e[y].ItemInRow=n,y--;n=0,s=r}}}GetInnerColumn(e){if(!e)return 0;const t=this.Element.clientWidth;let n;return t<EditableComponent.ExSmallScreen&&e.XsCol>0?n=e.XsCol:t<EditableComponent.SmallScreen&&e.SmCol>0?n=e.SmCol:t<EditableComponent.MediumScreen&&e.Column>0?n=e.Column:t<EditableComponent.LargeScreen&&e.LgCol>0?n=e.LgCol:t<EditableComponent.ExLargeScreen&&e.XlCol>0?n=e.XlCol:n=e.XxlCol||e.Column,n||0}GetOuterColumn(e){if(!e)return 0;const t=this.Element.clientWidth;let n;return t<EditableComponent.ExSmallScreen&&e.XsOuterColumn>0?n=e.XsOuterColumn:t<EditableComponent.SmallScreen&&e.SmOuterColumn>0?n=e.SmOuterColumn:t<EditableComponent.MediumScreen&&e.OuterColumn>0?n=e.OuterColumn:t<EditableComponent.LargeScreen&&e.LgOuterColumn>0?n=e.LgOuterColumn:t<EditableComponent.ExLargeScreen&&e.XlOuterColumn>0?n=e.XlOuterColumn:n=e.XxlOuterColumn||e.OuterColumn,n||0}BindingTemplate(e,t,n=null,s=null,r=new Set){if(!e||r.has(e)||(r.add(e),e.children.length===0&&this.RenderCellText(e,n)!==null))return;const l=this.ResolveMeta(e),u=s?s(e,l,t,n):this.BindingCom(e,l,t,n);t=u instanceof this.SectionMd.Section?u:t,e.children.forEach(m=>this.BindingTemplate(m,t,n,s,r))}ResolveMeta(e){let t=new Component;const n=e.dataset[this.IdField.toLowerCase()];n&&(t=this.AllCom.find(s=>s.Id===n));for(const s of Object.getOwnPropertyNames(Component.prototype)){const r=e.dataset[s.toLowerCase()];if(!r)continue;let l=null;try{l=typeof t[s]=="string"?r:JSON.parse(r),t=t||new Component,t[s]=l}catch{continue}}return t}RenderCellText(e,t){const n=e.textContent.trim();if(n&&n.startsWith("{")&&n.endsWith("}")){const s={FieldName:n.slice(1,-1)},r=new Label(s,e);return r.Entity=t,nt.LayoutForm?nt.LayoutForm.AddChild(r):r.Render(),r}return null}static GetFeatureNameFromUrl(){let e=new StringBuilder,t=window.location.pathname.toLowerCase().replace(Client.BaseUri.toLowerCase(),"");if(t.startsWith(Utils$1.Slash)&&(t=t.substring(1)),!t.trim())return null;for(let n=0;n<t.length&&!(t[n]==="?"||t[n]==="#");n++)e.Append(t[n]);return e.toString()}get EntityName(){return this.Meta.EntityName}async LoadEntity(){const t=nt.GetFeatureNameFromUrl()===this.FeatureName?Utils$1.GetUrlParam(Utils$1.IdField):this.EntityId;if(!this.ShouldLoadEntity||!t)return null;try{const n=await Client.Instance.GetByIdAsync(this.EntityName,this.DataConn,[t]);return n?(this.Entity=n[0],n[0]):null}catch(n){return console.error("Failed to load entity:",n),null}}LockUpdate(){this.Meta.FeaturePolicy=this.Meta.FeaturePolicy??this.Meta.FeaturePolicies;const e=this.Meta.FeaturePolicy.filter(n=>n.RecordId);!this.Meta.IsPublic&&!Utils$1.IsOwner(this.Entity)&&e.every(n=>!n.CanWrite&&!n.CanWriteAll)&&this.LockUpdateButCancel()}LockUpdateButCancel(){this.Disabled=!0,this.SetDisabled(!1,nt.BtnCancel)}get Icon(){return this._icon}set Icon(e){this._icon=e,this.IconElement!==null&&Html.Take(this.IconElement).IconForSpan(e)}get Title(){return this._title}set Title(e){this._title=e,this.TitleElement!==null&&(this.TitleElement.innerHTML="",Html.Take(this.TitleElement).IText(e))}SetFeatureProperties(e){e&&(this.Meta=e,e.ClassName&&this.Element.classList.add(e.ClassName),this.Icon||(this.Icon=e.Icon),this.Title||(this.Title=e.Label))}SetFeatureStyleSheet(e){if(!e)return;const t=document.createElement("style");t.appendChild(document.createTextNode(e)),t.setAttribute("source","feature"),this.Element.appendChild(t)}RenderTabOrSection(e,t){t.EditForm||(t.EditForm=t),e.sort((n,s)=>n.Order-s.Order).forEach(n=>{n.Disabled=this.Disabled||n.Disabled,n.IsTab?this.SectionMd.Section.RenderTabGroup(t??this,n):this.SectionMd.Section.RenderSection(t??this,n)})}DispatchFeatureEvent(e,t){if(e&&e[t]){const n=new CustomEvent(t,{detail:this.Entity});this.Element.dispatchEvent(n)}}async KeyDownIntro(e){if(e.KeyCode()===72&&e.CtrlOrMetaKey()){e.preventDefault(),await Client.LoadScript("https://unpkg.com/intro.js/intro.js");const n={ComId:"Intro",Action:"GetByFeatureId",Params:JSON.stringify({Id:this.Meta.Id}),MetaConn:this.MetaConn,DataConn:this.DataConn};try{const s=await Client.Instance.UserSvc(n);let r=`(x) => {
                    introJs().setOptions({
                        steps: [{ intro: "Tutorial start" }]`;s.forEach(u=>{r+=`, {
                        element: document.querySelector('#${u.FieldName}'),
                        intro: "${u.Label}"
                    }`}),r+="]).start();}",new Function("return "+r)()(this)}catch(s){console.error("Error setting up intro.js tutorial:",s)}}}RenderTemplate(e){let t=document.getElementById(nt.SpecialEntryPoint)||document.getElementById("template")||this.Element;if(this.ParentForm&&this.Portal&&!this.Popup&&(this.ParentForm.Element=null,this.ParentForm.Dispose(),this.ParentForm=null),t.innerHTML=Str.Empty,e.Template){t.innerHTML=e.Template,this.BindingTemplate(t,this);const n=Array.from(t.querySelectorAll("[id='inner-entry']")).shift();this.ResetEntryPoint(n),t=n||t,t.style.display==="none"&&(t.style.display=Str.Empty)}return t}ResetEntryPoint(e){e&&(e.innerHTML=Str.Empty)}BindingCom(e,t,n,s){var l;if(!e||!t||!t.ComponentType)return null;let r=null;return t.ComponentType===ComponentType.Section?(r=new this.SectionMd.Section(null,e),r.Meta=t,r.Meta=t):r=ComponentFactory.GetComponent(t,this,e),r?(r.ParentElement=r.ParentElement||e,r.Entity=s||((l=r.EditForm)==null?void 0:l.Entity)||this.Entity,n.AddChild(r),r):null}Cancel(){this.DirtyCheckAndCancel()}CancelWithoutAsk(){this.Dispose()}DirtyCheckAndCancel(e=null){if(!this.Dirty){this.Dispose(),e&&e();return}const t=new ConfirmDialog;t.Content="Do you want to save changes before closing?",t.YesConfirmed.add(()=>{this.SavePatch().then(n=>{n.status==200&&(this.Dispose(),e&&e())})}),t.NoConfirmed=()=>{this.Dispose(),e&&e()},t.IgnoreCancelButton=!0,t.Render()}Dispose(){window.removeEventListener("resize",this.ResizeHandler.bind(this)),super.Dispose()}async IsFormValid(e=!0,t=null,n=null){t=t||(l=>l.Children.length===0&&!l.Disabled),n=n||(l=>l.AlwaysValid||l.EmptyRow);const s=this.FilterChildren(t,n).map(l=>({IsValid:l.ValidateAsync(),com:l}));await Promise.all(s.map(l=>l.IsValid));const r=s.filter(l=>!l.com.IsValid).map(l=>l.com);if(r.length>0){if(e){r.forEach(m=>{m.Disabled=!1}),r[0].Focus();const u=r.flatMap(m=>m.ValidationResult.Values);Toast.Warning(u.join(`
`))}return!1}return!0}Print(e=".printable"){const t=this.Element.querySelector(e);if(t){const n=window.open(Str.Empty,"_blank");n.document.write(t.innerHTML),n.document.close(),n.focus(),n.print(),n.close()}}async EmailPdf(e,t=[]){if(!e)throw new Error("EmailVM must not be null.");const n=t.map(s=>{const r=this.Element.querySelector(s);return this.PrintSection(r,!1)});e.PdfText=e.PdfText.concat(n);try{const s=await Client.Instance.PostAsync(e,"/user/EmailAttached");return Toast.Success("Email sent successfully!"),s}catch(s){throw Toast.Error("Error while sending email: "+s.message),s}}PrintSection(e,t=!0,n=null,s=!1,r=null){if(!e)return null;if(!t)return e.innerHTML;const l=window.open("","_blank");if(l.document.body.innerHTML=e.innerHTML,n&&n.length){const u=l.document.createElement("style");u.innerHTML=n.join(" "),l.document.head.appendChild(u)}return s?setTimeout(()=>{l.addEventListener("beforeprint",u=>{if(r&&r.Style){const m=l.document.createElement("style");m.innerHTML=r.Style,l.document.head.appendChild(m)}}),l.print(),l.addEventListener("afterprint",async u=>{r&&r.Events&&r.Events.AfterPrint&&await this.DispatchEvent(r.Events.AfterPrint,"afterprint",this),l.close()}),l.addEventListener("mousemove",()=>l.close()),l.addEventListener("click",()=>l.close()),l.addEventListener("keyup",u=>{u.key==="Escape"&&l.close()})},250):(l.print(),l.close()),e.innerHTML}GetGridPolicies(e,t="Component"){return e=e??Client.Token.RoleIds,this.Policies.filter(s=>s.RoleId||s.UserId&&Client.Token.UserId==s.UserId).filter(s=>s.EntityName==t&&e.includes(s.RecordId))}GetDefaultGridPolicies(){var e=this.Policies.filter(t=>t.RoleId==null||Client.Token!=null&&t.RoleId&&Client.Token.RoleIds.includes(t.RoleId)||t.UserId&&Client.Token.UserId==t.UserId);return e}Delete(){const e=new ConfirmDialog;e.Content="Are you sure you want to delete this?",e.YesConfirmed=async()=>{var t;try{await Client.Instance.HardDeleteAsync([this.EntityId],this.Meta.EntityName,this.DataConn,this.MetaConn)?(Toast.Success("Data deleted successfully"),(t=this.ParentForm)==null||t.UpdateView(),this.Dispose()):Toast.Warning("An error occurred while deleting data")}catch(n){Toast.Warning("An error occurred: "+n.message)}},e.Render()}SignIn(){var e;(e=Client.UnAuthorizedEventHandler)==null||e.call(null)}SignOut(){window.event.preventDefault(),Client.Instance.PostAsync(Client.Token,"user/SignOut").then(t=>{var n,s;Toast.Success("You have successfully signed out!"),(n=Client.SignOutEventHandler)==null||n.call(),Client.Token=null,(s=nt.NotificationClient)==null||s.Close(),window.location.reload()}).catch(t=>{Toast.Warning("Error during sign out: "+t.message)})}GetElementPolicies(e,t="Component"){return Array.isArray(e)?this.Policies.filter(n=>n.EntityName===t&&e.includes(n.RecordId)):this.Policies.filter(n=>n.EntityName===t&&n.RecordId===e)}CopyComponent(e){this._componentCoppy=new Component,this._componentCoppy.CopyPropFrom(e)}AddComponent(e){var l;const t=e.action,n=e.group,s={ComponentType:t,ComponentGroupId:n.Id,Label:"New Component",Visibility:!0,Order:(l=n.Children)!=null&&l.length?Math.max(...n.Children.map(u=>u.Order))+1:0},r=ComponentExt.MapToPatch(s,"Component");Client.Instance.PatchAsync(r).then(()=>{n.Children.push(s),this.UpdateRender(s,n),Toast.Success("Component added successfully!")}).catch(u=>{Toast.Error("Error adding component: "+u.message)})}UpdateRender(e,t){const n=this.FindComponentByName(t.FieldName),s=ComponentFactory.GetComponent(e,this);s&&(s.ParentElement=n.Element,n.AddChild(s))}SysConfigMenu(e,t,n,s){if(e.preventDefault(),e.stopPropagation(),this.CtxCom=s,!this.Policies.some(u=>u.CanWriteMeta||u.CanWriteMetaAll))return;const l=ContextMenu.Instance;l.Top=e.Top(),l.Left=e.Left(),l.MenuItems=[],t!==null&&l.MenuItems.push({Icon:"fal fa-cog",Text:"Component Properties",Click:this.ComponentProperties.bind(this),Parameter:t}),n!==null&&l.MenuItems.push({Icon:"fal fa-cogs",Text:"Section Properties",Click:this.SectionProperties.bind(this),Parameter:n}),l.MenuItems.push({Icon:"fal fa-folder-open",Text:"Screen Properties",Click:this.FeatureProperties.bind(this)}),l.Render()}async SectionProperties(e){const t=await __vitePreload(()=>import("./sectionEditor-BlwiMffW.js"),__vite__mapDeps([0,1])),n=new t.SectionEditor;n.Name="section-editor",n.ParentElement=this.Element,n.Entity=e,n.OpenFrom=this.EditForm,this.AddChild(n)}async FeatureProperties(){var e=await __vitePreload(()=>import("./featureEditor-DAOaHVki.js"),__vite__mapDeps([2,1]));const t=new e.FeatureEditor;t.Name="feature-editor",t.ParentElement=this.Element,t.Entity=this.Meta,t.OpenFrom=this.EditForm,this.AddChild(t)}async ComponentProperties(e){const t=await __vitePreload(()=>import("./componentEditor-D71Vom46.js"),__vite__mapDeps([3,1])),n=new t.ComponentEditor;n.Name="component-editor",n.ParentElement=this.Element,n.Entity=e,n.OpenFrom=this.EditForm,this.AddChild(n)}CloneFeature(e){const t=e,n=new ConfirmDialog;n.Content="Do you want to clone this feature?",n.Title="Confirm",n.YesConfirmed=()=>{const s={ComId:"Feature",Action:"Clone",Ids:[t.Id],MetaConn:this.MetaConn,DataConn:this.DataConn};Client.Instance.UserSvc(s).Done()},this.AddChild(n)}};h(nt,"LayoutForm"),h(nt,"ExpiredDate","ExpiredDate"),h(nt,"BtnExpired","btnExpired"),h(nt,"BtnSave","btnSave"),h(nt,"BtnSend","btnSend"),h(nt,"BtnApprove","btnApprove"),h(nt,"BtnReject","btnReject"),h(nt,"StatusIdField","StatusId"),h(nt,"BtnCancel","btnCancel"),h(nt,"BtnPrint","btnPrint"),h(nt,"BtnPreview","btnPreview"),h(nt,"SpecialEntryPoint","entry"),h(nt,"Portal",!1),h(nt,"NotificationClient");let EditForm=nt;const editForm=Object.freeze(Object.defineProperty({__proto__:null,EditForm},Symbol.toStringTag,{value:"Module"}));var draggabilly={exports:{}},getSize={exports:{}};/*!
 * Infinite Scroll v2.0.4
 * measure size of elements
 * MIT license
 */var hasRequiredGetSize;function requireGetSize(){return hasRequiredGetSize||(hasRequiredGetSize=1,function(o){(function(i,e){o.exports?o.exports=e():i.getSize=e()})(window,function(){function e(r){let l=parseFloat(r);return r.indexOf("%")==-1&&!isNaN(l)&&l}let t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function n(){let r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return t.forEach(l=>{r[l]=0}),r}function s(r){if(typeof r=="string"&&(r=document.querySelector(r)),!(r&&typeof r=="object"&&r.nodeType))return;let u=getComputedStyle(r);if(u.display=="none")return n();let m={};m.width=r.offsetWidth,m.height=r.offsetHeight;let y=m.isBorderBox=u.boxSizing=="border-box";t.forEach(se=>{let we=u[se],g=parseFloat(we);m[se]=isNaN(g)?0:g});let C=m.paddingLeft+m.paddingRight,T=m.paddingTop+m.paddingBottom,F=m.marginLeft+m.marginRight,I=m.marginTop+m.marginBottom,G=m.borderLeftWidth+m.borderRightWidth,Y=m.borderTopWidth+m.borderBottomWidth,le=e(u.width);le!==!1&&(m.width=le+(y?0:C+G));let xe=e(u.height);return xe!==!1&&(m.height=xe+(y?0:T+Y)),m.innerWidth=m.width-(C+G),m.innerHeight=m.height-(T+Y),m.outerWidth=m.width+F,m.outerHeight=m.height+I,m}return s})}(getSize)),getSize.exports}var unidragger={exports:{}},evEmitter={exports:{}},hasRequiredEvEmitter;function requireEvEmitter(){return hasRequiredEvEmitter||(hasRequiredEvEmitter=1,function(o){(function(i,e){o.exports?o.exports=e():i.EvEmitter=e()})(typeof window<"u"?window:commonjsGlobal,function(){function i(){}let e=i.prototype;return e.on=function(t,n){if(!t||!n)return this;let s=this._events=this._events||{},r=s[t]=s[t]||[];return r.includes(n)||r.push(n),this},e.once=function(t,n){if(!t||!n)return this;this.on(t,n);let s=this._onceEvents=this._onceEvents||{},r=s[t]=s[t]||{};return r[n]=!0,this},e.off=function(t,n){let s=this._events&&this._events[t];if(!s||!s.length)return this;let r=s.indexOf(n);return r!=-1&&s.splice(r,1),this},e.emitEvent=function(t,n){let s=this._events&&this._events[t];if(!s||!s.length)return this;s=s.slice(0),n=n||[];let r=this._onceEvents&&this._onceEvents[t];for(let l of s)r&&r[l]&&(this.off(t,l),delete r[l]),l.apply(this,n);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},i})}(evEmitter)),evEmitter.exports}/*!
 * Unidragger v3.0.1
 * Draggable base class
 * MIT license
 */var hasRequiredUnidragger;function requireUnidragger(){return hasRequiredUnidragger||(hasRequiredUnidragger=1,function(o){(function(i,e){o.exports?o.exports=e(i,requireEvEmitter()):i.Unidragger=e(i,i.EvEmitter)})(typeof window<"u"?window:commonjsGlobal,function(e,t){function n(){}let s=n.prototype=Object.create(t.prototype);s.handleEvent=function(y){let C="on"+y.type;this[C]&&this[C](y)};let r,l;"ontouchstart"in e?(r="touchstart",l=["touchmove","touchend","touchcancel"]):e.PointerEvent?(r="pointerdown",l=["pointermove","pointerup","pointercancel"]):(r="mousedown",l=["mousemove","mouseup"]),s.touchActionValue="none",s.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},s.unbindHandles=function(){this._bindHandles("removeEventListener","")},s._bindHandles=function(y,C){this.handles.forEach(T=>{T[y](r,this),T[y]("click",this),e.PointerEvent&&(T.style.touchAction=C)})},s.bindActivePointerEvents=function(){l.forEach(y=>{e.addEventListener(y,this)})},s.unbindActivePointerEvents=function(){l.forEach(y=>{e.removeEventListener(y,this)})},s.withPointer=function(y,C){C.pointerId===this.pointerIdentifier&&this[y](C,C)},s.withTouch=function(y,C){let T;for(let F of C.changedTouches)F.identifier===this.pointerIdentifier&&(T=F);T&&this[y](C,T)},s.onmousedown=function(y){this.pointerDown(y,y)},s.ontouchstart=function(y){this.pointerDown(y,y.changedTouches[0])},s.onpointerdown=function(y){this.pointerDown(y,y)};const u=["TEXTAREA","INPUT","SELECT","OPTION"],m=["radio","checkbox","button","submit","image","file"];return s.pointerDown=function(y,C){let T=u.includes(y.target.nodeName),F=m.includes(y.target.type),I=!T||F;!this.isPointerDown&&!y.button&&I&&(this.isPointerDown=!0,this.pointerIdentifier=C.pointerId!==void 0?C.pointerId:C.identifier,this.pointerDownPointer={pageX:C.pageX,pageY:C.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[y,C]))},s.onmousemove=function(y){this.pointerMove(y,y)},s.onpointermove=function(y){this.withPointer("pointerMove",y)},s.ontouchmove=function(y){this.withTouch("pointerMove",y)},s.pointerMove=function(y,C){let T={x:C.pageX-this.pointerDownPointer.pageX,y:C.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[y,C,T]),!this.isDragging&&this.hasDragStarted(T)&&this.dragStart(y,C),this.isDragging&&this.dragMove(y,C,T)},s.hasDragStarted=function(y){return Math.abs(y.x)>3||Math.abs(y.y)>3},s.dragStart=function(y,C){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[y,C])},s.dragMove=function(y,C,T){this.emitEvent("dragMove",[y,C,T])},s.onmouseup=function(y){this.pointerUp(y,y)},s.onpointerup=function(y){this.withPointer("pointerUp",y)},s.ontouchend=function(y){this.withTouch("pointerUp",y)},s.pointerUp=function(y,C){this.pointerDone(),this.emitEvent("pointerUp",[y,C]),this.isDragging?this.dragEnd(y,C):this.staticClick(y,C)},s.dragEnd=function(y,C){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[y,C])},s.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},s.onpointercancel=function(y){this.withPointer("pointerCancel",y)},s.ontouchcancel=function(y){this.withTouch("pointerCancel",y)},s.pointerCancel=function(y,C){this.pointerDone(),this.emitEvent("pointerCancel",[y,C])},s.onclick=function(y){this.isPreventingClicks&&y.preventDefault()},s.staticClick=function(y,C){let T=y.type==="mouseup";T&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[y,C]),T&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},n})}(unidragger)),unidragger.exports}/*!
 * Draggabilly v3.0.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(o){(function(i,e){o.exports?o.exports=e(i,requireGetSize(),requireUnidragger()):i.Draggabilly=e(i,i.getSize,i.Unidragger)})(typeof window<"u"?window:commonjsGlobal,function(e,t,n){function s(){}let r=e.jQuery;function l(I,G){this.element=typeof I=="string"?document.querySelector(I):I,r&&(this.$element=r(this.element)),this.options={},this.option(G),this._create()}let u=l.prototype=Object.create(n.prototype);u.option=function(I){this.options={...this.options,...I}};const m=["relative","absolute","fixed"];u._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition={...this.position};let I=getComputedStyle(this.element);m.includes(I.position)||(this.element.style.position="relative"),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.setHandles(),this.enable()},u.setHandles=function(){let{handle:I}=this.options;typeof I=="string"?this.handles=this.element.querySelectorAll(I):typeof I=="object"&&I.length?this.handles=I:I instanceof HTMLElement?this.handles=[I]:this.handles=[this.element]};const y=["dragStart","dragMove","dragEnd"];let C=u.emitEvent;u.emitEvent=function(I,G){if(!this.isEnabled&&y.includes(I))return;C.call(this,I,G);let le=e.jQuery;if(!le||!this.$element)return;let xe,se=G;G&&G[0]instanceof Event&&([xe,...se]=G);let g=le.Event(xe);g.type=I,this.$element.trigger(g,se)},u._getPosition=function(){let I=getComputedStyle(this.element),G=this._getPositionCoord(I.left,"width"),Y=this._getPositionCoord(I.top,"height");this.position.x=isNaN(G)?0:G,this.position.y=isNaN(Y)?0:Y,this._addTransformPosition(I)},u._getPositionCoord=function(I,G){if(I.includes("%")){let Y=t(this.element.parentNode);return Y?parseFloat(I)/100*Y[G]:0}return parseInt(I,10)},u._addTransformPosition=function(I){let G=I.transform;if(!G.startsWith("matrix"))return;let Y=G.split(","),le=G.startsWith("matrix3d")?12:4,xe=parseInt(Y[le],10),se=parseInt(Y[le+1],10);this.position.x+=xe,this.position.y+=se},u.handlePointerDown=function(I,G){this.isEnabled&&(this.pointerDownPointer={pageX:G.pageX,pageY:G.pageY},I.preventDefault(),document.activeElement.blur(),this.bindActivePointerEvents(I),this.element.classList.add("is-pointer-down"))},u.handleDragStart=function(){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.animate())},u.measureContainment=function(){let I=this.getContainer();if(!I)return;let G=t(this.element),Y=t(I),{borderLeftWidth:le,borderRightWidth:xe,borderTopWidth:se,borderBottomWidth:we}=Y,g=this.element.getBoundingClientRect(),Ue=I.getBoundingClientRect(),Qe=le+xe,ke=se+we,me=this.relativeStartPosition={x:g.left-(Ue.left+le),y:g.top-(Ue.top+se)};this.containSize={width:Y.width-Qe-me.x-G.width,height:Y.height-ke-me.y-G.height}},u.getContainer=function(){let I=this.options.containment;return I?I instanceof HTMLElement?I:typeof I=="string"?document.querySelector(I):this.element.parentNode:void 0},u.handleDragMove=function(I,G,Y){if(!this.isEnabled)return;let le=Y.x,xe=Y.y,se=this.options.grid,we=se&&se[0],g=se&&se[1];le=T(le,we),xe=T(xe,g),le=this.containDrag("x",le,we),xe=this.containDrag("y",xe,g),le=this.options.axis=="y"?0:le,xe=this.options.axis=="x"?0:xe,this.position.x=this.startPosition.x+le,this.position.y=this.startPosition.y+xe,this.dragPoint.x=le,this.dragPoint.y=xe};function T(I,G,Y){return G?(Y=Y||"round",Math[Y](I/G)*G):I}u.containDrag=function(I,G,Y){if(!this.options.containment)return G;let le=I=="x"?"width":"height",xe=this.relativeStartPosition[I],se=T(-xe,Y,"ceil"),we=this.containSize[le];return we=T(we,Y,"floor"),Math.max(se,Math.min(we,G))},u.handlePointerUp=function(){this.element.classList.remove("is-pointer-down")},u.handleDragEnd=function(){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"))},u.animate=function(){this.isDragging&&(this.positionDrag(),requestAnimationFrame(()=>this.animate()))},u.setLeftTop=function(){let{x:I,y:G}=this.position;this.element.style.left=`${I}px`,this.element.style.top=`${G}px`},u.positionDrag=function(){let{x:I,y:G}=this.dragPoint;this.element.style.transform=`translate3d(${I}px, ${G}px, 0)`},u.setPosition=function(I,G){this.position.x=I,this.position.y=G,this.setLeftTop()},u.enable=function(){this.isEnabled||(this.isEnabled=!0,this.bindHandles())},u.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.isDragging&&this.dragEnd(),this.unbindHandles())};const F=["transform","left","top","position"];return u.destroy=function(){this.disable(),F.forEach(I=>{this.element.style[I]=""}),this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},u._init=s,r&&r.bridget&&r.bridget("draggabilly",l),l})})(draggabilly);var draggabillyExports=draggabilly.exports;const Draggabilly=getDefaultExportFromCjs(draggabillyExports),TAB_CONTENT_MARGIN=9,TAB_CONTENT_OVERLAP_DISTANCE=1,TAB_CONTENT_MIN_WIDTH=24,TAB_CONTENT_MAX_WIDTH=240,TAB_SIZE_SMALL=84,TAB_SIZE_SMALLER=60,TAB_SIZE_MINI=48,noop=o=>{},closest=(o,i)=>{let e=1/0,t=-1;return i.forEach((n,s)=>{Math.abs(o-n)<e&&(e=Math.abs(o-n),t=s)}),t},tabTemplate=`
    <div class="chrome-tab">
      <div class="chrome-tab-dividers"></div>
      <div class="chrome-tab-background">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"><defs><symbol id="chrome-tab-geometry-left" viewBox="0 0 214 36"><path d="M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"/></symbol><symbol id="chrome-tab-geometry-right" viewBox="0 0 214 36"><use xlink:href="#chrome-tab-geometry-left"/></symbol><clipPath id="crop"><rect class="mask" width="100%" height="100%" x="0"/></clipPath></defs><svg width="52%" height="100%"><use xlink:href="#chrome-tab-geometry-left" width="214" height="36" class="chrome-tab-geometry"/></svg><g transform="scale(-1, 1)"><svg width="52%" height="100%" x="-100%" y="0"><use xlink:href="#chrome-tab-geometry-right" width="214" height="36" class="chrome-tab-geometry"/></svg></g></svg>
      </div>
      <div class="chrome-tab-content">
        <div class="chrome-tab-favicon"></div>
        <div class="chrome-tab-title"></div>
        <div class="chrome-tab-drag-handle"></div>
        <div class="chrome-tab-close"></div>
      </div>
    </div>
  `,defaultTapProperties={title:"New tab",favicon:!1};let instanceId=0;class ChromeTabs{constructor(){this.draggabillies=[],this.tabs=[]}static init(i){this.el=i,this.instanceId=instanceId,this.el.setAttribute("data-chrome-tabs-instance-id",this.instanceId),instanceId+=1,this.setupCustomProperties(),this.setupStyleEl(),this.setupEvents(),this.layoutTabs(),this.setupDraggabilly()}static emit(i,e){this.el.dispatchEvent(new CustomEvent(i,{detail:e}))}static setupCustomProperties(){this.el.style.setProperty("--tab-content-margin",`${TAB_CONTENT_MARGIN}px`)}static setupStyleEl(){this.styleEl=document.createElement("style"),this.el.appendChild(this.styleEl)}static setupEvents(){window.addEventListener("resize",i=>{this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs()}),this.el.addEventListener("dblclick",i=>{[this.el,this.tabContentEl].includes(i.target)&&this.addTab()}),this.tabEls.forEach(i=>this.setTabCloseEventListener(i))}static get tabEls(){return Array.prototype.slice.call(this.el.querySelectorAll(".chrome-tab"))}static get tabContentEl(){return this.el.querySelector(".chrome-tabs-content")}static get tabContentWidths(){const i=this.tabEls.length,e=this.tabContentEl.clientWidth,t=(i-1)*TAB_CONTENT_OVERLAP_DISTANCE,n=(e-2*TAB_CONTENT_MARGIN+t)/i,s=Math.max(TAB_CONTENT_MIN_WIDTH,Math.min(TAB_CONTENT_MAX_WIDTH,n)),r=Math.floor(s),l=r*i+2*TAB_CONTENT_MARGIN-t,u=e-l,m=[];let y=u;for(let C=0;C<i;C+=1){const T=r<TAB_CONTENT_MAX_WIDTH&&y>0?1:0;m.push(r+T),y>0&&(y-=1)}return m}static get tabContentPositions(){const i=[],e=this.tabContentWidths;let t=TAB_CONTENT_MARGIN;return e.forEach((n,s)=>{const r=s*TAB_CONTENT_OVERLAP_DISTANCE;i.push(t-r),t+=n}),i}static get tabPositions(){const i=[];return this.tabContentPositions.forEach(e=>{i.push(e-TAB_CONTENT_MARGIN)}),i}static layoutTabs(){const i=this.tabContentWidths;this.tabEls.forEach((t,n)=>{const s=i[n],r=s+2*TAB_CONTENT_MARGIN;t.style.width=r+"px",t.removeAttribute("is-small"),t.removeAttribute("is-smaller"),t.removeAttribute("is-mini"),s<TAB_SIZE_SMALL&&t.setAttribute("is-small",""),s<TAB_SIZE_SMALLER&&t.setAttribute("is-smaller",""),s<TAB_SIZE_MINI&&t.setAttribute("is-mini","")});let e="";this.tabPositions.forEach((t,n)=>{e+=`
          .chrome-tabs[data-chrome-tabs-instance-id="${this.instanceId}"] .chrome-tab:nth-child(${n+1}) {
            transform: translate3d(${t}px, 0, 0)
          }
        `}),this.styleEl.innerHTML=e}static createNewTabEl(){const i=document.createElement("div");return i.innerHTML=tabTemplate,i.firstElementChild}static addTab(i,{animate:e=!0,background:t=!1}={}){const n=this.createNewTabEl();return e&&(n.classList.add("chrome-tab-was-just-added"),setTimeout(()=>n.classList.remove("chrome-tab-was-just-added"),500)),i=Object.assign({},defaultTapProperties,i),this.tabContentEl.appendChild(n),this.setTabCloseEventListener(n),this.updateTab(n,i),this.emit("tabAdd",{tabEl:n}),t||this.setCurrentTab(n),this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly(),this.tabs.push({ul:n,content:i.content}),n}static setTabCloseEventListener(i){i.querySelector(".chrome-tab-close").addEventListener("click",e=>this.removeTab(i))}static get activeTabEl(){return this.el.querySelector(".chrome-tab[active]")}static hasActiveTab(){return!!this.activeTabEl}static setCurrentTab(i,e){const t=this.activeTabEl;if(t===i)return;t&&t.removeAttribute("active"),i.setAttribute("active",""),this.emit("activeTabChange",{tabEl:i});const n=this.tabs.find(s=>s.ul===i);n!=null&&(e||n.content.Focus())}static removeTab(i){let e=this.tabs.findIndex(n=>n.ul===i);if(e!==-1){const n=this.tabs[e];if(n!=null){var t;if(!this.Dirty){i===this.activeTabEl&&(i.nextElementSibling?this.setCurrentTab(i.nextElementSibling):i.previousElementSibling&&this.setCurrentTab(i.previousElementSibling)),i!=null&i.parentNode!=null&&(i.parentNode.removeChild(i),this.emit("tabRemove",{tabEl:i})),n.content.Dispose();return}n.content._confirm=(t=new Core.Components.Forms.ConfirmDialog,t.Content="Do you want to save the data before closing?",t.OpenEditForm=n.content,t.TabEditor=n.content.TabEditor,t),n.content._confirm.YesConfirmed=Bridge.fn.combine(n.content._confirm.YesConfirmed,Bridge.fn.bind(this,function(){var s=0,r,l=Bridge.fn.bind(this,function(){for(;;)switch(s=System.Array.min([0,1],s),s){case 0:{if(r=n.content._confirm.OpenEditForm.Save(),s=1,r.isCompleted())continue;r.continue(l);return}case 1:{r.getAwaitedResult(),i===this.activeTabEl&&(i.nextElementSibling?this.setCurrentTab(i.nextElementSibling):i.previousElementSibling&&this.setCurrentTab(i.previousElementSibling)),i!=null&i.parentNode!=null&&(i.parentNode.removeChild(i),this.emit("tabRemove",{tabEl:i})),n.content._confirm.OpenEditForm.Dispose(),n.content._confirm.Dispose();return}default:return}},arguments);l()})),this._confirm.NoConfirmed=Bridge.fn.combine(this._confirm.NoConfirmed,Bridge.fn.bind(this,function(){this._confirm.OpenEditForm.Dispose(),this._confirm.Dispose()})),this._confirm.IgnoreCancelButton=!0,this._confirm.Render()}}this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly()}static updateTab(i,e){i.querySelector(".chrome-tab-title").textContent=e.title;const t=i.querySelector(".chrome-tab-favicon");e.favicon?(e.favicon.includes("fa-")?t.className=e.favicon:t.style.backgroundImage=`url('${e.favicon}')`,t.removeAttribute("hidden","")):(t.setAttribute("hidden",""),t.removeAttribute("style")),e.id&&i.setAttribute("data-tab-id",e.id)}static cleanUpPreviouslyDraggedTabs(){this.tabEls.forEach(i=>i.classList.remove("chrome-tab-was-just-dragged"))}static setupDraggabilly(){const i=this.tabEls,e=this.tabPositions;this.isDragging&&(this.isDragging=!1,this.el.classList.remove("chrome-tabs-is-sorting"),this.draggabillyDragging.element.classList.remove("chrome-tab-is-dragging"),this.draggabillyDragging.element.style.transform="",this.draggabillyDragging.dragEnd(),this.draggabillyDragging.isDragging=!1,this.draggabillyDragging.positionDrag=noop,this.draggabillyDragging.destroy(),this.draggabillyDragging=null),this.draggabillies.forEach(t=>t.destroy()),i.forEach((t,n)=>{const s=e[n],r=new Draggabilly(t,{axis:"x",handle:".chrome-tab-drag-handle",containment:this.tabContentEl});this.draggabillies.push(r),r.on("pointerDown",l=>{this.setCurrentTab(t)}),r.on("dragStart",l=>{this.isDragging=!0,this.draggabillyDragging=r,t.classList.add("chrome-tab-is-dragging"),this.el.classList.add("chrome-tabs-is-sorting")}),r.on("dragEnd",l=>{this.isDragging=!1;const u=parseFloat(t.style.left,10);t.style.transform="translate3d(0, 0, 0)",requestAnimationFrame(m=>{t.style.left="0",t.style.transform=`translate3d(${u}px, 0, 0)`,requestAnimationFrame(y=>{t.classList.remove("chrome-tab-is-dragging"),this.el.classList.remove("chrome-tabs-is-sorting"),t.classList.add("chrome-tab-was-just-dragged"),requestAnimationFrame(C=>{t.style.transform="",this.layoutTabs(),this.setupDraggabilly()})})})}),r.on("dragMove",(l,u,m)=>{const y=this.tabEls,C=y.indexOf(t),T=s+m.x,F=closest(T,e),I=Math.max(0,Math.min(y.length,F));C!==I&&this.animateTabMove(t,C,I)})})}static animateTabMove(i,e,t){t<e?i.parentNode.insertBefore(i,this.tabEls[t]):i.parentNode.insertBefore(i,this.tabEls[t+1]),this.emit("tabReorder",{tabEl:i,originIndex:e,destinationIndex:t}),this.layoutTabs()}}h(ChromeTabs,"draggabillies",[]),h(ChromeTabs,"tabs",[]);const je=class je extends EditForm{constructor(e=null){super(e);h(this,"Popup",!1);h(this,"IsTab",!0);h(this,"PopUpMenu");this.PopulateDirty=!1,this._hotKeyComponents=[],this.DataSearchEntry={}}get Show(){return super.Show}set Show(e){super.Show=e,e&&!this.Popup&&ChromeTabs.setCurrentTab(this._li,this.Pop)}Render(){this.ParentElement||(this.ParentElement=je.TabContainer),this.Popup?this.RenderPopup():this.RenderTab(),this.Focus()}get TabTitle(){var e;return((e=this.Meta)==null?void 0:e.Label)??this.Title}RenderTab(){Html.Take(je.TabWrapper),this._li=ChromeTabs.addTab({title:this.Meta.Title==null?this.TabTitle:this.Title,favicon:this.Meta.Icon==null?this.Meta.Icon:this.Icon,content:this}),Html.Take(je.TabContainer).TabIndex(-1).Trigger(EventType.Focus).Div.Event(EventType.KeyDown,e=>this.HotKeyHandler(e)).Render(),this.Element=Html.Context,this.ParentElement=je.TabContainer,je.Tabs.push(this),super.Render()}RenderPopup(){var e;Html.Take(this.ParentElement??((e=this.Parent)==null?void 0:e.Element)??je.TabContainer).Div.ClassName("backdrop").TabIndex(-1).Trigger(EventType.Focus).Event(EventType.KeyDown,t=>this.HotKeyHandler(t)),this._backdrop=Html.Context,Html.Instance.Div.ClassName("popup-content").Div.ClassName("popup-title").Span.IText(this.Title),this.TitleElement=Html.Context,Client.Instance.SystemRole&&this.TitleElement.addEventListener("contextmenu",t=>this.SysConfigMenu(t,null,null,null)),Html.Instance.End.Div.ClassName("menu-item"),this.PopUpMenu=Html.Context,Html.Instance.End.End.Div.ClassName("popup-body"),this.Element=Html.Context,super.Render(),this._backdrop.OutOfViewport().Top&&this._backdrop.scrollIntoView(!0)}TriggerMatchHotKey(e,t,n,s,r){if(t==null)return;let l=[];n&&l.push(KeyCodeEnum.Shift),s&&l.push(KeyCodeEnum.Ctrl),r&&l.push(KeyCodeEnum.Alt),t<KeyCodeEnum.Shift?l.unshift(t):t>KeyCodeEnum.Alt&&l.push(t),this._hotKeyComponents=this._hotKeyComponents||this.FilterChildren(u=>u instanceof Button&&u.Meta.HotKey.trim()!=="").map(u=>u),this._hotKeyComponents.forEach(u=>{var F;let m=u.Meta.HotKey.split(",");if(m.length===0)return;let C=m[m.length-1].split("-").map(I=>{let G=KeyCodeEnum[I.trim()];return G||null}).filter(I=>I!=null).sort((I,G)=>I-G);JSON.stringify(l)===JSON.stringify(C)&&(e.preventDefault(),e.stopPropagation(),(F=u.Element)==null||F.click())})}HotKeyHandler(e){var u;const t=e.KeyCodeEnum();if(t===KeyCodeEnum.F6){let m=this.FindActiveComponent(y=>y instanceof GridView$1).FirstOrDefault();if(m instanceof GridView$1){m&&!m.AllListViewItem.some(y=>y.Selected)&&(m.AllListViewItem.length?m.AllListViewItem[0].Focus():m.ListViewSearch.Focus());return}}if(e.AltKey()&&t===KeyCodeEnum.GraveAccent){if(je.Tabs.length<=1)return;let m=je.Tabs.indexOf(this);if(m=m>=je.Tabs.length-1?0:m+1,m<0||m>je.Tabs.length)return;(u=je.Tabs[m])==null||u.Focus()}const n=e.ShiftKey(),s=e.CtrlOrMetaKey(),r=e.AltKey();if(this.DefaultHotKeys(t,n,s,r)){e.preventDefault(),e.stopPropagation();return}t>=KeyCodeEnum.Shift&&t<=KeyCodeEnum.Alt||this.TriggerMatchHotKey(e,t,n,s,r)}DefaultHotKeys(e,t,n,s){var r;if(!e)return!1;if(e===KeyCodeEnum.Escape&&!t&&!n&&!s)return this.DirtyCheckAndCancel(),!0;if(n&&s&&(e===KeyCodeEnum.LeftArrow||e===KeyCodeEnum.RightArrow)){let l=je.Tabs.indexOf(this);return l=e===KeyCodeEnum.LeftArrow?l===0?je.Tabs.length-1:l-1:l>=je.Tabs.length-1?0:l+1,l<0||l>je.Tabs.length?!1:((r=je.Tabs[l])==null||r.Focus(),!0)}if(n&&t&&e===KeyCodeEnum.F){let l=this.FindActiveComponent(u=>u instanceof ListView).FirstOrDefault();if(l instanceof ListView)return!l||!l.Meta.CanSearch||l.ListViewSearch.AdvancedSearch(null),!0}return!1}Focus(){this.Popup||(je.Tabs.forEach(e=>e.Show=!1),this.FeatureName&&(this.Href=Client.BaseUri+"/"+this.FeatureName+(this.EntityId?`?Id=${this.EntityId}`:""),window.history.pushState(null,LangSelect.Get(this.TabTitle),this.Href))),this.Show=!0,document.title=LangSelect.Get(this.TabTitle)}Close(e){var s,r;const t=parseInt((s=e.which)==null?void 0:s.toString()),n=parseInt((r=e.button)==null?void 0:r.toString());(t===2||n===1)&&(e.preventDefault(),this.DirtyCheckAndCancel())}Dispose(){!this.Popup&&this._li&&this.DisposeTab(),super.Dispose()}DisposeTab(){this.ParentForm&&(this.ParentForm.focus(),this.ParentForm=null),je.Tabs=je.Tabs.filter(t=>t!==this);let e=ChromeTabs.tabs.findIndex(t=>t.ul===this._li);e!==-1&&ChromeTabs.tabs.splice(e,1),ChromeTabs.tabs.length==0&&window.history.pushState({page:null},"Home",window.location.origin||"")}RemoveDOM(){var e,t,n,s;(e=this.Element)==null||e.remove(),(t=this._li)==null||t.remove(),(n=this._backdrop)==null||n.remove(),(s=this._backdropGridView)==null||s.remove()}};h(je,"TabWrapper",document.getElementById("tabs")),h(je,"TabContainer",document.getElementById("tab-content")),h(je,"Tabs",[]),h(je,"ActiveTab",()=>je.Tabs.find(e=>e.Show)),h(je,"FindTab",e=>je.Tabs.find(t=>t.Id===e)),h(je,"ShowTabText"),h(je,"ActiveClass","active");let TabEditor=je;const tabEditor=Object.freeze(Object.defineProperty({__proto__:null,TabEditor},Symbol.toStringTag,{value:"Module"}));class ComponentExt{constructor(){h(this,"StepPx",10)}static MapToPatch(i,e=null,t=null){const n={Table:e,Changes:[]};return Utils$1.ForEachProp(i,(s,r)=>{s.startsWith("$")||t&&!t.includes(s)||n.Changes.push({Field:s,Value:r==null?void 0:r.toString()})}),n}static MapToFilterOperator(i,e){if(!e||!i.FieldName)return"";e=e.trim();let t=i.DisplayField?`JSON_VALUE(ds.[${i.DisplayField}], '$.${i.DisplayDetail}')`:`ds.[${i.FieldName}]`;if(!t)return"";if(i.ComponentType===ComponentType.Datepicker){let n=Date.parse(e);if(!Number.isNaN(n)){const r=new Date(n).toISOString();return`cast(${t} as date) = cast('${r}' as date)`}return""}else{if(i.ComponentType===ComponentType.Checkbox)return`${t} = ${!!e}`;if(i.ComponentType===ComponentType.Numbox){const n=parseFloat(e);return isNaN(n)?"":`${t} = ${n}`}}return i.FilterTemplate?`${i.FilterTemplate.replace(/\{0\}/g,e)}`:`charindex(N'${e}', ${t}) >= 1`}static async InitFeatureByName(i,e=!0){const t=await this.LoadFeature(i);if(!t)throw new Error("Feature not found");const n=new TabEditor(t.EntityName);return t.Script&&ComponentExt.AssignMethods(t,n),EditForm.Portal=e,n.Meta=t,n.Name=t.Name||"",n.Id=t.Name+t.Id,n.Icon=t.Icon,n.Render(),n}static LoadFeature(i,e=null){return new Promise((t,n)=>{Client.Instance.SubmitAsync({Url:"/api/feature/getFeature?name="+i,IsRawString:!0,Method:"GET"}).then(r=>{t(r)}).catch(r=>n(r))})}static LoadPublicFeature(i,e=null){return new Promise((t,n)=>{Client.Instance.SubmitAsync({Url:"/api/feature/getPublicFeature?name="+i,IsRawString:!0,Method:"GET"}).then(r=>{t(r)}).catch(r=>n(r))})}static AssignMethods(i,e){const t=new Function("return "+i.Script)();Object.assign(e,t),typeof e.Init=="function"&&e.Init()}static FindComponentEvent(i,e){let t=i.ParentForm;for(;t!==null&&!t[e];)t=t.ParentForm;return t}static SetShow(i,e,...t){i.Children.filter(n=>t.includes(n.Name)).forEach(n=>n.Show=e)}static AlterPosition(i,e){if(!i||!e)return;const t=e.getBoundingClientRect();var n=t.bottom;i.style.top="auto",i.style.right="auto",i.style.bottom="auto",i.style.left="auto",Html.Take(i).Floating(n,t.left);const s={Right:t.right>window.innerWidth,Bottom:t.bottom>window.innerHeight};s.Right&&(s.Bottom?t.Top>i.ClientHeight?this.TopCenter(i,parentEle):t.Left>i.ClientWidth&&this.LeftMiddle(i,parentEle):this.BottomCenter(i,parentEle)),s.Bottom&&(this.RightMiddle(i,parentEle),s.Right&&this.LeftMiddle(i,parentEle),s.Left&&this.TopCenter(i,parentEle))}static BottomCenter(i,e){const t=e.getBoundingClientRect();i.style.right="auto",i.style.top=t.bottom+"px",PositionUtils.MoveLeft(i)}static GetComputedPx(i,e){const t=window.getComputedStyle(i)[e];return t&&parseFloat(t.replace("px",""))||0}static TopCenter(i,e){i.style.right="auto",PositionUtils.MoveLeft(i),PositionUtils.MoveTop(i,e)}static MoveLeft(i){for(;PositionUtils.IsOutOfViewport(i).right;){const e=PositionUtils.GetComputedPx(i,"left")-this.StepPx;i.style.left=e+"px"}}static MoveTop(i,e){const t=e?e.getBoundingClientRect().top:null;for(;PositionUtils.IsOutOfViewport(i).bottom||e&&i.getBoundingClientRect().bottom>t;){const n=PositionUtils.GetComputedPx(i,"top")-(e?1:this.StepPx);i.style.top=n+"px"}}static LeftMiddle(i,e){const t=e.getBoundingClientRect();i.style.left="auto",i.style.bottom="auto",i.style.right=t.left+"px",this.MoveTop(i)}static RightMiddle(i,e){const t=e.getBoundingClientRect();i.style.right="auto",i.style.bottom="auto",i.style.left=t.right+"px",this.MoveTop(i)}static IsOutOfViewport(i){const e=i.getBoundingClientRect();return{top:e.top<0,right:e.right>(window.innerWidth||document.documentElement.clientWidth),bottom:e.bottom>(window.innerHeight||document.documentElement.clientHeight),left:e.left<0}}static DownloadFile(i,e){const t=document.createElement("a");t.style.display="none",t.href=URL.createObjectURL(e),t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}static FullScreen(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()}static FindClosest(i,e){if(i instanceof e)return i;for(;i.Parent!=null;)if(i=i.Parent,i instanceof e)return i;return null}static async OpenTabOrPopup(i,e){const t=await __vitePreload(()=>Promise.resolve().then(()=>editableComponent),void 0),{EditForm:n}=await __vitePreload(async()=>{const{EditForm:l}=await Promise.resolve().then(()=>editForm);return{EditForm:l}},void 0),{TabEditor:s}=await __vitePreload(async()=>{const{TabEditor:l}=await Promise.resolve().then(()=>tabEditor);return{TabEditor:l}},void 0);let r;i instanceof n?r=i:i instanceof t.default&&(r=n||this.FindClosest(i,n)),e instanceof s&&(e.Popup?i.AddChild(e):e.Render(),e.ParentForm=r,e.OpenFrom=r instanceof n&&(r==null?void 0:r.FirstOrDefault(l=>l.Entity===e.Entity)))}async OpenTabOrPopup(i,e){var s;const{EditForm:t}=await __vitePreload(async()=>{const{EditForm:r}=await Promise.resolve().then(()=>editForm);return{EditForm:r}},void 0);let n;i instanceof t?n=i:n=i.EditForm||i.FindClosest(r=>r instanceof t),e.Popup?i.AddChild(e):e.Render(),e.ParentForm=n,e.OpenFrom=(s=n==null?void 0:n.FilterChildren(r=>r.Entity===e.Entity))==null?void 0:s[0]}static async OpenTab(i,e,t,n,s=!1,r=!1){const l=await __vitePreload(()=>Promise.resolve().then(()=>tabEditor),void 0);if(!s&&l.TabEditor.FindTab(e)){const y=l.TabEditor.FindTab(e);return y.Focus(),y}const u=await this.LoadFeature(t),m=n();return m.Popup=s,m.Name=t,m.Id=e,m.Meta=u,this.AssignMethods(u,m),await this.OpenTabOrPopup(i,m),m}static OpenPopup(i,e,t,n=!1,s=!1){const r=()=>{let l=0,u=JSON.stringify(i);for(let m=0;m<u.length;m++){const y=u.charCodeAt(m);l=(l<<5)-l+y,l|=0}return l};return this.OpenTab(i,r().toString(),e,t,!0,n)}}class Label extends EditableComponent{constructor(i,e=null){super(i,e)}Render(){this.SetDefaultVal();const i=this.Entity[this.Meta.FieldName];let e="";if(this.Element||this.RenderNewEle(e,i),this.Meta&&this.Meta.ComponentType=="Checkbox"){this.Element.InnerHTML=i?"✅":"☐";return}if(Utils$1.isNullOrWhiteSpace(this.Meta.Query))e=this.CalcCellText(i),this.UpdateEle(e);else{var t=Utils$1.IsFunction(this.Meta.Query);if(this.Meta.Query){this.QueryCellText(t);return}}}RenderCellTextAsync(){}UpdateEle(i){this.Element.innerHTML=i,i.includes("<div")||this.Element.setAttribute("title",i)}RenderNewEle(i,e){Html.Take(this.ParentElement).TextAlign(this.CalcTextAlign(this.Meta,e)),i.includes("<div")?Html.Instance.Div.Render():Html.Instance.Span.Render(),Html.Instance.ClassName("cell-text").InnerHTML(i),this.Element=Html.Context,Html.Instance.End.Render()}CalcCellText(i){var t;var e=Utils$1.GetCellText(this.Meta,i,this.Entity,!1,this.EmptyRow,(t=this.EditForm)==null?void 0:t.Entity);return(!e||e=="null")&&(e=""),e}QueryCellText(i){if(!this.Meta.PreQuery||i===null)return;const e=Utils$1.IsFunction(this.Meta.PreQuery),t=e?e.call(this,this).toString():"",n={MetaConn:this.MetaConn,DataConn:this.DataConn,Params:JSON.stringify(t),ComId:this.Meta.Id};Client.Instance.SubmitAsync({Method:"POST",Url:Utils$1.ComQuery,Value:JSON.stringify(n)}).then(s=>{if(s.Nothing())return;const r=i.call(this,this,s).toString();this.UpdateEle(r,null,!1)})}LabelClickHandler(i){this.DispatchEvent(this.Meta.Events,"click",this.Entity)}CalcTextAlign(i,e){const t=i.TextAlignEnum;return t||(i.ReferenceId||e===null||typeof e=="string"?"left":typeof e=="number"?"right":"center")}UpdateView(i=!1,e=null,t){this.PrepareUpdateView(i,e),this.Render()}GetValueTextAct(){return this.Element.textContent}}class Paginator extends EditableComponent{constructor(e){super(null,null);h(this,"Parent");if(!e)throw new Error("paginationOptions is required");this.Entity=e,this.Options=e,this.Options.StartIndex=this.Options.StartIndex||1,this.Element=null,this.PopulateDirty=!1,this.AlwaysValid=!0}Render(){Html.Take(this.Parent.Element).Div.ClassName("grid-toolbar paging").Label.IText("Pagination").End.Render(),this.Element=Html.Context;var e=new Label({FieldName:"StartIndex"}),t=new Label({FieldName:"EndIndex"}),n=new Label({FieldName:"Total"}),s=new Numbox({FieldName:"PageNumber"});if(s.AlwaysValid=!0,s.SetSeclection=!1,!this.Options.Virtal){var r=new Numbox({FieldName:"PageSize"});r.SetSeclection=!1,this.AddChild(r),r.Element.addEventListener("change",this.ReloadListView),Html.Instance.End.Render()}Html.Instance.Div.Style("display: flex;").Render(),this.AddChild(e),Html.Instance.Text("-"),this.AddChild(t),Html.Instance.IText(" of "),this.AddChild(n),this.Options.Virtal||(Html.Take(this.Element).Ul.ClassName("pagination").Li.Text("❮").Event("click",this.PrevPage.bind(this)).End.Render(),this.AddChild(s),s.Element.addEventListener("change",()=>{this.Options.PageIndex=this.Options.PageNumber-1,this.ReloadListView()}),Html.Instance.End.Li.Text("❯").Event("click",this.NextPage.bind(this)).End.Render())}CreateNumberInput(e){const t=document.createElement("input");return t.type="number",t.value=this.Options[e],t.addEventListener("change",()=>{this.Options[e]=parseInt(t.value),this.ReloadListView()}),t}CreateLabel(e,t=""){const n=document.createElement("label");return n.textContent=t?t.replace("{0:n0}",this.Options[e].toLocaleString()):this.Options[e],n}NextPage(){const e=Math.ceil(this.Options.Total/this.Options.PageSize);this.Options.PageNumber>=e||(this.Options.PageIndex++,this.Options.ClickHandler&&this.Options.ClickHandler(this.Options.PageIndex,null),this.ReloadListView())}PrevPage(){this.Options.PageIndex<=0||(this.Options.PageIndex--,this.Options.ClickHandler&&this.Options.ClickHandler(this.Options.PageIndex,null),this.ReloadListView())}ReloadListView(){this.Parent instanceof ListView&&this.Parent.ActionFilter()}}var Pn;class TabComponent extends EditableComponent{constructor(e,t=null){super(e);h(this,"BadgeElement");h(this,"Badge");h(this,"_li");h(this,"DisplayBadge");li(this,Pn,!1)}set Show(e){this._li&&(super.Show=e,e?(this._li.classList.add("active"),this._li.querySelector("a").classList.add("active"),this.DispatchEvent(this.Meta.Events,"FocusIn",this.Entity).Done()):(this._li.classList.remove("active"),this._li.querySelector("a").classList.remove("active"),this.DispatchEvent(this.Meta.Events,"FocusOut",this.Entity).Done()))}Render(){Html.Take(this.Parent.Ul).Li.A.ClassName("nav-link tab-default").I.ClassName(this.Meta.Icon??"").End.Span.IText(this.Meta.Label??this.Meta.Name).Render(),Html.Instance.End.Span.ClassName("ml-1 badge badge-warning"),this.BadgeElement=Html.Context,this.DisplayBadge?Html.Instance.Text(this.Badge??""):this.BadgeElement.style.display="none",this._li=Html.Context.parentElement.parentElement,Html.Instance.End.Div.ClassName("desc").IText(this.Meta.Description??"").End.Render(),this._li.addEventListener("click",()=>{this.HasRendered?this.Focus():(this.Focus(),this.RenderTabContent())})}Focus(){this.Parent.Children.forEach(e=>{e.Show=!1}),this.Show=!0}RenderTabContent(){Html.Take(this.Parent.TabContent).Div.ClassName("tab-content"),this.Element=Html.Context,Section$1.RenderSection(this,this.Meta,null,this.EditForm),this.HasRendered=!0}}Pn=new WeakMap;class TabGroup extends EditableComponent{constructor(e,t=null){super(e);h(this,"ListViewType");h(this,"Ul");h(this,"TabContent");h(this,"ShouldCountBage");h(this,"HasRendered");h(this,"TabGroupElement");this.ListViewType=["ListView","GroupListView","GridView","GroupGridView"],this.Ul=null,this.TabContent=null,this.ShouldCountBage=!1,this.HasRendered=!1,this.TabGroup=!0}Render(){Html.Take(this.ParentElement).Div.ClassName("tab-group").ClassName(this.Meta.IsVertialTab?"tab-vertical":"tab-horizontal"),this.TabGroupElement=Html.Context,Html.Instance.Div.ClassName("headers-wrapper").Ul.ClassName("nav-config  nav nav-tabs nav-tabs-bottom mb-0"),this.Ul=Html.Context,Element=this.Ul.parentElement,Html.Instance.End.End.Render(),this.EditForm.ButtonFrozen!=null&&!this.EditForm.IsLoadButtonFrozen&&(Section$1.RenderGroupContent(this.Parent,this.EditForm.ButtonFrozen,this.EditForm.writePermission,this.EditForm.width),this.EditForm.IsLoadButtonFrozen=!0),Html.Instance.Div.ClassName("tabs-content"),this.TabContent=Html.Context}}var $t;let Section$1=($t=class extends EditableComponent{constructor(e,t=null){super(null,t);h(this,"_chevron");this.elementType=e,this.Element=t,this.innerEle=null,this._chevron=null}Render(){var e,t,n,s,r,l,u;if(this.elementType==null?this.elementType=(t=(e=this.Element)==null?void 0:e.tagName)==null?void 0:t.toLowerCase():(Html.Take(this.ParentElement).Add(this.elementType.tagName==null?this.elementType:(s=(n=this.elementType)==null?void 0:n.tagName)==null?void 0:s.toLowerCase()),this.Element=Html.Context),this.Meta!==null){if(this.Meta.Html&&this.Meta.Html!=""){let m=this.Meta.Css&&this.Meta.Css!="";const y=(((r=this.Meta.FieldName)==null?void 0:r.toLowerCase())??"")+this.Meta.Id;if(m){const T=/(?:^|[\s\r\n])\.([a-zA-Z0-9-_]+)/g;if(m=m.replace(T,F=>/\d/.test(F)||F.includes("minmax")?F:F.replace(/([.])/,`[${y}]$1`)),!document.head.querySelector("#"+y)){const F=document.createElement("style");F.id=y,F.appendChild(document.createTextNode(m)),document.head.appendChild(F)}}if(this.Element!=null){const T=Utils$1.GetHtmlCode(this.Meta.Html,[this.Entity])??"";this.Element.innerHTML=T}const C=!this.Meta.Id&&this.EditForm?this.EditForm.GetElementPolicies(this.Meta.Children.map(T=>T.Id).concat([...this.Meta.Id]),Utils$1.ComponentId):[];if(this.SplitChild(this.Element.children,C,y),this.Meta.Javascript)try{const F=new Function(this.Meta.Javascript).call(null,this.EditForm);for(const I in F)this[I]=F[I].bind(this)}catch(T){console.log(T.message)}this.RenderChildrenSection(this.Meta);return}this.Meta.IsDropDown&&(Html.Take(this.Element).ClassName("dd-wrap").Style("position: relative;").TabIndex(-1).Event(EventType.FocusOut,this.HideDetailIfButtonOnly).Button.ClassName("btn ribbon").IText(this.Meta.Label).Event(EventType.Click,this.DropdownBtnClick.bind(this)).Span.Text("▼").EndOf(ElementType.button).Div.ClassName("dropdown").TabIndex(-1).Render(),this.Meta.IsCollapsible===!0&&Html.Instance.Style("display: none;"),this.innerEle=Html.Context,this._chevron=(u=(l=this.innerEle)==null?void 0:l.previousElementSibling)==null?void 0:u.firstElementChild,this.Element=Html.Context),this.Meta.Responsive&&!this.Meta.IsTab||this.Meta.IsDropDown?this.RenderComponentResponsive(this.Meta):this.RenderComponent(this.Meta),this.RenderChildrenSection(this.Meta)}}SplitChild(e,t,n){var s,r,l;for(const u of e){if(u.setAttribute(n,""),u.dataset.name!==void 0){const m=new $t(ElementType.div,null);m.Element=u;const y=this.Meta.Children.find(G=>G.FieldName===u.dataset.name);if(u.removeAttribute("data-name"),!y||y.Hidden)continue;const C=t.filter(G=>G.RecordId===y.Id),T=!y.IsPrivate||C.every(G=>G.CanRead),F=!y.IsPrivate||C.every(G=>G.CanWrite);if(!T)continue;const I=ComponentFactory.GetComponent(y,this.EditForm);if(I==null)return;if(I.IsListView&&this.EditForm.ListViews.push(I),I.ParentElement=u,this.AddChild(I),I instanceof EditableComponent&&(I.Disabled=y.Disabled||this.Disabled||!F||I.Disabled),I.Element){if(y.ChildStyle){const G=Html.Context;Html.Take(I.Element).Style(y.ChildStyle),Html.Take(G)}y.ClassName&&I.Element.classList.add(y.ClassName),y.Row===1&&((l=(r=(s=I.ParentElement)==null?void 0:s.parentElement)==null?void 0:r.classList)==null||l.add("inline-label")),Client.Instance.SystemRole&&I.Element.addEventListener("contextmenu",G=>this.EditForm.SysConfigMenu(G,y,this.Meta,null))}y.Focus&&I.Focus()}if(u.dataset.click!==void 0){const m=u.dataset.click;u.removeAttribute("data-click"),u.addEventListener(EventType.Click,async()=>{let y=null;y=this[m];try{await y.apply(this.EditForm,[this])}catch(C){throw console.log(C.message),console.log(C.stack),C}})}}}HandleMeta(){if(!this.Meta.Html)return;const e=this.Meta.Css,t=this.Meta.Id,n=`${this.Meta.FieldName.toLowerCase()}${t}`;if(e){const s=`${n}-style`;if(!document.getElementById(s)){const r=document.createElement("style");r.id=s,r.textContent=e.replace(/(?:^|[\s\r\n])\.([a-zA-Z0-9-_]+)/g,(l,u)=>`.${n} ${u}`),document.head.appendChild(r)}}if(this.Element.innerHTML=Utils$1.GetHtmlCode(this.Meta.Html,[this.Entity]),this.Meta.Javascript)try{new Function("editForm",this.Meta.Javascript).call(this,this.EditForm)}catch(s){console.error("Error executing JavaScript:",s)}}get Chevron(){return this._chevron}set Chevron(e){this._chevron=e}RenderDropDown(){const e=document.createElement("button");e.className="btn ribbon",e.textContent=this.Meta.Label,e.addEventListener("click",this.DropdownBtnClick.bind(this));const t=document.createElement("span");t.textContent="▼",e.appendChild(t);const n=document.createElement("div");n.className="dropdown",n.style.display="none",n.tabIndex=-1,this.Element.appendChild(e),this.Element.appendChild(n),this.InnerEle=n,this.Chevron=t,this.Element.addEventListener("focusout",this.HideDetailIfButtonOnly.bind(this))}DropdownBtnClick(){const e=this.InnerEle.style.display!=="none";this.InnerEle.style.display=e?"none":"block",this.Chevron.textContent=e?"▼":"▲"}HideDetailIfButtonOnly(){this._isAllBtn===null&&(this._isAllBtn=Array.from(this.InnerEle.children).every(e=>e.tagName==="BUTTON")),this._isAllBtn&&(this.InnerEle.style.display="none",this.Chevron.textContent="▼")}static HasElementAndAll(e,t){return e===null||e.length===0?!1:e.every(t)}static RenderSection(e,t,n=null,s=null){s=s??e.EditForm;const r=s.GetElementPolicies([t.Id],Utils$1.ComponentGroupId),l=!t.IsPrivate||this.HasElementAndAll(r,I=>I.CanRead),u=!t.IsPrivate||this.HasElementAndAll(r,I=>I.CanWrite);if(!l)return null;let m=t.Width;const y=s.GetOuterColumn(t),C=s.GetInnerColumn(t.Parent);if(y>0&&C>0){const I=(y/C*100).toFixed(2);t.ItemInRow||(t.ItemInRow=2),m=y===C?"100%":`${I}%`}var F=this.RenderGroupContent(e,t,u,m,n,s);return F}static RenderGroupContent(e,t,n,s,r,l){var y,C;var u=l??e.EditForm;Html.Take(e.Element).Div.ClassName("section-item").Width(s).Div.ClassName(t.ClassName??"").Event(EventType.ContextMenu,T=>u.SysConfigMenu(T,null,t,null)),t.Label&&(Html.Instance.Label.ClassName("header").IText(t.Label),Html.Instance.End.Render()),(y=t.ClassName)!=null&&y.includes("ribbon")||Html.Instance.ClassName("panel").ClassName("group"),Html.Instance.Display(!t.Hidden).Style(t.Style||"");const m=new $t(null,Html.Context);return m.EditForm=u,m.Id=t.FieldName+t.Id,m.Name=t.FieldName,m.Meta=t,m.Disabled=e.Disabled||t.Disabled||!n||u.IsLock||m.Disabled,e.AddChild(m,null,t.ShowExp),Html.Take(e.Element),(C=m.DOMContentLoaded)==null||C.Invoke(),m}static RenderTabGroup(e,t,n=null){const s=e.Disabled||t.Disabled;e.EditForm.TabGroup||(e.EditForm.TabGroup=[]);var r=e.EditForm.TabGroup.find(m=>m.Name===t.TabGroup);if(r){var u=new TabComponent(t);u.Parent=r,u.ParentElement=r.Element,u.Entity=e.Entity,u.Meta=t,u.Name=t.Name,u.EditForm=e.EditForm,u.Disabled=s,r.Children.push(u),u.Render()}else{r=new TabGroup(t),r.Name=t.TabGroup,r.Parent=e,r.ParentElement=e.Element,r.Entity=n??e.Entity,r.Meta=t,r.EditForm=e.EditForm,r.Children=[],r.Disabled=s;var l=new TabComponent(t);l.Parent=r,l.Entity=e.Entity,l.Meta=t,l.Name=t.FieldName,l.EditForm=e.EditForm,l.Disabled=s,r.Children.push(l),e.EditForm.TabGroup.push(r),e.Children.push(r),r.Render(),l.Render(),l.RenderTabContent(),l.Focus(),l.ToggleShow(t.ShowExp),l.ToggleDisabled(t.DisabledExp)}}RenderChildrenSection(e){!e.Children||e.Children.length===0||e.Children.sort((t,n)=>t.Order-n.Order).forEach(t=>{t.IsTab?$t.RenderTabGroup(this,t):$t.RenderSection(this,t)})}ChangeLabel(e,t){clearTimeout(this._imeout),this._imeout=setTimeout(()=>{var n;this.SubmitLabelChanged("Component",t.Id,(n=e==null?void 0:e.target)==null?void 0:n.textContent)},1e3)}SubmitLabelChanged(e,t,n){var s=new PatchVM;s.Table=e,s.Changes=[{Field:this.IdField,Value:t},{Field:"Label",Value:n}],Client.Instance.PatchAsync(s).then(r=>{console.log("patch success")})}static SubmitLabelChanged(e,t,n){var s={Table:e,Changes:[{Field:"IdField",Value:t},{Field:"Component.Label",Value:n}]};Client.Instance.PatchAsync(s).Done()}static ChangeComponentGroupLabel(e,t){window.clearTimeout($t._imeout1),$t._imeout1=window.setTimeout(()=>{this.SubmitLabelChanged("Meta",t.Id,Utils$1.DecodeSpecialChar(e.target instanceof HTMLElement&&e.target.textContent))},1e3)}RenderComponentResponsive(e){if(e.Children==[])return;const t=Html.Instance,n=this.EditForm.GetElementPolicies(e.Children.map(l=>l.Id),Utils$1.ComponentId),s=this.EditForm.GetInnerColumn(e);s>0&&Html.Take(this.Element).ClassName("grid").Style(`grid-template-columns: repeat(${s}, 1fr)`);let r=0;e.Children.sort((l,u)=>l.Order-u.Order).forEach(l=>{if(l.Hidden)return;const u=n.filter(I=>I.RecordId===l.Id),m=!l.IsPrivate||u.every(I=>I.CanRead),y=!l.IsPrivate||u.every(I=>I.CanWrite);if(!m)return;Html.Take(this.Element);const C=l.Column||2;l.Label=l.Label||"";let T=null;l.ShowLabel&&(t.Div.IText(l.Label).TextAlign(r===0?"left":"right").Render(),T=Html.Context,t.End.Render());const F=ComponentFactory.GetComponent(l,this.EditForm);if(F!==null&&(F.IsListView&&(this.EditForm.ListViews.push(F),this.AddChild(F)),F instanceof EditableComponent)){if(F.Disabled=l.Disabled||this.Disabled||!y||this.EditForm.IsLock||F.Disabled,this.AddChild(F),F.Element!=null){if(l.ChildStyle){const I=Html.Context;Html.Take(F.Element).Style(l.ChildStyle),Html.Take(I)}l.ClassName&&F.Element.AddClass(l.ClassName),l.Row===1&&F.ParentElement.parentElement.AddClass("inline-label"),Client.Instance.SystemRole&&F.Element.AddEventListener("contextmenu",I=>this.EditForm.SysConfigMenu(I,l,e,F)),l.Focus&&F.Focus()}C<=s?(T!==null&&T.nextElementSibling!==null&&C!==2?T.nextElementSibling instanceof HTMLElement&&(T.nextElementSibling.style.gridColumn=`${r+2}/${r+C+1}`):F.Element!==null&&(F.Element.style.gridColumn=`${r+2}/${r+C+1}`),r+=C):r=0,r===s&&(r=0)}})}RenderCom(e,t,n){if(e.Hidden)return;const s=n.filter(T=>T.RecordId===e.Id),r=!e.IsPrivate||s.every(T=>T.CanRead),l=!e.IsPrivate||s.every(T=>T.CanWrite);var u=this.EditForm.GetInnerColumn(e);if(!r)return;Html.Take(this.Element);const m=e.Column||2;e.Label=e.Label||"";let y=null;e.ShowLabel&&(Html.Div.IText(e.Label).TextAlign(t===0?"left":"right").Render(),y=Html.Context,Html.End.Render());const C=ComponentFactory.GetComponent(e,this.EditForm);if(C!==null){if(C.IsListView&&this.EditForm.ListViews.push(C),this.AddChild(C),C instanceof EditableComponent&&(C.Disabled=e.Disabled||this.Disabled||!l||this.EditForm.IsLock||C.Disabled),C.Element){if(e.ChildStyle){const T=Html.Context;Html.Take(C.Element).Style(e.ChildStyle),Html.Take(T)}e.ClassName&&C.Element.classList.add(e.ClassName),e.Row===1&&C.ParentElement.parentElement.classList.add("inline-label"),Client.SystemRole&&C.Element.addEventListener("contextmenu",T=>this.EditForm.SysConfigMenu(T,e,e,C))}e.Focus&&C.Focus(),m<=u?(y&&y.nextElementSibling&&m!==2?y.nextElementSibling instanceof HTMLElement&&(y.nextElementSibling.style.gridColumn=`${t+2}/${t+m+1}`):C.Element&&(C.Element.style.gridColumn=`${t+2}/${t+m+1}`),t+=m):t=0,t===u&&(t=0)}}async ComponentProperties(e){const{ComponentBL:t}=await __vitePreload(async()=>{const{ComponentBL:r}=await import("./componentEditor-D71Vom46.js");return{ComponentBL:r}},__vite__mapDeps([3,1])),{EditForm:n}=await __vitePreload(async()=>{const{EditForm:r}=await Promise.resolve().then(()=>editForm);return{EditForm:r}},void 0);var s=new t({Entity:e,ParentElement:this.Element,OpenFrom:this.FindClosest(r=>r instanceof n)});this.AddChild(s)}RenderComponent(e){var s;if(!e.Components||e.Components.length==0)return;(s=e.ClassName)!=null&&s.includes("ribbon-group")&&this.EditForm.Popup&&Html.Take(this.EditForm.PopUpMenu),Html.Table.ClassName("ui-layout").TBody.TRow.Render();let t=0;const n=this.EditForm.GetElementPolicies(e.Components.map(r=>r.Id),Utils$1.ComponentId);e.Components.sort((r,l)=>r.Order-l.Order).forEach(r=>{if(r.Hidden)return;const l=n.filter(T=>T.RecordId===r.Id),u=!r.IsPrivate||l.every(T=>T.CanRead),m=!r.IsPrivate||l.every(T=>T.CanWrite);if(!u)return;const y=r.Column||2;r.Label=r.Label||"",r.ShowLabel?(Html.TData.Visibility(r.Visibility).Div.IText(r.Label).TextAlign(t===0?"left":"right"),Html.EndOf("td").TData.Visibility(r.Visibility).ColSpan(y-1).Render()):Html.TData.Visibility(r.Visibility).ColSpan(y).ClassName("text-left").Style("padding-left: 0;").Render(),r.Style&&Html.Style(r.Style),r.Width&&Html.Width(r.Width);const C=ComponentFactory.GetComponent(r,this.EditForm);if(C!==null){if(C.IsListView&&this.EditForm.ListViews.push(C),this.AddChild(C),C instanceof EditableComponent&&(C.Disabled=r.Disabled||this.Disabled||!m||this.EditForm.IsLock||C.Disabled),C.Element){if(r.ChildStyle){const T=Html.Context;Html.Take(C.Element).Style(r.ChildStyle),Html.Take(T)}r.Row===1&&C.ParentElement.parentElement.classList.add("inline-label"),Client.Instance.SystemRole&&r.ComponentType!="CodeEditor"&&C.Element.addEventListener("contextmenu",T=>this.EditForm.SysConfigMenu(T,r,e,C))}r.Focus&&C.Focus(),Html.EndOf("td"),r.Offset!=null&&r.Offset>0&&(Html.TData.ColSpan(r.Offset).End.Render(),t+=r.Offset),t+=y,t===this.EditForm.GetInnerColumn(e)&&(t=0,Html.EndOf("tr").TRow.Render())}})}},h($t,"_imeout1"),$t);const section=Object.freeze(Object.defineProperty({__proto__:null,Section:Section$1},Symbol.toStringTag,{value:"Module"}));class ListViewSection extends Section$1{constructor(){super(...arguments);h(this,"ListView")}Render(){this.ListView=this.Parent,super.Render()}}class AdvancedSearch extends EditableComponent{constructor(e){super(null);h(this,"Parent");h(this,"Entity");this.Name="AdvancedSearch",this.Title="Tìm kiếm nâng cao",this.Icon="fa fa-search-plus",this.Parent=e}LocalRender(){this._headers=this.Parent.Header.filter(s=>s.Id!=null&&s.Label&&s.Active&&!s.Hidden);const e=new FeaturePolicy;e.CanRead=!0,e.CanWrite=!0,e.CanDelete=!0,this.Entity=this.Parent.AdvSearchVM;var t=this.Parent.Meta.OrderBy;this.Parent.OrderBy=t?t.split(",").map(s=>{if(!s)return null;var r=s.trim().replace(new RegExp("\\s+","g")," ").replace("ds.","").split(" ");if(r.length<1)return null;var l=this._headers.find(m=>m.FieldName==r[0]);if(l==null)return null;var u={ComId:l.Id,FieldName:l.FieldName};return r.length==1?u.OrderbyDirectionId=OrderbyDirection.ASC:u.OrderbyDirectionId=r[1].toLowerCase()==="asc"?OrderbyDirection.ASC:OrderbyDirection.DESC,u}).filter(s=>s!=null):this.Parent.OrderBy;var n=this.AddSection();this.AddFilters(n),this.AddOrderByGrid(n)}AddSection(){var e=new Section$1(ElementType.div);e.Meta={Column:4,Label:"Filter",Active:!0,ClassName:"scroll-content"},this.AddChild(e);var t=new HTMLLabelElement;return e.Element.appendChild(t),t.textContent="Status",e.ClassName="filter-warpper panel group wrapper",e}AddFilters(e){this._filterGrid=new GridView({Id:Uuid7.Id25(),FieldName:"Conditions",Column:4,RefName:"FieldCondition",LocalRender:!0,IgnoreConfirmHardDelete:!0,CanAdd:!0,Events:"{'DOMContentLoaded': 'FilterDomLoaded'}"}),this._filterGrid.OnDeleteConfirmed=()=>{this._filterGrid.GetSelectedRows().forEach(t=>{this._filterGrid.RowData.remove(t)})},this._filterGrid.Header=this._filterGrid.Meta.LocalHeader=[{Id:"1",FieldName:"FieldId",Events:"{'change': 'FieldId_Changed'}",Label:"Tên cột",RefName:"Component",FormatData:"ShortDesc",Active:!0,Editable:!0,ComponentType:"SearchEntry",MinWidth:"100px",MaxWidth:"200px",LocalRender:!0,LocalData:this._headers,LocalHeader:[{FieldName:"ShortDesc",Label:"Column",Active:!0}],Validation:'[{"Rule": "required", "Message": "{0} is required"}]'},{Id:"2",FieldName:"CompareOperatorId",Label:"Toán tử",ReferenceId:this._entityId,RefName:"Entity",ComponentType:"SearchEntry",FormatData:"Description",Active:!0,Editable:!0,MinWidth:"150px",LocalRender:!0,LocalData:IEnumerableExtensions.ToEntity(AdvSearchOperation),LocalHeader:[{EntityId:this._entityId,FieldName:"Name",Label:"Operator",Active:!0},{EntityId:this._entityId,FieldName:"Description",Label:"Allias",Active:!0}],Validation:'[{"Rule": "required", "Message": "{0} is required"}]'},{Id:"3",FieldName:"Value",Label:"Value",ReferenceId:this._entityId,RefName:"Entity",ComponentType:"Input",Active:!0,Editable:!0,MinWidth:"450px",Validation:'[{"Rule": "required", "Message": "{0} is required"}]'},{Id:"2",FieldName:"LogicOperatorId",Label:"logic",ReferenceId:this._entityId,RefName:"Entity",ComponentType:"SearchEntry",FormatData:"Description",Active:!0,Editable:!0,DefaultVal:"0",LocalRender:!0,LocalData:LogicOperation.ToEntity(),LocalHeader:[{EntityId:this._entityId,FieldName:"Name",Label:"Logic",Active:!0},{EntityId:this._entityId,FieldName:"Value",Label:"Value",Active:!0}]}],this._filterGrid.RowData.Data=this._filterGrid.Meta.LocalData=this.Entity.Conditions,this._filterGrid.ParentElement=e.Element,e.AddChild(this._filterGrid),this._filterGrid.Element.addEventListener(EventType.KeyDown,this.ToggleIndent.bind(this))}FilterDomLoaded(){this._filterGrid.MainSection.Children.forEach(e=>{var t=e.Entity;this.FieldId_Changed(t,t.Field)})}HeaderForAdvSearch(){return this.Parent.Header.filter(e=>e.Id!=null&&e.Label&&e.Active&&!e.Hidden)}AddOrderByGrid(e){this._orderByGrid=new GridView({FieldName:"OrderBy",Column:4,ReferenceId:this._orderById,RefName:"Entity",CanAdd:!0,IgnoreConfirmHardDelete:!0,LocalRender:!0}),this._orderByGrid.OnDeleteConfirmed=()=>{this._orderByGrid.GetSelectedRows().forEach(t=>{this._orderByGrid.RowData.Remove(t)})},this._orderByGrid.Meta.LocalHeader=[{Id:"1",FieldName:"FieldId",Events:"{'change': 'FieldId_Changed'}",Label:"Tên cột",ReferenceId:this._ComponentId,RefName:"Component",FormatData:"ShortDesc",Active:!0,Editable:!0,ComponentType:"SearchEntry",MinWidth:"100px",MaxWidth:"200px",LocalData:this._headers,LocalRender:!0,LocalHeader:[{EntityId:this._ComponentId,FieldName:"ShortDesc",Label:"Tên cột",Active:!0}]},{Id:"2",EntityId:this._orderById,FieldName:"OrderbyDirectionId",Label:"Thứ tự",ReferenceId:this._entityId,RefName:"Entity",ComponentType:"SearchEntry",FormatData:"Description",Active:!0,Editable:!0,MinWidth:"100px",MaxWidth:"120px",LocalData:OrderbyDirection.ToEntity(),LocalHeader:[{EntityId:this._entityId,FieldName:"Name",Label:"Thứ tự",Active:!0}],LocalRender:!0}],this._orderByGrid.Meta.LocalData=this.Entity.OrderBy,this._orderByGrid.ParentElement=e.Element,e.AddChild(this._orderByGrid)}ToggleIndent(e){var t=e.KeyCodeEnum();if(t==KeyCodeEnum.Tab){e.preventDefault();var n=e.ShiftKey(),s=this._filterGrid.GetSelectedRows(),r=s.reduce((l,u)=>(l[u.Id]=u,l),{});this._filterGrid.RowAction(l=>{var u=l.Entity;u.Level+=n?-1:1,Array.from(l.Element.querySelectorAll("td")).forEach(m=>{m.style.paddingLeft=u.Level+"rem"})},l=>r.hasOwnProperty(l.Entity.Id))}}DirtyCheckAndCancel(){super.Dispose()}async ApplyAdvSearch(){await this.ValidateAsync()&&(this.CalcAdvSearchQuery(),this.Parent.ReloadData(!1,0).Done())}CalcAdvSearchQuery(){this.Parent.Wheres=this.Entity.Conditions.map((e,t)=>({Condition:this.GetSearchValue(e)})).filter(e=>e.Condition)}GetSearchValue(e){var t=!1,n=e.Value;if(n==null&&e.CompareOperatorId!=AdvSearchOperation.EqualNull&&e.CompareOperatorId!=AdvSearchOperation.NotEqualNull)return null;e.Field.ComponentType.includes(ComponentType.Datepicker)&&n?n=n:e.Field.ComponentType==nameof(Number)?n=n+"":n=n.EncodeSpecialChar()+"";var s=OperationToSql[e.CompareOperatorId],r=t?Str.Empty:Str.Format(s,e.OriginFieldName,n);return r}FieldId_Changed(e,t){var m,y;if(!(e==null||t==null)){e.OriginFieldName=t.FieldName,e.Field=t;var n=this._filterGrid.FirstOrDefault(C=>C.Entity==e&&C.Name=="Value"),s=this._filterGrid.find(C=>C.Entity==e&&C.FieldName=="CompareOperatorId");if(n!=null){var r=n.ParentElement,l=n.Parent;n.Dispose();var u=null;t.ComponentType.includes(ComponentType.Datepicker)?(u=this.SetSearchDateTime(s,t),e.Value=new dayjs().format("YYYY/MM/DD")):t.ComponentType.includes(ComponentType.SearchEntry)||t.ComponentType.includes(ComponentType.MultipleSearchEntry)?(u=this.SetSearchId(s,t),e.Value=""):t.ComponentType.includes(ComponentType.Checkbox)?(u=this.SetSearchBool(s,t),e.Value=ActiveStateEnum.All,e.Display.ValueText="All"):t.ComponentType.includes(ComponentType.Numbox)?(u=this.SetSearchDecimal(s,t),e.Value="0"):u=AdvancedSearch.SetSearchString(s,t),u.UserInput+=C=>{u.Entity.Value=C.NewData},e.LogicOperatorId=e.LogicOperatorId||LogicOperation.And,(m=this._filterGrid.FirstOrDefault(C=>C.Meta!=null&&C.Entity==e&&C.Name=="LogicOperatorId"))==null||m.UpdateView(),e.CompareOperatorId=(y=s.Meta.LocalData.find(C=>C.Id==e.CompareOperatorId))==null?void 0:y.Id,s.Value=e.CompareOperatorId,s.Display.ValueText=Object.keys(AdvSearchOperation).find(C=>AdvSearchOperation[C]===e.CompareOperatorId),s.UpdateView(),u.Entity=e,u.Value=e.Value,u.Parent=l,l.Children.splice(2,0,u),u.ParentElement=r,u.Render()}}}static OperatorFactory(e){var t=AdvSearchOperation.ToEntity();switch(e){case ComponentType.Textbox:return t.filter(n=>n.Id>=AdvSearchOperation.Contains&&n.Id<AdvSearchOperation.In||n.Id==AdvSearchOperation.Equal||n.Id==AdvSearchOperation.NotEqual).sort((n,s)=>n.Id==AdvSearchOperation.Contains?-1:1);case ComponentType.Datepicker:return t.filter(n=>n.Id<AdvSearchOperation.Contains);case ComponentType.Number:return t.filter(n=>n.Id<AdvSearchOperation.Contains);case ComponentType.Checkbox:return t.filter(n=>n.Id==AdvSearchOperation.Equal);case ComponentType.SearchEntry:return t.filter(n=>n.Id==AdvSearchOperation.In||n.Id==AdvSearchOperation.NotIn)}return null}static SetSearchString(e,t){var n,s=new Component;return s.CopyPropFrom(t),s.ComponentType=ComponentType.Textbox,n=new Textbox(t),e.Meta.LocalData=AdvancedSearch.OperatorFactory(ComponentType.Textbox),n}SetSearchDecimal(e,t){var n,s=new Component;return s.CopyPropFrom(t),s.ComponentType=ComponentType.Numbox,n=new Numbox(t),e.Meta.LocalData=AdvancedSearch.OperatorFactory(ComponentType.Number),n}SetSearchBool(e,t){var n=new Component;n.CopyPropFrom(t);var s;return n.FormatData="{Description}",n.ComponentType=ComponentType.MultipleSearchEntry,n.LocalRender=!0,n.LocalData=ActiveStateEnum.ToEntity(),n.LocalHeader=AdvancedSearch.GetBooleanSearchHeader(),s=new MultipleSearchEntry(n),e.Meta.LocalData=AdvancedSearch.OperatorFactory(ComponentType.SearchEntry),s}static GetBooleanSearchHeader(){return[{FieldName:nameof(Models.Entity.Name),Label:"Trạng thái",Active:!0},{FieldName:nameof(Models.Entity.Description),Label:"Miêu tả",Active:!0}]}SetSearchId(e,t){e.Meta.LocalData=AdvancedSearch.OperatorFactory(ComponentType.SearchEntry),e.FieldVal=AdvSearchOperation.In,e.Entity.Display=e.Entity.Display??{OperationText:AdvSearchOperation.GetFieldNameByVal(AdvSearchOperation.In)};var n=new Component;n.CopyPropFrom(t),n.ComponentType=ComponentType.MultipleSearchEntry;var s=new MultipleSearchEntry(n);return s}SetSearchDateTime(e,t){var n,s=new Component;return s.CopyPropFrom(t),s.ComponentType=nameof(Datepicker),s.Precision=7,n=new Datepicker(s),e.Meta.LocalData=AdvSearchOperation.ToEntity().filter(r=>r.Id<AdvSearchOperation.Contains),n}}class ListViewSearchVM{constructor(){this.Id=Uuid7.Id25(),this.SearchTerm="",this.FullTextSearch="",this.ScanTerm="",this.StartDate=null,this.DateTimeField="",this.EndDate=null}}class ListViewSearch extends EditableComponent{constructor(e){super(e,null);h(this,"Parent");h(this,"ParentGridView");h(this,"_uploader");h(this,"_fullTextSearch");h(this,"BasicSearch");h(this,"_hasRender",!1);this.PopulateDirty=!1,this.AlwaysValid=!0,this.Meta=e,this.DateTimeField=e.DateTimeField??"InsertedDate",this.Entity=new ListViewSearchVM}get EntityVM(){return this.Entity}get DateTimeField(){return this._dateTimeField}set DateTimeField(e){this._dateTimeField=e}ListView_DataLoaded(e){if(!this._hasRender&&(this._hasRender=!0,this.BasicSearch=this.Parent.Header.filter(r=>r.Active&&!r.Hidden).sort((r,l)=>l.Order-r.Order),this.BasicSearch.length!==0)){Html.Take(this.Element);var t=this.BasicSearch.map(r=>{var l=r,u=l.ComponentType;l.ShowLabel=!1,l.PlainText=r.Label,l.Visibility=!0,l.Column=1;var m=AdvancedSearch.OperatorFactory(u??ComponentType.Textbox)[0].Id;return this.Parent.AdvSearchVM.Conditions.push({FieldId:l.Id,CompareOperatorId:m,LogicOperatorId:LogicOperation.And,Field:r}),l}),n={Children:t,Responsive:!0,Column:t.length,ClassName:"wrapper"},s=Section$1.RenderSection(this,n);for(s.Children.forEach(r=>{r.UserInput.add(l=>{var m;var u=this.Parent.AdvSearchVM.Conditions.find(y=>y.FieldId===r.Meta.Id);u.Value=(m=r.FieldVal)==null?void 0:m.toString()})});s.Element.children.length>0;)this.Element.insertBefore(s.Element.firstChild,this.Element.firstChild)}}async Render(){if(this.Parent.DataLoaded.add(this.ListView_DataLoaded.bind(this)),!!this.Meta.CanSearch){if(Html.Take(this.Parent.Element.firstChild).TabIndex(-1).Event(EventType.KeyPress,this.EnterSearch.bind(this)),this.Element=Html.Context,this.RenderImportBtn(),this.Meta.ComponentType==="GridView"||this.Meta.ComponentType==="TreeView"||!this.Meta.IsRealtime){var e=new Textbox({FieldName:"SearchTerm",Visibility:!0,Label:"Tìm kiếm",PlainText:"Tìm kiếm",ShowLabel:!1});e.ParentElement=this.Element,e.UserInput=null,this.AddChild(e)}var t=new Datepicker({FieldName:"StartDate",Visibility:!0,Label:"From date",PlainText:"From date",ShowLabel:!1});t.ParentElement=this.Element,t.UserInput=null,this.AddChild(t);var n=new Datepicker({FieldName:"EndDate",Visibility:!0,Label:"To date",PlainText:"To date",ShowLabel:!1});if(n.ParentElement=this.Element,n.UserInput=null,this.AddChild(n),this.Parent.Meta.ShowDatetimeField){var s=new SearchEntry$1({FieldName:"DateTimeField",PlainText:"Loại ngày",FormatData:"{ShortDesc}",ShowLabel:!1,RefName:"Component"});s.ParentElement=this.Element,s.UserInput=null,this.AddChild(s)}Html.Take(this.Element).Div.ClassName("searching-block").Icon("btn fa fa-search").Event(EventType.Click,()=>{this.Parent.ClearSelected(),this.Parent.ReloadData().Done()}).End.Icon("btn fa fa-cog").Title("Advance").Event(EventType.Click,this.AdvancedOptions.bind(this)).End.Icon("btn fa fa-undo").Title("Refresh").Event(EventType.Click,this.RefreshListView.bind(this)).End.Render(),this.Meta.ShowHotKey&&this.ParentGridView!=null&&Html.Take(this.Element).Div.ClassName("hotkey-block").Button2("F1","btn btn-light btn-sm").Event(EventType.Click,()=>this.ParentGridView.ToggleAll()).Attr("title","Uncheck all").End.Button2("F2","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F2)}).Attr("title","Filter except").End.Button2("F3","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F3)}).Attr("title","Summary selected").End.Button2("F4","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F4)}).Attr("title","Lọc tiếp theo các phép tính (Chứa: Bằng; Lớn hơn; Nhỏ hơn; Lớn hơn hoặc bằng;...)").End.Button2("F6","btn btn-light btn-sm").Event(EventType.Click,r=>{this.ParentGridView.HotKeyF6Handler(r,KeyCodeEnum.F6)}).Attr("title","Quay lại lần lọc trước").End.Button2("F8","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F8)}).Attr("title","Xóa/ Vô hiệu hóa dòng hiện thời hoặc các dòng đánh dấu").End.Button2("F9","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F9)}).Attr("title","Lọc tại chỗ theo giá trị ô hiện thời").End.Button2("F10","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F10)}).Attr("title","Gộp theo cột hiện thời(thống kê lại số nội dung trong cột)").End.Button2("F11","btn btn-light btn-sm").Event(EventType.Click,r=>{var l=this.Parent.LastListViewItem.Children.find(u=>u.Meta.Id===this.ParentGridView.LastComponentFocus.Id);this.ParentGridView.ActionKeyHandler(r,this.ParentGridView.LastComponentFocus,this.ParentGridView.LastListViewItem,l,l.Element.Closest(ElementType.td.toString()),KeyCodeEnum.F11)}).Attr("title","Sắp xếp thứ tự tăng dần, giảm dần. (Shift+F11 để sort nhiều cấp)").End.Render()}}RefreshListView(){if(this.EntityVM.SearchTerm="",this.EntityVM.StartDate=null,this.EntityVM.EndDate=null,this.UpdateView(),!this.Parent)return;const e=this.Parent;e.ClearSelected(),e.CellSelected.Clear(),e.AdvSearchVM.Conditions.Clear(),e.Wheres.Clear(),e.ApplyFilter()}FullScreen(){var e=this.Parent.Element;e.requestFullscreen&&e.requestFullscreen()}EnterSearch(e){e.KeyCode()===13&&this.Parent.ApplyFilter().Done()}UploadCsv(e){var t=e.target.files;if(!(!t||t.length===0)){var n=this._uploader.parentElement,s=new FormData(n),r=this.Parent.Meta;Client.Instance.SubmitAsync({FormData:s,Url:`/user/importCsv?table=${r.RefName}&comId=${r.Id}&connKey=${r.MetaConn}`,Method:HttpMethod.POST,ResponseMimeType:Utils$1.GetMimeType("csv")}).Done(()=>{Toast.Success("Import excel success"),this._uploader.value=""}).catch(l=>{Toast.Warning(l.Message),this._uploader.value=""})}}AdvancedOptions(e){var n=e.target.getBoundingClientRect();localStorage.getItem(`Show${this.Meta.Id}`);var s=ContextMenu.Instance;s.Top=n.bottom,s.Left=n.left,s.MenuItems=[{Icon:"fa fa-search-plus mr-1",Text:"Advanced search",Click:this.AdvancedSearch.bind(this)},{Icon:"fa fa-search mr-1",Text:"Show selected only",Click:this.FilterSelected.bind(this)},{Icon:"fa fa-download mr-1",Text:"Import csv",Click:()=>this._uploader.Click()},{Icon:"fa fa-download mr-1",Text:"Export all",Click:this.ExportAllData.bind(this)},{Icon:"fa fal fa-ballot-check mr-1",Text:"Export selected",Click:this.ExportSelectedData.bind(this)},{Icon:"fa fa-download mr-1",Text:"Customize export",Click:this.ExportCustomData.bind(this)}],s.Render()}RenderImportBtn(){Html.Take(this.Element).Form.Attr("method","POST").Attr("enctype","multipart/form-data").Display(!1).Input.Type("file").Id(`id_${Uuid7.Id25()}`).Attr("name","files").Attr("accept",".csv"),this._uploader=Html.Context,this._uploader.addEventListener(EventType.Change,e=>this.UploadCsv(e))}FilterSelected(e){var t=this.Parent.SelectedIds;if(!t||t.length===0){Toast.Warning("Select rows to filter");return}this.Parent.CellSelected.some(n=>n.FieldName===this.IdField)?(this.Parent.CellSelected.find(n=>n.FieldName===this.IdField).Value=t.join(),this.Parent.CellSelected.find(n=>n.FieldName===this.IdField).ValueText=t.join()):(this.Parent.CellSelected.push({FieldName:this.IdField,FieldText:"Mã",ComponentType:"Input",Value:t.join(),ValueText:t.join(),Operator:OperatorEnum.In,OperatorText:"Chứa",Logic:LogicOperation.And}),this.ParentGridView._summarys.push(new HTMLElement)),this.Parent.ActionFilter()}ExportCustomData(e){var t;(t=this.TabEditor)==null||t.OpenPopup("Export CustomData",()=>this.Exporter()).Done()}async Exporter(){var t;const{ExportCustomData:e}=await __vitePreload(async()=>{const{ExportCustomData:n}=await import("./exportCustomData-B46Q62uq.js");return{ExportCustomData:n}},__vite__mapDeps([4,1]));return this._export||(this._export=new e(this.Parent),this._export.ParentElement=(t=this.TabEditor)==null?void 0:t.Element,this._export.Disposed.add(()=>this._export=null)),this._export}async ExportAllData(e){(await this.Exporter()).Export()}async ExportSelectedData(e){if(!this.Parent.SelectedIds||this.Parent.SelectedIds.length===0){Toast.Warning("Select at least 1 one to export excel");return}(await this.Exporter()).Export(this.Parent.SelectedIds)}OpenExcelFileDialog(e){this._uploader.click()}CalcFilterQuery(){var u;this.EntityVM.DateTimeField&&(this.DateTimeField=this.Parent.Header.find(m=>m.Id===this.EntityVM.DateTimeField).FieldName);const e=this.Parent.Header,t=Utils$1.EncodeSpecialChar((u=this.EntityVM.SearchTerm)==null?void 0:u.trim())||"";let s=e.map(m=>ComponentExt.MapToFilterOperator(m,t)).filter(m=>m!=null&&m!="").join(" or ");const r=this.Parent.Header.filter(m=>m.AddDate).map(m=>m.Id),l=r.length&&r.some(m=>this.ParentGridView.AdvSearchVM.Conditions.some(y=>y.FieldId===m&&y.Value));if(!l&&this.EntityVM.StartDate){const m=`ds.[${this.DateTimeField}] >= '${this.EntityVM.StartDate.toISOString().slice(0,10)}'`,y=this.Parent.Wheres.find(C=>C.Condition.includes(`ds.[${this.DateTimeField}] >=`));y?y.Condition=m:this.Parent.Wheres.push({Condition:m,Group:!1}),localStorage.setItem("FromDate"+this.Parent.Meta.Id,this.EntityVM.StartDate.toISOString().slice(0,10))}else if(!this.EntityVM.StartDate){const m=this.Parent.Wheres.findIndex(y=>y.Condition.includes(`ds.[${this.DateTimeField}] >=`));m!==-1&&this.Parent.Wheres.splice(m,1),localStorage.removeItem("FromDate"+this.Parent.Meta.Id)}if(!l&&this.EntityVM.EndDate){s&&(s+=" and ");const m=new Date(this.EntityVM.EndDate.getTime()+864e5),y=`ds.[${this.DateTimeField}] < '${m.toISOString().slice(0,10)}'`,C=this.Parent.Wheres.find(T=>T.Condition.includes(`ds.[${this.DateTimeField}] <`));C?C.Condition=y:this.Parent.Wheres.push({Condition:y,Group:!1}),localStorage.setItem("ToDate"+this.Parent.Meta.Id,m.toISOString().slice(0,10))}else if(!this.EntityVM.EndDate){const m=this.Parent.Wheres.findIndex(y=>y.Condition.includes(`ds.[${this.DateTimeField}] <`));m!==-1&&this.Parent.Wheres.splice(m,1),localStorage.removeItem("ToDate"+this.Parent.Meta.Id)}return(this.EntityVM.EndDate||this.EntityVM.StartDate)&&this.Parent.Meta.ShowNull&&(s+=` or ds.${this.DateTimeField} is null`),s}get Disabled(){return!1}set Disabled(e){}AdvancedSearch(e){ComponentExt.OpenPopup(this.TabEditor,"AdvancedSearch",()=>{var t=new AdvancedSearch(this.ParentListView);return t.Parent=this.Parent,t.ParentElement=this.TabEditor.Element,t}).Done()}}var ht;let ListViewItem$1=(ht=class extends Section$1{constructor(e=ElementType.tr){super(e);h(this,"IsRow",!0);h(this,"masterDataComponent",["Dropdown","Select2","MultipleSearchEntry","SearchEntry"]);this.GroupSection=null,this.ListViewSection=null,this.ListView=null,this.PreQueryFn=null,this._selected=!1,this._focused=!1,this._emptyRow=!1,this.RowNo=0,this.FocusEvent=new Action,this.GroupRow=!1,this._focusAwaiter=0,this.PatchModel=[],this.ShowMessage=!0,this.IsListViewItem=!0}get Selected(){return this._selected}set Selected(e){this._selected=e,this.SetSelected(e);const t=this.EntityId;if(e)this.ListView.SelectedIds.includes(t)||this.ListView.SelectedIds.push(t);else{const n=this.ListView.SelectedIds.indexOf(t);n!==-1&&this.ListView.SelectedIds.splice(n,1)}}Focused(e=null,t=!0){var s;if(e===null)return this._focused;this._focused=e;const n=this.EntityId;return this._focused?(this.Element.classList.add(ht.FocusedClass),this.ListView.FocusId=n):(this.Element.classList.remove(ht.FocusedClass),this.ListView.FocusId=null),t&&((s=this.FocusEvent)==null||s.invoke(this._focused)),this._focused}SetSelected(e){e?this.Element.classList.add(ht.SelectedClass):this.Element.classList.remove(ht.SelectedClass)}get EmptyRow(){return this._emptyRow}set EmptyRow(e){this._emptyRow=e,this.FilterChildren().forEach(t=>t.EmptyRow=e),this.AlwaysValid=e,this.Element!=null&&(e?this.Element.classList.add(ht.EmptyRowClass):this.Element.classList.remove(ht.EmptyRowClass))}Render(){this.ListView=this.ListView??this.FindClosest(e=>e.IsListView),this.Meta=this.Meta??this.ListView.Meta,super.Render(),this._selected&&this.Element.classList.add(ht.SelectedClass),Html.Instance.Take(this.Element).Event(EventType.Click,this.RowItemClick.bind(this)).Event(EventType.DblClick,this.RowDblClick.bind(this)).Event(EventType.FocusIn,()=>{this.Meta.CanAdd&&this.ListView.EmptySection.Children.ForEach(e=>{e.Focused&&(e.Focused=!1)}),this.ListView.AllListViewItem.ForEach(e=>{e.Focused&&(e.Focused=!1)}),this.Focused=!0}).Event(EventType.FocusOut,this.RowFocusOut.bind(this)).Event(EventType.MouseEnter,this.MouseEnter.bind(this)).Event(EventType.MouseLeave,this.MouseLeave.bind(this))}AfterSaveHandler(e){e||(this.EntityId=null)}BindingEvents(){this.Element&&Html.Take(this.Element).Event(EventType.Click,this.RowItemClick.bind(this)).Event(EventType.DblClick,this.RowDblClick.bind(this)).Event(EventType.FocusIn,()=>{var e;this.ListView.AllListViewItem.forEach(t=>{t._focused&&(t._focused=!1)}),this._focused=!0,(e=this.FocusEvent)==null||e.invoke(!0)}).Event(EventType.FocusOut,this.RowFocusOut.bind(this)).Event(EventType.MouseEnter,this.MouseEnter.bind(this)).Event(EventType.MouseLeave,this.MouseLeave.bind(this))}RenderRowData(e,t,n=null,s=!1){n!==null&&((n>=this.Element.parentElement.children.length||n<0)&&(n=0),this.Element.parentElement.insertBefore(this.Element,this.Element.parentElement.children[n]));const r=Utils$1.IsFunction(this.Meta.Renderer);r?r.call(this,this,e):e.filter(l=>!l.Hidden).forEach(l=>{this.RenderTableCell(t,l,this.Element)}),this.BindingEvents()}RenderTableCell(e,t,n=null){if(t.FieldName){this.masterDataComponent.includes(t.ComponentType)&&(t.LocalData=t.LocalData);var s=t.CanWrite&&t.Editable||!t.Editable&&t.ComponentType=="Button"?ComponentFactory.GetComponent(t,this.EditForm,null,t.CanWrite):new Label(t);s&&(s.Id=t.Id,s.Name=t.FieldName,s.Entity=e,s.ParentElement=n||Html.Context,this.AddChild(s),(this.Disabled||t.Disabled)&&s.SetDisabled(!0),s.Element&&t.ChildStyle&&(s.Element.style.cssText=t.ChildStyle),s.UserInput.add(r=>this.UserInputHandler(r,s)))}}UserInputHandler(e,t){if(!t.Disabled)if(t.ComponentType=="Input"||t.ComponentType=="Textarea"){if(e.EvType==EventType.Abort||e.EvType==EventType.Change||e.EvType==EventType.Blur){if(t.Disabled)return;this.ListView.RowChangeHandler(t.Entity,this,e,t).then(()=>{this.ListView.RealtimeUpdateAsync(this,e).then()})}}else this.ListView.RowChangeHandler(t.Entity,this,e,t).then(()=>{if(t.ComponentType!="Button"&&e.EvType==EventType.Change){if(t.Disabled)return;this.ListView.RealtimeUpdateAsync(this,e).then()}})}async PatchUpdateOrCreate(e=!0){return this.Dirty?new Promise(t=>{const n=this.GetPatchEntity();n.Changes.length!=1&&this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforePatchUpdate,this.Entity,n,this).then(()=>{this.ShowMessage=e,this.ValidateAsync().then(s=>{s&&Client.Instance.PatchAsync(n).then(r=>{this.PatchUpdateCb(r),t(r.updatedItem[0])})})})}):!1}PatchUpdateCb(e){var t;e&&e.status==200&&(Toast.Success("Save data success"),this.EntityId=e.updatedItem[0][this.IdField],this.Dirty=!1,this.EmptyRow=!1),this.Entity[this.IdField].startsWith("-")&&(this.Entity[this.IdField]=e.updatedItem[0][this.IdField]),this.UpdateView(!0),(t=this.AfterSaved)==null||t.invoke(e),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterPatchUpdate,this.Entity,this).then()}GetPatchEntity(){const e=this.EntityId===null;var t=[];return this.EntityId.startsWith("-")?(Object.getOwnPropertyNames(this.Entity).forEach(n=>{var s="";this.Entity[n]instanceof Boolean?this.Entity[n]?s="1":s="0":s=this.Entity[n];var r={Label:n,Field:n,OldVal:null,Value:s};t.push(r)}),t=t.filter(n=>n.Value)):(t=this.FilterChildren(n=>n instanceof EditableComponent&&!(n instanceof Button)&&(e||n.Dirty)&&n.Meta&&n.Meta.FieldName.trim().length>0).flatMap(n=>{var r,l;let s=[];if(typeof n.PatchDetail=="function")s=n.PatchDetail.call(n);else{let u=n.FieldVal;this.EditForm.Meta.IgnoreEncode||(u=u==null?null:u.trim().EncodeSpecialChar()),(u==null||u.toString().trim().length===0)&&(u=null),s=[{Label:n.ComLabel,Field:n.Name,OldVal:n.OldValue!==null&&n.ComponentType.includes(ComponentType.Datepicker)?(r=n.OldValue)==null?void 0:r.toString().DateConverter():(l=n.OldValue)==null?void 0:l.toString(),Value:u}]}return s}).filter((n,s,r)=>r.findIndex(l=>l.Field===n.Field)===s),this.AddIdToPatch(t)),t.length==1&&(t=[],Object.getOwnPropertyNames(this.Entity).forEach(n=>{var s="";this.Entity[n]instanceof Boolean?this.Entity[n]?s="1":s="0":s=this.Entity[n];var r={Label:n,Field:n,OldVal:null,Value:s};t.push(r)}),t=t.filter(n=>n.Value)),this.PatchModel.push(...t),{CacheName:this.CacheName,QueueName:this.QueueName,Changes:t,Table:this.ListView.Meta.RefName,MetaConn:this.ListView.MetaConn,DataConn:this.ListView.DataConn}}RowDblClick(e){var t;e.stopPropagation(),(t=this.ListView.DblClick)==null||t.invoke(this.Entity),this.DispatchEvent(this.Meta.Events,EventType.DblClick,this.Entity).then()}RowItemClick(e){var l;e.stopPropagation();const t=e.CtrlOrMetaKey(),n=e.ShiftKey(),s=e.target,r=this.FirstOrDefault(u=>u.Element===s||u.ParentElement.contains(s))!==null;this.HotKeySelectRow(t,n,r),e.ShiftKey()||(l=this.ListView.RowClick)==null||l.invoke(this.Entity),this.ListView.LastListViewItem=this,this.DispatchEvent(this.Meta.Events,EventType.Click,this.Entity).then()}HotKeySelectRow(e,t,n){if(!this.EmptyRow)if(this.ListView.VirtualScroll){if((e||t)&&(this.Selected=!this._selected,this._selected&&(this.ListView.SelectedIndex=this.Children.indexOf(this))),t){const r=this.ListView.AllListViewItem;this.ListView.LastShiftViewItem===null&&(this.ListView.LastShiftViewItem=this,this.ListView.LastIndex=this.RowNo);let l=this.ListView.LastIndex,u=this.RowNo;if(l>u){let m=l;l=u,u=m}if(this.ListView.VirtualScroll&&u>l){const m=this.ListView.GetSql(l-1,u-l+1,!0);Client.Instance.GetIds(m).then(y=>{this.Selected?y.filter(C=>!this.ListView.SelectedIds.includes(C)).forEach(C=>this.ListView.SelectedIds.push(C)):y.forEach(C=>{const T=this.ListView.SelectedIds.indexOf(C);T!==-1&&this.ListView.SelectedIds.splice(T,1)}),this.SetSeletedListViewItem(r,l,u),this.ListView.LastShiftViewItem=null})}else this.SetSeletedListViewItem(r,l,u)}}else{if(!e&&!t){this.ListView.SelectedIds.length<=1&&(this.ListView.ClearSelected(),this.Selected=!this._selected,this._selected&&(this.ListView.SelectedIndex=this.ListView.Children.indexOf(this)));return}if(this.Selected=!this._selected,!t&&!e&&this._selected&&(this.ListView.SelectedIndex=this.ListView.Children.indexOf(this)),t){const r=this.ListView.AllListViewItem,l=r.find(m=>m.Selected);let u=r.indexOf(l);var s=this.ListView.Children.indexOf(this);if(s>u){let m=s;s=u,u=m}for(let m=u;m<=s;m++){let y=this.ListView.Children[m];y instanceof ht&&(y.Selected=!0)}}}}SetSeletedListViewItem(e,t,n){const s=e[0].RowNo>t?e[0].RowNo:t,r=this.ListView.AllListViewItem.filter(l=>l.RowNo>=s&&l.RowNo<=n);this.ListView.VirtualScroll||(this.ListView.SelectedIds=r.map(l=>l.EntityId)),r.forEach(l=>{const u=l.EntityId;this.ListView.SelectedIds.includes(u)?l.Selected=this.Selected:l.Selected=!1})}RowFocusOut(){return this.DispatchCustomEvent(this.Meta.Events,CustomEventType.RowFocusOut,this.Entity)}MouseEnter(){return this.Element.classList.add(ht.HoveringClass),this.DispatchCustomEvent(this.ListView.Meta.Events,CustomEventType.RowMouseEnter,this.Entity)}MouseLeave(){return this.Element.classList.remove(ht.HoveringClass),this.DispatchCustomEvent(this.ListView.Meta.Events,CustomEventType.RowMouseLeave,this.Entity)}get ShowMessage(){return this._showMessage}set ShowMessage(e){this._showMessage=e}ValidateAsync(){return new Promise((e,t)=>{this.FilterChildren(s=>s.Children.length===0,s=>s.AlwaysValid).ForEachAsync(s=>s.ValidateAsync()).then(s=>{const r=s.every(l=>l.IsValid);if(e(r),!r&&this.ShowMessage){const l=s.filter(u=>!u.IsValid).map(u=>Object.values(u.ValidationResult).Combine(null,Utils$1.BreakLine)).Combine(null,Utils$1.BreakLine);Toast.Warning(l)}}).catch(t)})}},h(ht,"NotCellText",["Button","Image","Checkbox"]),h(ht,"EmptyRowClass","empty-row"),h(ht,"SelectedClass","__selected__"),h(ht,"FocusedClass","focus"),h(ht,"HoveringClass","hovering"),h(ht,"GroupRowClass","group-row"),ht);const Bi=class Bi extends EditableComponent{constructor(e,t=null){super(e,t);h(this,"IsListView",!0);h(this,"SelectedIds",[]);h(this,"MainSection");h(this,"OrderBy",[]);h(this,"CacheData",[]);h(this,"RefData",[]);h(this,"DataLoaded",new Action);h(this,"DblClick",new Action);h(this,"RowClick",new Action);h(this,"VirtualScroll",!1);h(this,"FocusId");h(this,"GridPolicies",[]);h(this,"GeneralPolicies",[]);h(this,"Wheres",[]);h(this,"ShouldSetEntity",!0);h(this,"FormattedRowData");h(this,"BodyContextMenuShow",new Action);h(this,"CellSelected",[]);h(this,"Dropdown","Dropdown");h(this,"NotCellText",["Button","Image","ImageUploader"]);h(this,"_copiedRows");h(this,"RecordPolicy",[]);this.DeleteTempIds=[],this.Meta=e,this.Id=e.Id,this.Name=e.FieldName,this.Header=[],this.RowData=new ObservableList,this.AdvSearchVM={ActiveState:ActiveStateEnum.Yes,OrderBy:localStorage.getItem("OrderBy"+this.Meta.Id)??[]},this._hasLoadRef=!1,t!==null&&this.Resolve(e,t),this._rowHeight=this.Meta.BodyItemHeight??26,this._theadTable=this.Meta.HeaderHeight??40,this._tfooterTable=this.Meta.FooterHeight??35,this._scrollTable=this.Meta.ScrollHeight??10,window.addEventListener(this.QueueName,this.RealtimeUpdateListViewItem.bind(this)),this._preQueryFn=Utils$1.IsFunction(this.Meta.PreQuery),this.LastShiftViewItem=void 0,this.LastIndex=void 0,this.EntityFocusId="",this.LastElementFocus=null,this.LastComponentFocus=null}get Editable(){return this.Meta.CanAdd}RealtimeUpdateListViewItem(e){let t=e.Message,n=this.MainSection.FilterChildren(r=>r.EntityId===t[this.IdField]).FirstOrDefault();if(n===null)return;this.CacheData.FirstOrDefault(r=>r[this.IdField]===t[this.IdField]).CopyPropFrom(t),n.Entity.CopyPropFrom(t);let s=n.FilterChildren(r=>!r.Dirty||r.GetValueText()!=null).Select(r=>r.Name).ToArray();n.UpdateView(!1,s),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterWebsocket,t,n).Done()}Resolve(e,t=null){let n=document.createElement("textarea");n.innerHTML=t.innerHTML,e.FormatEntity=n.value,t.innerHTML=null}Render(){var e;this.EditForm&&(this.GridPolicies=this.EditForm.GetElementPolicies(this.Meta.Id)??[],this.GeneralPolicies=this.EditForm.Policies),this.CanWrite=this.CanDo(t=>t.CanWrite||t.CanWriteAll),Html.Take(this.ParentElement).DataAttr("name",this.Name),this.AddSections(),this.SetRowDataIfExists(),(e=this.EditForm)==null||e.ResizeListView(),this.Meta.LocalRender?this.LocalRender():this.LoadAllData()}LocalRender(){this.Header=this.Header??this.Meta.LocalHeader,this.Meta.LocalRender?this.Rerender():this.RowData.Data=this.Meta.LocalData}Rerender(){this.DisposeNoRecord(),this.MainSection.DisposeChildren(),Html.Take(this.MainSection.Element).Clear(),this.RenderContent()}CanDo(e){var t,n;return((t=this.GeneralPolicies)==null?void 0:t.some(e))||((n=this.GridPolicies)==null?void 0:n.some(e))}async ReloadData(e=!1,t=null,n=null){var r,l,u,m;if(this.Meta.LocalQuery&&Array.isArray(this.Meta.LocalQuery)&&(this.Meta.LocalData=this.Meta.LocalQuery,this.Meta.LocalRender=!0),this.Meta.LocalQuery&&!Array.isArray(this.Meta.LocalQuery)&&(this.Meta.LocalData=this.Meta.LocalData??typeof this.Meta.LocalQuery===Str.Type?JSON.parse(this.Meta.LocalQuery.toString()):this.Meta.LocalQuery,this.Meta.LocalRender=!0),this.Meta.LocalRender&&this.Meta.LocalData!=null)return this.SetRowData(this.Meta.LocalData),this.Meta.LocalData;this.Paginator!=null&&(this.Paginator.Options.PageSize=this.Paginator.Options.PageSize===0?this.Meta.Row??12:this.Paginator.Options.PageSize),n=n??((l=(r=this.Paginator)==null?void 0:r.Options)==null?void 0:l.PageSize)??this.Meta.Row??20,t=t?((m=(u=this.Paginator)==null?void 0:u.Options)==null?void 0:m.PageIndex)*n:0;let s=this.GetSql(t,n,e);return await this.CustomQuery(s)}CalcFilterQuery(){return this.ListViewSearch.CalcFilterQuery()}GetSql(e=null,t=null,n=!1,s=!0){let r=Utils$1.IsFunction(this.Meta.PreQuery,!0,this),l=this.AdvSearchVM.OrderBy.Any()?this.AdvSearchVM.OrderBy.Combine(T=>{let F=T.OrderbyDirectionId===OrderbyDirection.ASC?"asc":"desc";return`ds.${T.FieldName} ${F}`}):null,u=this.CalcFilterQuery(),m=this.Wheres.Combine(T=>`(${T.Condition})`," and "),y=[u,m].filter(T=>T).Combine(null," and ");return{ComId:this.Meta.Id,Params:r,OrderBy:l||(this.Meta.OrderBy?this.Meta.OrderBy:"ds.Id asc"),Where:y,Count:s,Skip:e,Top:t,SkipXQuery:n,MetaConn:this.MetaConn,DataConn:this.DataConn}}SetRowData(e){var n;(n=this.RowData)==null||n.Clear(),e.length&&this.RowData._data.push(...e),this.RenderContent(),this.Entity!==null&&this.ShouldSetEntity&&(this.Entity[this.Name]=this.RowData.Data)}async CustomQuery(e){var t,n,s;try{const r=await Client.Instance.SubmitAsync({NoQueue:!0,Url:`/api/feature/com?t=${Client.Token.TenantCode||Client.Tenant}`,Method:"POST",JsonData:JSON.stringify(e,this.getCircularReplacer(),2),AllowAnonymous:!0,ErrorHandler:m=>{m.status===400&&(Client.Token=null,Toast.Warning("Phiên truy cập đã hết hạn! Vui lòng chờ trong giây lát, hệ thống đang tải lại trang"))}});let l=((t=r.count)==null?void 0:t.total)??0,u=r.value;return!u||!u.length?(this.SetRowData(null),null):(Spinner.Hide(),await this.LoadMasterData(u),this.SetRowData(u),this.UpdatePagination(l,u.length),(n=Utils$1.IsFunction(this.Meta.FormatEntity))==null||n.call(null,u,this),(s=this.DataLoaded)==null||s.invoke(ds),u)}catch(r){throw console.error("Error during custom query:",r),r}}getCircularReplacer(){const e=new WeakSet;return(t,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}}async LoadMasterData(e=null,t=!0){var n=this.Header.filter(u=>!Utils$1.isNullOrWhiteSpace(u.RefName));if(n.length==0)return;e=e||this.RowData.Data,this.SyncMasterData(e,n);let s=n.map(u=>this.FormatDataSourceByEntity(u,n,e)).filter(u=>u!==null);if(s.Nothing())return;let r=s.filter(u=>u.DataSourceOptimized).map(u=>({Header:u,Data:Client.Instance.GetByIdAsync(u.RefName,u.DataSourceOptimized)})),l=await Promise.all(r.map(u=>u.Data));r.forEach((u,m)=>{u.Data=l[m],this.setRemoteSource(u.Data.data,u.Header.RefName,u.Header)}),this.SyncMasterData(e,n)}setRemoteSource(e,t,n){let s=this.RefData[t];s?e.forEach(r=>{s.some(l=>l[this.IdField]===r[this.IdField])||s.push(r)}):this.RefData[t]=e,n&&(n.LocalData=e)}SyncMasterData(e=null,t=null){e=e||this.RowData.Data,t=t||this.Header,t.filter(n=>n.RefName).forEach(n=>{!n.FieldName||n.FieldName.length<=2||!(n.FieldName.substr(n.FieldName.length-2)===this.IdField)||e.forEach(r=>{var C;let l=n.FieldName.substr(0,n.FieldName.length-2),u=n.RefName;if(!u)return;let m=r[l],y=(C=this.RefData[u])==null?void 0:C.find(T=>T[this.IdField]===r[n.FieldName]);y?r[l]=y:m&&!y&&(this.RefData[u]=this.RefData[u]||[],this.RefData[u].push(m))})})}FormatDataSourceByEntity(e,t,n){let s=t.filter(r=>r.RefName===e.RefName).flatMap(r=>this.getEntityIds(r,n)).filter((r,l,u)=>u.indexOf(r)===l);return s.length===0?null:(e.DataSourceOptimized=s.sort(),e)}getEntityIds(e,t){if(!t||t.length===0)return[];let n=[];return t.forEach(s=>{let r=s[e.FieldName];if(r)r.includes(",")?n.push(...r.split(",").map(l=>l)):n.push(r);else return}),n}UpdatePagination(e,t){if(!this.Paginator)return;let n=this.Paginator.Options;n.Total=e,n.CurrentPageCount=t,n.PageNumber=n.PageIndex+1,n.StartIndex=n.PageIndex*n.PageSize+1,n.EndIndex=n.StartIndex+n.CurrentPageCount-1,this.Paginator.UpdateView()}AddSections(){if(this.Meta.LiteGrid){this.Element=this.ParentElement,this.Element.innerHTML=null,this.MainSection=new ListViewSection(null,this.ParentElement),this.AddChild(this.MainSection);return}Html.Take(this.ParentElement).Div.ClassName("grid-wrapper"),this.Element=Html.Context,this.Meta.CanSearch&&Html.Instance.Div.ClassName("grid-toolbar search").End.Render(),this.ListViewSearch=new ListViewSearch(this.Meta),this.AddChild(this.ListViewSearch),Html.Take(this.Element).Div.ClassName("list-content").End.Div.ClassName("empty"),this.EmptySection=new ListViewSection(null,Html.Context),this.EmptySection.ParentElement=this.Element,this.AddChild(this.EmptySection),this.MainSection=new ListViewSection(null,this.EmptySection.Element.previousElementSibling),this.AddChild(this.MainSection),Html.Instance.EndOf(".list-content"),this.RenderPaginator()}RenderContent(){var e;this.MainSection.DisposeChildren(),(e=this.EmptySection)==null||e.DisposeChildren(),this.FormattedRowData=this.FormattedRowData.Nothing()?this.RowData.Data:this.FormattedRowData,!this.FormattedRowData.Nothing()&&(this.FormattedRowData.SelectForEach((t,n)=>{this.RenderRowData(this.Header,t,this.MainSection)}),this.ContentRendered())}RenderRowData(e,t,n,s=null,r=!1){let l=this.Meta.LiteGrid?new ListViewItem$1:new ListViewItem$1("div");return l.EmptyRow=r,l.Entity=t,l.ParentElement=n.Element,l.ListView=this,l.ListViewSection=n instanceof ListViewSection?n:null,l.Meta=this.Meta,l.EditForm=this.EditForm,n.AddChild(l,s),l.RenderRowData(e,t,s,r),l}ClearRowData(){this.RowData.Clear(),this.RowAction(e=>e.Dispose(),e=>!e.EmptyRow),this.MainSection.Element.innerHTML=null,!(this.Entity==null||this.Parent.IsSearchEntry)&&this.ShouldSetEntity&&(this.Entity[this.Name]=this.RowData.Data)}get AllListViewItem(){return this.MainSection.Children}RowAction(e,t=null){this.AllListViewItem.filter(n=>!t||t(n)).forEach(e)}SetRowDataIfExists(){const e=Utils$1.GetPropValue(this.Entity,this.Name);this.Entity!=null&&Array.isArray(e)&&(this.RowData._data=e)}UpdateView(e=!1,t=null,n=[]){this.Editable?this.RowAction(s=>s.UpdateView(e,t,n),s=>!s.EmptyRow):e&&this.ListViewSearch.RefreshListView()}AddNewEmptyRow(){var s;if(this.Meta.LiteGrid||this.Disabled||!this.Editable||((s=this.EmptySection)==null?void 0:s.Children.HasElement())===!0)return;let e={},t=Utils$1.IsFunction(this.Meta.DefaultVal);if(!this.Meta.DefaultVal&&t){let r=t.call(this,this);Object.keys(r).forEach(l=>{e[l]=r[l]})}e[this.IdField]=null;let n=this.RenderRowData(this.Header,e,this.EmptySection,null,!0);Object.entries(e).forEach(([r,l])=>{n.PatchModel.push({Field:r,Value:l==null?void 0:l.toString()})}),this.Meta.TopEmpty?this.MainSection.Element.appendChild(this.EmptySection.Element.firstElementChild):this.MainSection.Element.insertBefore(this.MainSection.Element,this.EmptySection.Element),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterEmptyRowCreated,e).Done()}RenderPaginator(){if(this.Meta.LocalRender||this.Meta.LiteGrid){this.Paginator&&(this.Paginator.Show=!1);return}(!this.Meta.Row||this.Meta.Row===0)&&(this.Meta.Row=20),this.Paginator||(this.Paginator=new Paginator({Total:0,PageSize:this.Meta.Row??50,CurrentPageCount:this.RowData.Data.length}),this.AddChild(this.Paginator))}get UpdatedRows(){return this.AllListViewItem.OrderBy(e=>e.RowNo).Where(e=>e.Dirty).Select(e=>e.Entity).Distinct()}get UpdatedListItems(){return this.AllListViewItem.OrderBy(e=>e.RowNo).Where(e=>e.Dirty)}GetPatches(e=!1){if(!this.Dirty)return null;this.Meta.IdField!==null&&this.Meta.IdField!==this.IdField&&this.UpdatedRows.forEach(n=>{n[this.Meta.IdField]=this.EntityId});const t=[];return this.UpdatedListItems.forEach(n=>{t.push(n.GetPatchEntity())}),e&&this.UpdateView(),t}FilterColumns(e){if(e.length===0)return e;e.some(r=>r.ComponentId===this.Meta.Id)?e=e.filter(r=>r.ComponentId===this.Meta.Id):e=e.filter(r=>r.ComponentId===null);let n=this.EditForm.GetGridPolicies(e.map(r=>r.Id),Utils$1.ComponentId),s=e.filter(r=>!r.IsPrivate||n.filter(l=>l.RecordId===r.Id).every(l=>l.CanRead)).sort((r,l)=>r.Frozen!==l.Frozen?r.Frozen-l.Frozen:r.Order-l.Order);return this.OrderHeaderGroup(s),this.Header.length=0,this.Header.push(...s),this.Header=this.Header.filter(r=>r!==null),this.Header}ApplyFilter(){return this.ClearRowData(),this.ReloadData(!0,0)}GetSelectedRows(){var e;return((e=this.LastListViewItem)==null?void 0:e.GroupRow)===!0?[this.LastListViewItem.Entity]:this.MainSection.Children.filter(t=>t.IsListViewItem&&t.Selected).map(t=>t.Entity)}BodyContextMenuHandler(e){var n;if(e.preventDefault(),e.stopPropagation(),ContextMenu.Instance.MenuItems.Clear(),(n=this.BodyContextMenuShow)==null||n.invoke(),this.Disabled)return;this.SetSelected(e);let t=ContextMenu.Instance;this.RenderCopyPasteMenu(this.CanWrite),this.RenderEditMenu(this.CanWrite),t.Top=e.Top(),t.Left=e.Left(),t.Render(),document.body.appendChild(t.Element),t.Element.style.position="absolute"}async RenderRelatedDataMenu(){const e=await Client.Instance.GetByIdAsync("EntityRef",this.DataConn,[this.Meta.Id]);if(e.Nothing())return;const t=e.Select(n=>({Text:n.MenuText,Click:s=>this.OpenFeature(n)})).ToList();ContextMenu.Instance.MenuItems.push({Icon:"fal fal fa-ellipsis-h",Text:"Dữ liệu liên quan",MenuItems:t})}async OpenFeature(e){const t=await __vitePreload(()=>Promise.resolve().then(()=>tabEditor),void 0),n=await __vitePreload(()=>Promise.resolve().then(()=>searchEntry),void 0);let r=t.TabEditor.Tabs.find(m=>m.Name===e.ViewClass);if(r){r.Focus(),this.Filter(r,e),this.HasLoadRef=!0;return}this.HasLoadRef=!1;const l=await ComponentExt.LoadFeature(e.ViewClass),u=l.Name+l.Id;r=new t.TabEditor(l.EntityName),r.Name=l.Name,r.Id=u,r.Icon=l.Icon,r.Meta=r.Meta=l,r.Render(),r.DOMContentLoaded.add(()=>{r.FilterChildren(y=>y instanceof n.SearchEntry).find(y=>y.Meta.Id===e.TargetComId).DOMContentLoaded.add(()=>{this.HasLoadRef||(this.Filter(r,e),this.HasLoadRef=!0)})})}Filter(e,t){let n=e.FilterChildren(s=>s instanceof EditableComponent.GridViewMd.GridView).find(s=>s.Meta.Id===t.TargetComId);n&&(n.CellSelected=[],n.AdvSearchVM.Conditions=[],n.ListViewSearch.EntityVM.StartDate=null,n.ListViewSearch.EntityVM.EndDate=null,this.GetRealTimeSelectedRows().then(s=>{let r=n.Header.find(u=>u.FieldName===t.TargetFieldName);if(!r)return;let l=s.map(u=>({FieldName:t.TargetFieldName,FieldText:r.Label,ComponentType:r.ComponentType,Value:u[t.FieldName].toString(),ValueText:u[t.FieldName].toString(),Operator:OperatorEnum.In,OperatorText:"Contains",Logic:"Or",IsSearch:!0,Group:!0}));n.CellSelected.push(...l),n.ActionFilter()}))}SetSelected(e){let t=e.target.closest("tr"),n=this.MainSection.Children.find(s=>s.Element===t);n&&(!n.GroupRow||this.Meta.GroupReferenceId)&&(this.SelectedIds.length===1&&this.ClearSelected(),n.Selected=!0,this.LastListViewItem=n,this.SelectedIndex=n.RowNo)}LoadAllData(){this.LoadHeader().then(()=>{this.ReloadData(!0).then(()=>{this.RenderContent()})})}async LoadHeader(){var e=this.LoadGridPolicy();this.DispatchCustomEvent(this.Meta.Events,CustomEventType.UpdateHeader,e),e=this.FilterColumns(e),this.Header=e}LoadGridPolicy(){var e=[];return this.Meta.Columns.length>0?e=this.Meta.Columns:Utils$1.isNullOrWhiteSpace(this.Meta.Template)?e=this.EditForm.Meta.GridPolicies.filter(t=>t.EntityId==this.Meta.FieldName):e=JSON.parse(this.Meta.Template,null,2),e}OrderHeaderGroup(e){for(let s=0;s<e.length;s++){var t=this.EditForm.GetDefaultGridPolicies(),n=t.filter(r=>r.EntityId=="GridPolicyId"&&r.RecordId==e[s].Id);e[s].CanWrite=(e[s].Editable||this.NotCellText.includes(e[s].ComponentType))&&(this.EditForm.Meta.IsPublic||t.some(r=>r.CanWrite)&&n.some(r=>r.CanWrite)||t.some(r=>r.CanWrite)&&n.length==0)||e[s].ComponentType=="Button";for(let r=s+1;r<e.length;r++)if(e[s].GroupName&&e[s].GroupName===e[r].GroupName&&e[s+1].GroupName!==e[r].GroupName){let l=e[s+1];e[s+1]=e[r],e[r]=l}}}CopySelected(e){this._originRows=this.GetSelectedRows();const t=JSON.stringify(this._originRows);this._copiedRows=JSON.parse(t),window.navigator.clipboard.writeText(t),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCopied,this._originRows,this._copiedRows)}async PasteSelected(e){var t=await window.navigator.clipboard.readText();!t&&this._copiedRows.Nothing()&&(this._copiedRows=JSON.parse(t)),!this._copiedRows.Nothing()&&(Toast.Success("Copying..."),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforePasted,this._originRows,this._copiedRows).Done(()=>{var n=this.AllListViewItem.IndexOf(s=>s.Selected);this.AddRowsNo(this._copiedRows,n).Done(s=>{super.Focus(),this.Meta.IsRealtime?Promise.all(s.Select(r=>r.PatchUpdateOrCreate())).Done(()=>{Toast.Success("Data pasted successfully !"),super.Dirty=!1,this.ClearSelected()}):Toast.Success("Data pasted successfully !"),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterPasted,this._originRows,this._copiedRows).Done()})}))}RenderCopyPasteMenu(e){e&&(ContextMenu.Instance.MenuItems.push({Icon:"fal fa-copy",Text:"Copy",Click:()=>this.CopySelected()}),ContextMenu.Instance.MenuItems.push({Icon:"fal fa-clone",Text:"Copy & Paste",Click:()=>this.DuplicateSelected(null,!1)})),e&&this._copiedRows&&this._copiedRows.length>0&&ContextMenu.Instance.MenuItems.push({Icon:"fal fa-paste",Text:"Paste",Click:()=>this.PasteSelected()})}RenderEditMenu(e){e&&ContextMenu.Instance.MenuItems.push({Icon:"fal fa-history",Text:"View History",Click:async()=>await this.ViewHistory()}),this.CanDo(t=>t.CanDeactivate||t.CanDeactivateAll)&&ContextMenu.Instance.MenuItems.push({Icon:"fal fa-unlink",Text:"Deactivate",Click:()=>this.DeactivateSelected()}),this.CanDo(t=>t.CanDelete||t.CanDeleteAll)&&ContextMenu.Instance.MenuItems.push({Icon:"fal fa-trash",Text:"Delete Data",Click:()=>this.HardDeleteSelected()})}async ViewHistory(e){this.GetSelectedRows().LastOrDefault(),Html.Take(this.EditForm.Element).Div.ClassName("backdrop").Style("align-items: center;").Escape(u=>this.Dispose()),this._history=Html.Context,Html.Instance.Div.ClassName("popup-content confirm-dialog").Style("top: 0;").Div.ClassName("popup-title").InnerHTML("Xem lịch sử").Div.ClassName("icon-box").Span.ClassName("fal fa-times").Event(EventType.Click,()=>this._history.remove()).EndOf(".popup-title").Div.ClassName("popup-body scroll-content");const n=Html.Context,s=new Component;s.Id=Uuid7.Id25(),s.FieldName="Conditions",s.Column=4,s.RefName="History";const r=await __vitePreload(()=>Promise.resolve().then(()=>gridView),void 0),l=new r.GridView(s);l.Meta.LocalHeader=[{Id:"1",FieldName:"InsertedBy",Label:"User create",RefName:"User",FormatData:"FullName",Active:!0,ComponentType:"SearchEntry",MaxWidth:"100px",MinWidth:"100px"},{Id:"2",FieldName:"InsertedDate",Label:"Created date",Active:!0,FormatData:"{0:dd/MM/yyyy HH:mm}",ComponentType:"Datepicker",TextAlign:"left",MaxWidth:"150px",MinWidth:"150px"},{Id:"4",FieldName:"TextHistory",Label:"Dữ liệu thay đổi",Active:!0,ComponentType:"Label",MaxWidth:"700px",MinWidth:"700px"}],l.ParentElement=n,this.TabEditor.AddChild(l)}async RenderShareMenu(e){const t="PermissionLoaded";if(e.length===0)return;const n=e.filter(u=>!u[t]),s=n.map(u=>u[this.IdField].toString());(await this.LoadRecordPolicy(this.Meta.RefName,s)).forEach(u=>this.RecordPolicy.push(u)),n.forEach(u=>u[t]=!0),this.CanDo(u=>u.CanShare||u.CanShareAll)&&e.some(u=>u[Bi.IsOwner])&&ContextMenu.Instance.MenuItems.push({Icon:"mif-security",Text:"Security & Permissions",Click:()=>this.SecurityRows()})}async SecurityRows(){const e=await __vitePreload(()=>import("./securityBL-gW4LESTB.js"),[]),t=this.GetSelectedRows().filter(s=>s[Bi.IsOwner]===!0).map(s=>{var r;return(r=s[this.IdField])==null?void 0:r.toString()}),n=new e.SecurityBL;n.Entity={RecordIds:t,EntityId:this.Meta.ReferenceId},n.ParentElement=this.TabEditor.Element,this.TabEditor.AddChild(n)}async LoadRecordPolicy(e,t){if(t.length===0||t.every(s=>s===null))return[];const n={ComId:"Policy",Action:"GetById",Table:"FeaturePolicy",MetaConn:this.MetaConn,DataConn:this.DataConn,Params:JSON.stringify({ids:t,table:e})};return await Client.Instance.UserSvc(n)}async DeactivateSelected(){const e=new ConfirmDialog;e.Content="Are you sure you want to deactivate?",e.Render(),e.YesConfirmed+=async()=>{e.Dispose(),await this.Deactivate(),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.Deactivated,this.Entity)}}async Deactivate(){const e=this.GetSelectedRows().map(n=>n[this.IdField].toString()),t=await Client.Instance.DeactivateAsync(e,this.Meta.RefName,this.DataConn);return t.length>0?Toast.Success("Data deactivated successfully"):Toast.Warning("An error occurred during deactivation"),t}async HardDeleteSelected(){var e=[];if(e=this.GetSelectedRows(),e.length==0)return;const t=new ConfirmDialog;t.Title="Are you sure you want to delete the selected rows?",t.Render(),t.YesConfirmed.add(()=>{this.HardDeleteConfirmed(e).then(n=>{this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterDeleted,n)})})}async HardDeleteConfirmed(e){const t=e.map(s=>s[this.IdField]).filter(s=>s!=null);return(await Client.Instance.HardDeleteAsync(t,this.Meta.RefName,this.DataConn)).status==200?(this.AllListViewItem.filter(s=>s.Selected).forEach(s=>s.Dispose()),this.Meta.IsRealtime&&(this.Dirty=!1),Toast.Success("Data deleted successfully")):Toast.Warning("No rows were deleted"),e}async DuplicateSelected(e,t=!1){const n=this.GetSelectedRows(),s=n.map(r=>({...r}));Toast.Success("Duplicating data!"),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforePasted,n,s).then(()=>{let r=t?0:this.MainSection.Children.length;this.AddRowsNo(s,r).then(l=>{this.RenderIndex(),this.ClearSelected(),Toast.Success("Data duplicated successfully!")})})}AddRowsNo(e,t=0){let n,s,r=new Promise((l,u)=>{n=l,s=u});return this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreatedList,e).then(()=>{const l=e.map((u,m)=>this.AddRow(u,t+m,!1));Promise.all(l).then(u=>{this.AddNewEmptyRow(),n(u),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreatedList,e).then()}).catch(s)}),r}RenderIndex(){this.MainSection.Children.length!==0&&this.AllListViewItem.forEach((e,t)=>{if(e.Children.length===0||e.FirstChild===null||e.FirstChild.Element===null)return;const n=e.FirstChild.Element.closest("td").previousElementSibling;if(n===null)return;const s=this.Paginator.Options.StartIndex+t;n.innerHTML=s.toString(),e.Selected=this.SelectedIds.includes(e.Entity[this.IdField]),e.RowNo=s})}RowChangeHandler(e,t,n,s=null){return new Promise((l,u)=>{!t.EmptyRow||!this.Editable?this.DispatchEvent(this.Meta.Events,EventType.Change,e).then(()=>{l(!1)}):this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreated,e).then(()=>{this.RowData.Data.push(e),this.Entity[this.Name]=this.RowData.Data,t.FilterChildren(m=>!0).forEach(m=>{m.EmptyRow=!1,m.UpdateView(!0)}),this.EmptySection.Children.Clear(),this.AddNewEmptyRow(),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreated,e).then(()=>{l(!0)})})})}RemoveRowById(e){const t=this.RowData.Data.find(n=>n[this.IdField]===e);if(t){this.RowData.Data.splice(this.RowData.Data.indexOf(t),1);const n=this.MainSection.Children.find(s=>s.EntityId===e);n&&n.Dispose()}}async AddRow(e,t=0,n=!0){n&&this.RowData.Data.splice(t,0,e),await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreated,e);const s=this.RenderRowData(this.Header,e,this.MainSection,t);return await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreated,e),s}async AddRows(e,t=0){await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreatedList,e);const n=[];for(let s=0;s<e.length;s++){const r=await this.AddRow(e[s],t+s,!1);n.push(r)}return await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreatedList,e),this.AddNewEmptyRow(),n}ClearSelected(){this.SelectedIds.forEach(e=>{const t=this.AllListViewItem.find(n=>n.Entity[this.IdField]===e);t&&(t.Selected=!1)}),this.SelectedIds=[],this.LastListViewItem=null}UpdateRow(e,t=!1,n=[]){const s=this.AllListViewItem.find(r=>r.Entity===e);s&&s.UpdateView(t,n)}DomLoaded(){var e;this.Meta.LocalRender||this.Header.ForEach(t=>t.LocalData=null),(e=this.DOMContentLoaded)==null||e.invoke()}ContentRendered(){this.RenderIndex(),this.DomLoaded(),this.Editable&&this.AddNewEmptyRow(),this.RowData.Data.length===0&&!this.Editable?this.NoRecordFound():this.DisposeNoRecord(),this.Editable&&this.MainSection.Element.addEventListener("contextmenu",this.BodyContextMenuHandler.bind(this))}NoRecordFound(){this.MainSection.Children.length>0&&this.MainSection.Children.forEach(e=>e.Dispose()),this.DisposeNoRecord(),this._noRecord=new Section$1(ElementType.div),this._noRecord.ParentElement=this.Element,this.AddChild(this._noRecord),this._noRecord.Element.AddClass("no-records"),Html.Take(this._noRecord.Element).InnerHTML("No record found"),this.DomLoaded()}DisposeNoRecord(){this._noRecord&&(this._noRecord.Dispose(),this._noRecord=null)}GetItemFocus(){return this.AllListViewItem.Where(e=>e.Focused()).FirstOrDefault()}GetRealTimeSelectedRows(){return new Promise((e,t)=>{Client.Instance.GetByIdAsync(this.Meta.RefName,this.DataConn||Client.DataConn,this.SelectedIds.ToArray()).then(n=>{e(n?n.slice():[])}).catch(n=>{t(n)})})}GetRowCountByHeight(e){return e/this._rowHeight>=0?Math.floor(e/this._rowHeight):Math.ceil(e/this._rowHeight)}RemoveRow(e){var t;e!==null&&(this.RowData.Data.Remove(e),(t=this.MainSection.FirstOrDefault(n=>n.Entity==e))==null||t.Dispose())}CalcTextAlign(e){return e.TextAlign&&e.TextAlign.length>0&&Object.values(e.TextAlign).includes(e.textAlign)&&(e.textAlignEnum=e.textAlign),e}MergeComponent(e,t){if(!t)return e;const n=JSON.parse(t.value);if(!n||n.length===0)return e;const s=n.reduce((r,l)=>(r[l.id]=l,r),{});return e.forEach(r=>{const l=s[r.id];l&&(r.width=l.width,r.maxWidth=l.maxWidth,r.minWidth=l.minWidth,r.order=l.order,r.frozen=l.frozen)}),e}ActionFilter(){this.ClearRowData(),this.ReloadData().Done()}MoveUp(){this.ClearSelected(),(this.SelectedIndex<=0||this.SelectedIndex===this.AllListViewItem.length)&&(this.SelectedIndex=this.AllListViewItem.length-1),this.RowAction(e=>{e instanceof ListViewItem$1&&(e.Selected=!0)},!0)}MoveDown(){this.ClearSelected(),(this.SelectedIndex===-1||this.SelectedIndex===this.AllListViewItem.length)&&(this.SelectedIndex=0),this.RowAction(e=>{e instanceof ListViewItem$1&&(e.Selected=!0)},!1)}GetUserSetting(e){return Client.Instance.UserSvc({MetaConn:this.MetaConn,DataConn:this.DataConn,ComId:"UserSetting",Action:"GetByComId",Params:JSON.stringify({ComId:this.Meta.Id,Prefix:e})})}async RealtimeUpdateAsync(e,t){if(this.EmptyRow){this.EmptyRow=!1;return}if(!(!this.Meta.IsRealtime||!t)){var n=await e.ValidateAsync();n&&await e.PatchUpdateOrCreate()}}};h(Bi,"IsOwner","__IsOwner");let ListView=Bi;class GridViewItem extends ListViewItem$1{constructor(i){super(i)}RenderRowData(i,e,t=null,n=!1){t!==null&&((t>=this.Element.parentElement.children.length||t<0)&&(t=0),this.Element.parentElement.insertBefore(this.Element,this.Element.parentElement.children[t])),i.filter(s=>!s.Hidden).forEach(s=>{this.RenderTableCell(e,s,null)}),this.BindingEvents()}RenderTableCell(i,e,t=null){Html.Take(this.Element).TData.TabIndex(-1).TextAlign(e.TextAlign).Event("focusin",s=>this.FocusCell(s,e));var n=Html.Instance.GetContext();Html.Instance.Event("keydown",s=>this.ListViewItemTab(s,n,e)),super.RenderTableCell(i,e,t??Html.Context),Html.Instance.EndOf(ElementType.td)}FocusCell(i,e){var n;if(this.ListViewSection==null)return;this.ListViewSection.ListView.LastElementFocus&&((n=this.ListViewSection.ListView.LastElementFocus)==null||n.closest("td").classList.remove("cell-selected"));let t=i.target;t.closest("td").classList.add("cell-selected"),this.ListViewSection.ListView.LastElementFocus=t,this.ListViewSection.ListView.LastComponentFocus=e,this.ListViewSection.ListView.EntityFocusId=this.EntityId}}var Fn;let GridView$1=(Fn=class extends ListView{constructor(e,t){super(e,t);h(this,"mouseMoveHandler");h(this,"mouseUpHandler");h(this,"x",0);h(this,"w",0);this.SummaryClass="summary",this.CellCountNoSticky=50,this._summarys=[],this.LastThClick=null,this.LastNumClick=null,this.AutoFocus=!1,this.LoadRerender=!1,this._waitingLoad=!1,this._renderPrepareCacheAwaiter=0,this.DataTable=null,this.LastElementFocus=null,this.lastListViewItem=null,this._hasFirstLoad=!1,this._renderIndexAwaiter=0,this._lastScrollTop=0,this.ToolbarColumn={StatusBar:!0,Label:"",Frozen:!0},this.DOMContentLoaded.add(this.DOMContentLoadedHandler.bind(this))}DOMContentLoadedHandler(){this.Meta.IsSumary&&this.AddSummaries(),this.PopulateFields()}PopulateFields(){if(this.Meta.PopulateField){let e=this.Meta.PopulateField.split(",");e.length>0&&this.EditForm.UpdateView(!0,e)}}Rerender(){this.LoadRerender=!0,this.Header=this.Header.filter(e=>!e.Hidden),this.RenderTableHeader(this.Header),this.Editable&&this.AddNewEmptyRow(),this.RenderContent(),this.StickyColumn(this),!this.Editable&&this.RowData.Data.Nothing()?this.NoRecordFound():this.DisposeNoRecord(),this.Editable&&(this.MainSection.Element.addEventListener("contextmenu",this.BodyContextMenuHandler.bind(this)),this.EmptySection.Element.addEventListener("contextmenu",this.BodyContextMenuHandler.bind(this)))}StickyColumn(e,t=null){let n=["th","td"];e.FilterChildren(r=>r.Meta!=null&&r.Meta.Frozen,r=>!(r instanceof ListViewSearch)).forEach(r=>{let l=r.Element;n.includes(r.Element.tagName.toLowerCase())||(l=r.Element.closest("td")),t?Html.Take(l).Sticky({top:t}):Html.Take(l).Sticky({left:"0"})})}AddSections(){if(this.HeaderSection&&this.HeaderSection.Element!=null)return;if(Html.Take(this.ParentElement),Html.Instance.Div.Event("keydown",n=>this.HotKeyF6Handler(n,n.KeyCodeEnum())).Style(this.Meta.ChildStyle).ClassName("grid-wrapper").ClassName(this.Meta.ClassName).ClassName(this.Editable?"editable":""),this.Element=Html.Context,this.Meta.CanSearch&&Html.Instance.Div.ClassName("grid-toolbar search").End.Render(),this.ListViewSearch=new ListViewSearch(this.Meta),this.ListViewSearch.Entity=new ListViewSearchVM,this.Meta.DefaultAddStart){let n=this.Meta.DefaultAddStart;this.ListViewSearch.EntityVM.StartDate=new Date(Date.now()+n*24*3600*1e3)}let e=window.localStorage.getItem("FromDate"+this.Meta.Id);if(e!=null&&(this.ListViewSearch.EntityVM.StartDate=new Date(e)),this.Meta.DefaultAddEnd){let n=this.Meta.DefaultAddEnd;this.ListViewSearch.EntityVM.EndDate=new Date(Date.now()+n*24*3600*1e3)}let t=window.localStorage.getItem("ToDate"+this.Meta.Id);t!=null&&(this.ListViewSearch.EntityVM.EndDate=new Date(t)),this.AddChild(this.ListViewSearch),this.DataTable=Html.Take(this.Element).Div.ClassName("table-wrapper").Table.ClassName("table").GetContext(),Html.Instance.Thead.TabIndex(-1).End.TBody.ClassName("empty").End.TBody.End.TFooter.Render(),this.FooterSection=new ListViewSection(null,Html.Context),this.FooterSection.ParentElement=this.DataTable,this.AddChild(this.FooterSection),this.MainSection=new ListViewSection(null,this.FooterSection.Element.previousElementSibling),this.MainSection.ParentElement=this.DataTable,this.AddChild(this.MainSection),this.EmptySection=new ListViewSection(null,this.MainSection.Element.previousElementSibling),this.EmptySection.ParentElement=this.DataTable,this.AddChild(this.EmptySection),this.HeaderSection=new ListViewSection(null,this.EmptySection.Element.previousElementSibling),this.HeaderSection.ParentElement=this.DataTable,this.AddChild(this.HeaderSection),Html.Instance.EndOf(".table-wrapper"),Html.Take(this.Element),this.RenderPaginator()}SwapList(e,t){let n=this.Header[e];this.Header.splice(e,1),this.Header.splice(t,0,n)}SwapHeader(e,t){const n=this.Header[e];this.Header.splice(e,1),this.Header.splice(t,0,n)}ClickHeader(e,t){let n=this.LastNumClick;const s=this.DataTable;this.LastNumClick!=null&&s.querySelectorAll("tr:not(.summary)").forEach(function(u){if(u.hasAttribute("virtualrow")||u.classList.contains("group-row"))return;const m=Array.from(u.querySelectorAll("th, td"));m[n]&&(m[n].style.removeProperty("background-color"),m[n].style.removeProperty("color"))});const r=e.target.closest("th");n=Array.from(r.parentElement.querySelectorAll("th")).findIndex(u=>u===r),!(n<0)&&(this.LastThClick=r,this.LastNumClick=n,s.querySelectorAll("tr:not(.summary)").forEach(function(u){if(u.hasAttribute("virtualrow")||u.classList.contains("group-row"))return;const m=Array.from(u.querySelectorAll("th, td"));m[n]&&(m[n].style.backgroundColor="#cbdcc2",m[n].style.color="#000")}))}FocusOutHeader(e,t){let n=this.LastNumClick;const s=this.DataTable;this.LastNumClick!==null&&s.querySelectorAll("tr:not(.summary)").forEach(function(r){if(r.hasAttribute("virtualrow")||r.classList.contains("group-row"))return;const l=Array.from(r.querySelectorAll("th, td"));l[n].style.removeProperty("background-color"),l[n].style.removeProperty("color")})}ThHotKeyHandler(e,t){if(this.Meta.Focus)return;const n=e.keyCode;if(n===39){e.stopPropagation();const s=e.target.closest("th"),l=Array.from(s.parentElement.querySelectorAll("th")).findIndex(u=>u===s);s.parentElement.parentElement.parentElement.querySelectorAll("tr").forEach(function(u){if(u.hasAttribute("virtualrow")||u.classList.contains("group-row"))return;const m=Array.from(u.querySelectorAll("th, td"));if(!m[0].classList.contains("summary-header")){var y=l,C=l+1;y>C?m[C].parentNode.insertBefore(m[y],m[C]):m[C].parentNode.insertBefore(m[y],m[C].nextSibling),m[y].style.backgroundColor="#cbdcc2"}}),this.SwapList(l-1,l),this.SwapHeader(l,l+1),this.UpdateHeaders(this.GetHeaderSettings(),["Order","FieldName"]),s.focus()}else if(n===37){e.stopPropagation();const s=e.target.closest("th"),l=Array.from(s.parentElement.querySelectorAll("th")).findIndex(u=>u===s);s.parentElement.parentElement.parentElement.querySelectorAll("tr").forEach(function(u){if(u.hasAttribute("virtualrow")||u.classList.contains("group-row"))return;const m=Array.from(u.querySelectorAll("th, td"));if(!m[0].classList.contains("summary-header")){var y=l,C=l-1;y>C?m[C].parentNode.insertBefore(m[y],m[C]):m[C].parentNode.insertBefore(m[y],m[C].nextSibling),m[y].style.backgroundColor="#cbdcc2"}}),this.SwapList(l-1,l-2),this.SwapHeader(l,l-1),this.UpdateHeaders(),s.focus()}}FilterInSelected(e){let t=e;if(this._waitingLoad&&window.clearTimeout(this._renderPrepareCacheAwaiter),t.Operator===null)return;let n=this.Header.find(u=>u.Name===t.FieldName),s="",r=window.localStorage.getItem("LastSearch"+this.Meta.Id+n.Id);r!==null&&(s=r.toString());let l=new ConfirmDialog({Content:`Nhập ${n.Label} cần tìm `+t.OperatorText,NeedAnswer:!0,MultipleLine:!1,ComType:n.ComponentType==="Datepicker"||n.ComponentType==="Number"?n.ComponentType:"Textbox",Precision:n.Precision,PElement:this.MainSection.Element});if(l.YesConfirmed=()=>{let u=null,m=null;if(n.ComponentType==="Datepicker"?m=u=l.Datepicker.Value.toString():n.ComponentType==="Number"?(m=l.Number.GetValueText(),u=l.Number.Value.toString()):(m=l.Textbox.Text.trim().EncodeSpecialChar(),u=l.Textbox.Text.trim().EncodeSpecialChar()),window.localStorage.setItem("LastSearch"+this.Meta.Id+n.Id,u),this.CellSelected.some(y=>y.FieldName===t.FieldName&&y.Operator===OperatorEnum.In)&&!t.Shift){let y=this.CellSelected.find(C=>C.FieldName===t.FieldName&&C.Operator===OperatorEnum.In);y.Value=u,y.ValueText=m}else this.CellSelected.push({FieldName:t.FieldName,FieldText:n.Label,ComponentType:n.ComponentType,Shift:t.Shift,Value:u,ValueText:m,Operator:t.Operator,OperatorText:t.OperatorText,Logic:void 0,IsSearch:!1,Group:!1});this._summarys.push(new HTMLElement),l.Textbox.Text=null,this.ActionFilter()},l.Entity={ReasonOfChange:""},l.PElement=this.Element,l.Render(),s)if(n.ComponentType==="Datepicker"){l.Datepicker.Value=new Date(s);let u=l.Datepicker.Element;u.selectionStart=0,u.selectionEnd=s.length}else if(n.ComponentType==="Number"){l.Number.Value=parseFloat(s);let u=l.Number.Element;u.selectionStart=0,u.selectionEnd=s.length}else{l.Textbox.Text=s;let u=l.Textbox.Element;u.selectionStart=0,u.selectionEnd=s.length}}ActionFilter(){if(this.CellSelected.Nothing()){this.NoCellSelected();return}Spinner.AppendTo(this.DataTable);const e=this.CellSelected.filter(t=>(t.Value||t.ValueText)&&t.ComponentType==="SearchEntry"||t.FieldName.includes("."));this.CellSelected.filter(t=>t.FieldName.includes(".")),this.FilterDropdownIds(e).done(t=>{let n=0;const s=[];if(this.CellSelected.forEach(r=>{n=this.BuildCondition(r,t,n,s)}),Spinner.Hide(),this.Meta.ComponentType==="VirtualGrid"&&this.Meta.CanSearch&&this.HeaderSection.Element.focus(),this.Meta.ComponentType==="SearchEntry"&&this.Parent instanceof SearchEntry$1){const r=this.Parent;r._input&&r._input.focus()}Toast.Success(s.join("</br>")),this.ApplyFilter()})}async FilterDropdownIds(e){let t=e.map(n=>{let s=this.Header.find(r=>r.FieldName===n.FieldName);if(n.isSearch)return Promise.resolve([n.value]);{let r="Like";switch(n.operator){case OperatorEnum.Lr:r="StartWith";break;case OperatorEnum.Rl:r="EndWidth";break;case OperatorEnum.NotIn:r="NotLike";break}let l=`${r} ds.[${s.FormatData}] ${n.value}`;return Client.Instance.GetIds({ComId:s.Id,Where:l,MetaConn:this.MetaConn,DataConn:this.DataConn})}});return Promise.all(t)}BuildCondition(e,t,n,s){let r="",l=this.Header.find(T=>T.FieldName===e.FieldName),u=null,m=!e.Value.trim(),y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotIn:AdvSearchOperation.In;if(l.FieldName===this.IdField)r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} not in (${e.Value})`:`[ds].${e.FieldName} in (${e.Value})`,s.push(e.FieldText+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText);else if(l.ComponentType==="SearchEntry"&&l.FormatData.trim()){if(m)y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull,r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} is not null`:`[ds].${e.FieldName} is null`;else{let T=t[n];T.length?(u=T.join(","),r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} not in (${u})`:`[ds].${e.FieldName} in (${u})`):r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} != ${e.Value}`:`[ds].${e.FieldName} = ${e.Value}`,n++}s.push(l.Label+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText)}else if(["Input","Textbox","Textarea"].includes(l.ComponentType))m?(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull,r=e.Operator===OperatorEnum.NotIn?`([ds].${e.FieldName} is not null and [ds].${e.FieldName} != '')`:`([ds].${e.FieldName} is null or [ds].${e.FieldName} = '')`):(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotLike:AdvSearchOperation.Like,r=e.Operator===OperatorEnum.NotIn?`(CHARINDEX(N'${e.Value}', [ds].${e.FieldName}) = 0 or [ds].${e.FieldName} is null)`:`CHARINDEX(N'${e.Value}', [ds].${e.FieldName}) > 0`,e.Operator===OperatorEnum.Lr&&(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotStartWith:AdvSearchOperation.StartWith,r=e.Operator===OperatorEnum.NotIn?` [ds].${e.FieldName} not like N'${e.Value}%' or [ds].${e.FieldName} is null)`:` [ds].${e.FieldName} like N'${e.Value}%'`),e.Operator===OperatorEnum.Rl&&(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEndWidth:AdvSearchOperation.EndWidth,r=e.Operator===OperatorEnum.NotIn?` [ds].${e.FieldName} not like N'%${e.Value}' or [ds].${e.FieldName} is null)`:` [ds].${e.FieldName} like N'%${e.Value}'`)),s.push(l.Label+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText);else if(l.ComponentType==="Number"||l.ComponentType==="Label"&&l.FieldName.includes("Id"))e.Operator===OperatorEnum.NotIn||e.Operator===OperatorEnum.In?m?(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull,r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} is not null`:`[ds].${e.FieldName} is null`):(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqual:AdvSearchOperation.Equal,r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} != ${e.Value.replace(",","")}`:`[ds].${e.FieldName} = ${e.Value.replace(",","")}`):e.Operator===OperatorEnum.Gt||e.Operator===OperatorEnum.Lt?(r=e.Operator===OperatorEnum.Gt?`[ds].${e.FieldName} > ${e.Value}`:`[ds].${e.FieldName} < ${e.Value}`,y=e.Operator===OperatorEnum.Gt?AdvSearchOperation.GreaterThan:AdvSearchOperation.LessThan):(e.Operator===OperatorEnum.Ge||e.Operator===OperatorEnum.Le)&&(r=e.Operator===OperatorEnum.Ge?`[ds].${e.FieldName} >= ${e.Value}`:`[ds].${e.FieldName} <= ${e.Value}`,y=e.Operator===OperatorEnum.Ge?AdvSearchOperation.GreaterThanOrEqual:AdvSearchOperation.LessThanOrEqual),s.push(l.Label+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText);else if(l.ComponentType==="Checkbox")m?(y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull,r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} is not null`:`[ds].${e.FieldName} is null`):r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} != ${e.Value==="true"?"1":"0"}`:`[ds].${e.FieldName} = ${e.Value==="true"?"1":"0"}`,s.push(l.Label+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText);else if(l.ComponentType==="Datepicker"){if(e.Value=decodeURIComponent(e.Value),e.ValueText=decodeURIComponent(e.Value),e.Operator===OperatorEnum.NotIn||e.Operator===OperatorEnum.In)if(m)r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} is not null`:`[ds].${e.FieldName} is null`,y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull;else try{let T=new Date(e.Value);r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} != '${T.toISOString().split("T")[0]}'`:`[ds].${e.FieldName} = '${T.toISOString().split("T")[0]}'`,y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualDatime:AdvSearchOperation.EqualDatime}catch{let T=new Date(e.Value);r=e.Operator===OperatorEnum.NotIn?`[ds].${e.FieldName} != '${T.toISOString().split("T")[0]}'`:`[ds].${e.FieldName} = '${T.toISOString().split("T")[0]}'`,y=e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualDatime:AdvSearchOperation.EqualDatime}else if(!m){let T=new Date(e.Value);e.Operator===OperatorEnum.Gt||e.Operator===OperatorEnum.Lt?(r=e.Operator===OperatorEnum.Gt?`[ds].${e.FieldName} > '${T.toISOString()}'`:`[ds].${e.FieldName} < '${T.toISOString()}'`,y=e.Operator===OperatorEnum.Gt?AdvSearchOperation.GreaterThanDatime:AdvSearchOperation.LessThanDatime):(e.Operator===OperatorEnum.Ge||e.Operator===OperatorEnum.Le)&&(r=e.Operator===OperatorEnum.Ge?`[ds].${e.FieldName} >= '${T.toISOString()}'`:`[ds].${e.FieldName} <= '${T.toISOString()}'`,y=e.Operator===OperatorEnum.Ge?AdvSearchOperation.GreaterEqualDatime:AdvSearchOperation.LessEqualDatime)}s.push(l.Label+" <span class='text-danger'>"+e.OperatorText+"</span> "+e.ValueText)}let C=u||e.Value;if(this.AdvSearchVM.Conditions.some(T=>T.Field.FieldName===e.FieldName&&T.CompareOperatorId===y&&(T.CompareOperatorId===AdvSearchOperation.Like||T.CompareOperatorId===AdvSearchOperation.In||T.CompareOperatorId===AdvSearchOperation.EqualDatime))&&!e.Shift&&!e.Group){let T=this.AdvSearchVM.Conditions.find(F=>F.Field.FieldName===e.FieldName&&F.CompareOperatorId===y);T.Value=C.trim()?C:e.ValueText,this.Wheres.find(F=>F.Condition.includes(`[ds].${e.FieldName}`)).Condition=r}else if(!this.AdvSearchVM.Conditions.some(T=>T.Field.FieldName===e.FieldName&&T.CompareOperatorId===y&&T.Value===e.Value)){if(e.ComponentType==="Input"&&!e.Value.trim())this.AdvSearchVM.Conditions.push({Field:l,CompareOperatorId:e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqualNull:AdvSearchOperation.EqualNull,LogicOperatorId:e.Operator===OperatorEnum.NotIn?LogicOperation.And:LogicOperation.Or,Value:null,Group:!0}),this.AdvSearchVM.Conditions.push({Field:l,CompareOperatorId:e.Operator===OperatorEnum.NotIn?AdvSearchOperation.NotEqual:AdvSearchOperation.Equal,LogicOperatorId:e.Operator===OperatorEnum.NotIn?LogicOperation.And:LogicOperation.Or,Value:"",Group:!0});else if(l.FieldName.includes(".")){let T=l.FieldName.split(".")[0]+"Id";l.FieldName=T,this.AdvSearchVM.Conditions.push({Field:l,CompareOperatorId:y,LogicOperatorId:e.Logic||LogicOperation.And,Value:C.trim()?C:e.ValueText,Group:e.Group})}else this.AdvSearchVM.Conditions.push({Field:l,CompareOperatorId:y,LogicOperatorId:e.Logic||LogicOperation.And,Value:C.trim()?C:e.ValueText,Group:e.Group});this.Wheres.push({Condition:r,Group:e.Group})}return n}NoCellSelected(){if(this.MainSection.DisposeChildren(),this.ApplyFilter(),this.Meta.ComponentType==="VirtualGrid"&&this.Meta.CanSearch&&this.HeaderSection.Element.focus(),this.Meta.ComponentType==="SearchEntry"&&this.Parent instanceof SearchEntry$1){const e=this.Parent;e._input&&e._input.focus()}}ApplyLocal(e){if(!(e instanceof HTMLTableElement)){console.error("Invalid DataTable: not an HTMLTableElement");return}var t;if(this.Meta.TopEmpty?t=e.tBodies[e.tBodies.length-1].children:t=e.tBodies[0].children,this.CellSelected.Nothing()){for(var n=0;n<t.length;n++)t[n].classList.remove("d-none");return}this.LastElementFocus=null;var s=[],r=this.Header.findIndex(l=>l.FieldName===this.CellSelected[0].FieldName);this.CellSelected.forEach(l=>{for(var u=0;u<t.length;u++){var m=t[u].children;if(m[r]!==void 0){var y=m[r].textContent||"";l.Operator===OperatorEnum.In?y.toLowerCase().indexOf(l.ValueText.toLowerCase())===-1&&(s.some(C=>C===t[u])||s.push(t[u])):y.toLowerCase().indexOf(l.ValueText.toLowerCase())!==-1&&(s.some(C=>C===t[u])||s.push(t[u]))}}});for(var n=0;n<t.length;n++)s.some(u=>u===t[n])?t[n].classList.add("d-none"):(this.LastElementFocus===null&&(this.LastElementFocus=t[n].children[r]),t[n].classList.remove("d-none"));this.LastElementFocus!==null&&(this.LastElementFocus.focus(),this.LastElementFocus=null)}FilterSelected(e){if(e.Operator){if(!this.CellSelected.some(t=>t.FieldName===e.FieldName&&t.Value===e.Value&&t.ValueText===e.ValueText&&t.Operator===e.Operator)){const t=this.Header.find(n=>n.FieldName===e.FieldName);this.CellSelected.push({FieldName:e.FieldName,FieldText:t?t.Label:"",ComponentType:t?t.ComponentType:"",Value:e.Value,ValueText:e.ValueText,Operator:e.Operator,OperatorText:e.OperatorText,IsSearch:e.ActValue}),this._summarys.push(document.createElement("HTMLElement"))}this.ActionFilter()}}DisposeSumary(){this._summarys.length>0&&(this._summarys[this._summarys.length-1].remove(),this._summarys.pop()),this.lastListViewItem&&this.LastElementFocus&&(this.lastListViewItem.Focused(!0),this.LastElementFocus.focus())}HiddenSumary(){const e=this._summarys[this._summarys.length-1];e&&(e.style.display="none")}SearchDisplayRows(){if(!(this.DataTable instanceof HTMLTableElement)){console.error("Invalid DataTable: not an HTMLTableElement");return}const e=this.DataTable,t=e.tBodies[e.tBodies.length-1].children;for(let n=0;n<t.length;n++){if(t[n].classList.contains("virtual-row"))continue;const s=t[n].childNodes;let r=!1;for(let l=0;l<s.length;l++){const u=s[l];if(!(u instanceof HTMLElement))continue;const m=u.querySelector("input:first-child");let y;if(m!==null?y=String(Utils$1.GetPropValue(m,"value")):y=s[l].textContent||"",Utils$1.DecodeSpecialChar(y).toLowerCase().indexOf(Utils$1.DecodeSpecialChar(this.ListViewSearch.EntityVM.FullTextSearch.toLowerCase()))>-1){r=!0;break}}r?t[n].classList.remove("d-none"):t[n].classList.add("d-none")}}FocusCell(e,t){const n=e.target.closest("td"),s=e.target.closest("table");s.querySelectorAll("tbody tr").forEach(r=>r.classList.remove("focus")),s.querySelectorAll("tbody td").forEach(r=>r.classList.remove("cell-selected")),n.closest("tr").classList.add("focus"),n.classList.add("cell-selected")}ActionKeyHandler(e,t,n,s,r,l){let u="",m="",y="";if([KeyCodeEnum.F4,KeyCodeEnum.F8,KeyCodeEnum.F9,KeyCodeEnum.F10,KeyCodeEnum.F11,KeyCodeEnum.F2,KeyCodeEnum.UpArrow,KeyCodeEnum.DownArrow,KeyCodeEnum.Home,KeyCodeEnum.End,KeyCodeEnum.Insert].includes(l)||(e.ctrlKey||e.metaKey)&&l===KeyCodeEnum.D){if(e.preventDefault(),e.stopPropagation(),!s)return;switch(u=s.FieldName,s.Meta.ComponentType){case"SearchEntry":y=n.Entity[t.FieldName].toString().EncodeSpecialChar();break;case"Number":y=n.Entity[t.FieldName].toString().replace(",","");break;case"Checkbox":y=s.GetValue().toString().toLowerCase();break;default:y=s.GetValue().toString().EncodeSpecialChar();break}y===null?m=null:s.Meta.Editable?m=s.GetValueText().toString().DecodeSpecialChar():m=s.GetValueTextAct().toString().DecodeSpecialChar()}switch(l){case KeyCodeEnum.F2:this.FilterSelected({Operator:2,OperatorText:"Exclude",Value:y,FieldName:u,ValueText:m,ActValue:!0});break;case KeyCodeEnum.F4:this.ProcessFilterDetail(e,s,r,u,m,y);break;case KeyCodeEnum.F8:this.ProcessHardDelete();break;case KeyCodeEnum.F9:this.FilterSelected({Operator:1,OperatorText:"Contains",Value:y,FieldName:u,ValueText:m,ActValue:!0}),s.Focus();break;case KeyCodeEnum.F11:this.ProcessSort(e,s);break;case KeyCodeEnum.UpArrow:this.MoveFocusUp(e,s,u);break;case KeyCodeEnum.DownArrow:this.MoveFocusDown(e,s,u);break;case KeyCodeEnum.LeftArrow:this.MoveFocusLeft(e,s);break;case KeyCodeEnum.RightArrow:this.MoveFocusRight(e,s);break;case KeyCodeEnum.Home:this.MoveFocusHome();break;case KeyCodeEnum.End:this.MoveFocusEnd();break;case KeyCodeEnum.Insert:this.ToggleItemSelection();break}}MoveFocusUp(e,t,n){let s=this.GetItemFocus();if(s.RowNo===0&&!(e.ctrlKey||e.metaKey))return;let r=this.AllListViewItem.filter(l=>!l.GroupRow).find(l=>l.RowNo===s.RowNo-1);if(!r)if(this.Meta.CanAdd)r=this.EmptySection.FirstChild;else return;this.CopyValue(e,t,n,s,r)}MoveFocusDown(e,t,n){let s=this.GetItemFocus();if(!s&&!(e.ctrlKey||e.metaKey))return;let r=this.AllListViewItem.filter(l=>!l.GroupRow).find(l=>l.RowNo===s.RowNo+1);if(!r)if(this.Meta.CanAdd)r=this.EmptySection.FirstChild;else return;this.CopyValue(e,t,n,s,r)}MoveFocusLeft(e,t){var r;if(!this.Meta.IsRealtime&&!(e.ctrlKey||e.metaKey))return;e.preventDefault(),e.stopPropagation();let n=this.LastListViewItem,s=n.Children.find(l=>l.Element.closest("td")===t.Element.closest("td").previousElementSibling);!s||n.Children.length===0||((r=s.ParentElement)==null||r.focus(),s.Focus(),s.Meta.Editable&&!s.Disabled&&s.Element instanceof HTMLInputElement&&(s.Element.selectionStart=0,s.Element.selectionEnd=s.GetValueText().length))}MoveFocusRight(e,t){var r;if(!this.Meta.IsRealtime&&!(e.ctrlKey||e.metaKey))return;e.preventDefault(),e.stopPropagation();let s=this.LastListViewItem.Children.find(l=>l.Element.closest("td")===t.element.closest("td").nextElementSibling);s&&((r=s.ParentElement)==null||r.focus(),s.Focus(),s.Meta.Editable&&!s.Disabled&&s.Element instanceof HTMLInputElement&&(s.Element.selectionStart=0,s.Element.selectionEnd=s.GetValueText().length))}MoveFocusHome(){let e=this.AllListViewItem[0];e==null||e.Focus(),this.DataTable.parentElement.scrollTop=0}MoveFocusEnd(){let e=this.AllListViewItem[this.AllListViewItem.length-1];e==null||e.Focus(),this.DataTable.parentElement.scrollTop=this.DataTable.parentElement.scrollHeight}ToggleItemSelection(){let e=this.GetItemFocus();e.Selected=!e.Selected}ProcessHardDelete(){if(this.Disabled)return;const e=this.GetSelectedRows();if(e.length===0){Toast.Warning("Vui lòng chọn dòng cần xóa");return}const t=e.every(s=>Utils$1.IsOwner(s,!1));this.CanDo(s=>s.CanDelete&&t||s.CanDeleteAll)&&this.HardDeleteSelected()}ProcessFilterDetail(e,t,n,s,r,l){const u=ContextMenu.Instance;u.PElement=this.MainSection.Element,u.Top=n.getBoundingClientRect().top,u.Left=n.getBoundingClientRect().left,u.MenuItems=[{Icon:"fal fa-angle-double-right",Text:"Chứa",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.In,OperatorText:"Chứa",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-not-equal",Text:"Không chứa",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.NotIn,OperatorText:"Không chứa",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-hourglass-start",Text:"Trái phải",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Lr,OperatorText:"Trái phải",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-hourglass-end",Text:"Phải trái",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Rl,OperatorText:"Phải trái",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}}],(t.Meta.ComponentType==="Number"||t.Meta.ComponentType==="Datepicker")&&u.MenuItems.push({Icon:"fal fa-greater-than",Text:"Lớn hơn",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Gt,OperatorText:"Lớn hơn",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-less-than",Text:"Nhỏ hơn",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Lt,OperatorText:"Nhỏ hơn",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-greater-than-equal",Text:"Lớn hơn bằng",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Ge,OperatorText:"Lớn hơn bằng",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}},{Icon:"fal fa-less-than-equal",Text:"Nhỏ hơn bằng",Click:this.FilterInSelected,Parameter:{Operator:OperatorEnum.Le,OperatorText:"Nhỏ hơn bằng",Value:l,FieldName:s,ValueText:r,Shift:e.shiftKey}}),u.Render()}ProcessSort(e,t){if(t.Meta.ComponentType==="Button")return;let n=this.HeaderSection.Children.find(l=>l.Meta.Id===t.Meta.Id);n.Element.classList.remove("desc","asc");const s=t.ComponentType==="SearchEntry"?t.Meta.FieldText:t.FieldName,r={FieldName:s,OrderbyDirectionId:OrderbyDirection.ASC,ComId:t.Meta.Id};if(!this.AdvSearchVM.OrderBy.length)this.AdvSearchVM.OrderBy=[r],n.Element.classList.add("desc");else{const l=this.AdvSearchVM.OrderBy.find(u=>u.FieldName===s);if(l)this.AlterExistSort(n,l);else{const u=e.shiftKey;this.RemoveOtherSorts(u),n.Element.classList.add("desc"),this.AdvSearchVM.OrderBy.push(r)}}localStorage.setItem("OrderBy"+this.Meta.Id,JSON.stringify(this.AdvSearchVM.OrderBy)),this.ReloadData()}AlterExistSort(e,t){if(t.OrderbyDirectionId===OrderbyDirection.ASC)t.OrderbyDirectionId=OrderbyDirection.DESC,e.Element.classList.replace("asc","desc");else{const n=this.AdvSearchVM.OrderBy.indexOf(t);n!==-1&&this.AdvSearchVM.OrderBy.splice(n,1)}}RemoveOtherSorts(e){e||(this.HeaderSection.Children.forEach(t=>{t.Element.classList.remove("desc"),t.Element.classList.remove("asc")}),this.AdvSearchVM.OrderBy.length=0)}CopyValue(e,t,n,s,r){var u;if(this.LastListViewItem=r,s.Focused(!1),r.Focused(!0),!n||n.trim()==="")return;let l=r.FilterChildren(m=>m.Meta.Id===t.Meta.Id)[0];if(l&&(this.LastComponentFocus=l.Meta,(u=l.ParentElement)==null||u.focus(),l.Focus(),l.Meta.Editable&&!l.Disabled&&l.Element instanceof HTMLInputElement&&(l.Element.selectionStart=0,l.Element.selectionEnd=l.GetValueText().length),this.LastElementFocus=l.Element,e.shiftKey)){r.Entity[n]=t.GetValue();let m=r.FilterChildren(y=>y.FieldName===l.FieldName)[0];m&&(!m.Disabled||m.Meta.Editable)&&(m.Dirty=!0,(async()=>{if(m.Meta.ComponentType==="SearchEntry"){m.UpdateView();let y=t;m.PopulateFields(y.Matched),await m.DispatchEvent(m.Meta.Events,"change",r.Entity,y.Matched)}else m.UpdateView(),m.PopulateFields(),await m.DispatchEvent(m.Meta.Events,"change",r.Entity);await r.ListViewSection.ListView.DispatchEvent(r.ListViewSection.ListView.Meta.Events,"change",r.Entity),this.Meta.IsRealtime&&await r.PatchUpdateOrCreate()})())}}RenderViewPort(e=!0,t=!1,n=null){}HotKeyF6Handler(e,t){switch(t){case KeyCodeEnum.F6:if(e.preventDefault(),e.stopPropagation(),this._summarys.length){let s=this._summarys[this._summarys.length-1];if(this.Meta.FilterLocal){s.innerHTML===""?(this.CellSelected.pop(),this.ActionFilter(),this._summarys.pop()):s.style.display==="none"?(this.CellSelected.pop(),this.ActionFilter(),s.style.display=""):(this._summarys.pop(),s.remove());return}if(s.innerHTML===""){this.CellSelected.pop(),this.Wheres.pop();let r=this.AdvSearchVM.Conditions[this.AdvSearchVM.Conditions.length-1];r&&r.Field.ComponentType==="Input"&&!r.Value.trim()?(this.AdvSearchVM.Conditions.pop(),this.AdvSearchVM.Conditions.pop()):this.AdvSearchVM.Conditions.pop(),this.ActionFilter(),this._summarys.pop()}else if(this._waitingLoad&&clearTimeout(this._renderPrepareCacheAwaiter),s.style.display==="none"){this.CellSelected.pop(),this.Wheres.pop();let r=this.AdvSearchVM.Conditions[this.AdvSearchVM.Conditions.length-1];r&&r.Field.ComponentType==="Input"&&!r.Value.trim()?(this.AdvSearchVM.Conditions.pop(),this.AdvSearchVM.Conditions.pop()):this.AdvSearchVM.Conditions.pop(),this.ActionFilter(),s.style.display=""}else this._summarys.pop(),s.remove()}break;case KeyCodeEnum.F3:e.preventDefault(),e.stopPropagation(),this.GetRealTimeSelectedRows().then(s=>{s.length===0&&(s=this.RowData.Data);let r=this.Header.filter(u=>u.ComponentType==="Number");if(r.length===0){Toast.Warning("Vui lòng cấu hình");return}let l=r.map(u=>{let m=s.map(y=>y[u.FieldName]).filter(y=>y!=null).reduce((y,C)=>y+parseFloat(C),0);return u.Label+" : "+(m%2>0?m.toFixed(2):Math.round(m).toString())});Toast.Success(l.join("</br>"),6e3)});break;case KeyCodeEnum.F1:e.preventDefault(),e.stopPropagation(),this.ToggleAll();break;case KeyCodeEnum.U:if(e.ctrlKey||e.metaKey){if(this.Disabled||!this.Meta.CanAdd)return;e.preventDefault(),e.stopPropagation(),this.DuplicateSelected(e,!0)}break}if(!this.LastListViewItem||!this.LastListViewItem.Children)return;let n=this.LastListViewItem.Children.find(s=>{var r;return s.Meta.Id===((r=this.LastComponentFocus)==null?void 0:r.Id)});n&&this.ActionKeyHandler(e,this.LastComponentFocus,this.LastListViewItem,n,n.Element.closest("td"),t)}async AddRow(e,t=0,n=!0){let s=await super.AddRow(e,t,n);return this.StickyColumn(s),this.RenderIndex(),s}AddNewEmptyRow(){if(this.Disabled||!this.Editable||this.EmptySection&&this.EmptySection.Children.length>0)return;let e={};e[this.IdField]=Uuid7.NewGuid();let t=this.RenderRowData(this.Header,e,this.EmptySection,null,!0);this.StickyColumn(t),this.Meta.TopEmpty?this.DataTable.insertBefore(this.EmptySection.Element,this.MainSection.Element):this.DataTable.insertBefore(this.MainSection.Element,this.EmptySection.Element),t.Children.forEach(n=>n.SetRequired()),this.DispatchCustomEvent(this.Meta.Events,"AfterEmptyRowCreated",e).then(()=>{this.StickyColumn(t)})}FilterColumns(e){if(!e||e.length===0)return e;const t=!this.EditForm||this.EditForm.Policies.length==0?[]:this.EditForm.GetGridPolicies(e.map(s=>s.id),Utils$1.ComponentId),n=(t.length==0?e.filter(s=>!s.hidden&&s.id!==this.Meta.Id).filter(s=>!s.isPrivate||t.filter(r=>r.RecordId===s.Id).every(r=>r.CanRead)):e).map(this.CalcTextAlign).sort((s,r)=>r.Frozen-s.Frozen||(r.ComponentType==="Button"?1:0)-(s.ComponentType==="Button"?1:0)||s.Order-r.Order);return this.OrderHeaderGroup(n),this.header=[],this.header.push(this.ToolbarColumn),this.header.push(...n),this.header=this.header.filter(s=>s!==null),this.header}async ApplyFilter(){this.DataTable.parentElement.scrollTop=0,await this.ReloadData(this.cacheHeader=!0)}ColumnResizeHandler(){const e=n=>{if(n===null)return;n.querySelectorAll("th").forEach(r=>{const l=document.createElement("div");l.classList.add("resizer"),r.appendChild(l),t(r,l)})},t=(n,s)=>{let r=0,l=0;const u=C=>{C.preventDefault(),r=C.clientX;const T=window.getComputedStyle(n);l=parseInt(T.width,10),document.addEventListener("mousemove",m),document.addEventListener("mouseup",y),s.classList.add("resizing")},m=C=>{C.preventDefault();const T=C.clientX-r;n.style.width=`${l+T}px`,n.style.minWidth=`${l+T}px`,n.style.maxWidth=`${l+T}px`},y=()=>{s.classList.remove("resizing"),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)};s.addEventListener("mousedown",u)};e(this.DataTable)}RenderContent(){var t,n,s,r;if(this.LoadRerender||this.Rerender(),this.AddSections(),!this._hasFirstLoad&&this.VirtualScroll){this._hasFirstLoad=!0;return}let e=this.GetViewPortItem();if(this.FormattedRowData=this.Meta.LocalRender?this.Meta.LocalData:this.RowData.Data,!this.FormattedRowData||this.FormattedRowData.length===0){this.MainSection.DisposeChildren(),(n=(t=this.MainSection)==null?void 0:t.Element)==null||n.removeEventListener("contextmenu",this.BodyContextMenuHandler),(r=(s=this.MainSection)==null?void 0:s.Element)==null||r.removeEventListener("contextmenu",this.BodyContextMenuHandler),this.DomLoaded();return}if(this.DisposeNoRecord(),this.VirtualScroll&&this.FormattedRowData.length>e&&(this.FormattedRowData=this.FormattedRowData.slice(0,e)),this.MainSection.Children.length>0){this.UpdateExistRowsWrapper(!1,0,e);return}this.MainSection.Show=!1,this.FormattedRowData.forEach(l=>{Html.Take(this.MainSection.Element),this.RenderRowData(this.Header,l,this.MainSection)}),this.MainSection.Show=!0,this.ContentRendered(),this.DomLoaded()}SetFocusingCom(){if(!this.AutoFocus)if(this.EntityFocusId!=null&&this.LastComponentFocus!=null){let e=this.MainSection.Children.flatMap(t=>t.Children).find(t=>t.Entity[this.IdField].toString()===this.EntityFocusId&&t.Meta.Id===this.LastComponentFocus.Id);if(e){let t=this.AllListViewItem.find(n=>n.Entity[this.IdField].toString()===this.EntityFocusId);t&&(t.Focused(!0),e.ParentElement.classList.add("cell-selected"),this.LastListViewItem=t,this.LastComponentFocus=e.Meta,this.LastElementFocus=e.Element)}else this.HeaderSection.Element.focus()}else this.HeaderSection.Element.focus()}UpdateExistRowsWrapper(e,t,n){if(!this._hasFirstLoad){this._hasFirstLoad=!0;return}this.UpdateExistRows(e),this.DomLoaded()}UpdateExistRows(e){const t=this.FormattedRowData.slice(),n=this.AllListViewItem.slice(0,t.length);n.forEach((r,l)=>{r.Entity=t[l],this.FlattenChildren(r).forEach(u=>{u.Entity=t[l]}),r.UpdateView()}),this.AllListViewItem.length<=t.length?t.slice(n.length).forEach(r=>{const l=this.RenderRowData(this.Header,r,this.MainSection);this.StickyColumn(l)}):this.MainSection.Children.slice(t.length).forEach(r=>r.Dispose()),e!==void 0&&(this.Dirty=e)}FlattenChildren(e){const t=[],n=[e];for(;n.length;){const s=n.pop();s.Children&&(t.push(...s.Children),s.Children.forEach(r=>n.push(r)))}return t}RenderRowData(e,t,n,s=null,r=!1){const l=n.Element;Html.Take(l);const u=new GridViewItem(ElementType.tr);u.EmptyRow=r,u.Entity=t,u.ParentElement=l,u.PreQueryFn=this._preQueryFn,u.ListView=this,u.Meta=this.Meta,n.AddChild(u,s),r||(u.Dirty=!0);var m=Html.Context;return m.tabIndex=-1,s&&((s>=m.parentElement.children.length||s<0)&&(s=0),m.parentElement.insertBefore(m,m.parentElement.children[s])),e.length>0&&e.forEach(y=>{u.RenderTableCell(t,y)}),r&&this.Children.forEach(y=>y.AlwaysLogHistory=!0),u}AddSummaries(){if(this.Header.every(s=>!s.Summary||s.Summary.trim()===""))return;const e=this.Header.filter(s=>s.Summary&&s.Summary.trim()!=="");this.MainSection.Element.querySelectorAll(`.${this.SummaryClass}`).forEach(s=>s.remove());const n=new Set(e.map(s=>s.Summary)).size;e.forEach(s=>{this.RenderSummaryRow(s,this.Header,this.FooterSection.Element,n)})}DuplicateSelected(e,t=!1){const n=this.GetSelectedRows(),s=n.map(l=>({...l,[this.IdField]:Uuid7.NewGuid()}));if(!(s.length==0||!this.CanWrite)){Toast.Success("Copying data..."),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforePasted,n,s);var r=this.AllListViewItem.filter(l=>l.EmptyRow).indexOf(l=>l==this.AllListViewItem.filter(u=>u.Selected)[0])+1;this.Meta.TopEmpty?r=0:r=this.AllListViewItem.LastOrDefault().RowNo,this.AddRowsNo(s,r).then(l=>{this.Dirty=!0;var u=l[0].FilterChildren(m=>m.Meta.Editable)[0];u==null||u.Focus(),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterPasted,n,s),this.RenderIndex(),this.Meta.IsSumary&&this.AddSummaries(),this.ClearSelected(),this.LastListViewItem=l.FirstOrDefault(),this.Meta.IsRealtime?(l.forEach(m=>{m.PatchUpdateOrCreate().then()}),Toast.Success("Data copied successfully."),this.Dirty=!1):Toast.Success("Data copied successfully.")})}}GetStartIndex(e,t){let n=this.AllListViewItem.findIndex(s=>s.Selected);return t&&e.keyCode===KeyCodeEnum.U&&(e.ctrlKey||e.metaKey)&&(this.Meta.TopEmpty?n=0:n=this.AllListViewItem[this.AllListViewItem.length-1].RowNo),n}RowsAdded(e,t,n){const s=e[0]?e[0].FilterChildren(r=>r.Meta.Editable)[0]:null;s&&s.Focus(),this.RenderIndex(),this.Meta.IsSumary&&this.AddSummaries(),this.ClearSelected(),e.forEach(r=>{r.Selected=!0}),this.LastListViewItem=e[0]||null,this.Meta.IsRealtime?Promise.all(e.map(r=>r.PatchUpdateOrCreate())).then(()=>{Toast.Success("Sao chép dữ liệu thành công!"),this.Dirty=!1}):Toast.Success("Sao chép dữ liệu thành công!"),this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterPasted,t,n)}RenderSummaryRow(e,t,n,s){let r=this.CreateSummaryTableRow(e,n,s);if(!r)return;const l=r.classList.contains("summary"),u=e.SummaryColSpan||0;if(r.classList.add("summary"),!l&&t.includes(e)&&this.ResetSummaryRow(r,u),!t.includes(e)){this.ClearSummaryContent(r);return}this.SetSummaryHeaderText(e,r),this.CalcSumCol(e,t,r,u)}SetRowData(e){e=e??[],this.RowData._data===null||typeof this.RowData._data=="string"?this.RowData._data=e:(this.RowData._data.length=0,e&&e.length>0&&e.forEach(t=>this.RowData._data.push(t))),this.RenderContent(),this.Entity!=null&&this.ShouldSetEntity&&(this.Entity[this.Name]=this.RowData.Data)}SetSummaryHeaderText(e,t){if(!e.Summary||e.Summary.trim()==="")return;let n=t.cells[0];n.colSpan=e.SummaryColSpan,n.textContent=e.Summary,n.classList.add("summary-header")}CreateSummaryTableRow(e,t,n){if(!t)return null;let s=e.Summary,r=Array.from(t.rows).filter(m=>m.classList.contains("summary-header")),l=Array.from(r).reverse().find(m=>Array.from(m.cells).some(y=>y.textContent===s));if(l||(l=r[r.length-1]),r.length>=n)return l;if(!this.MainSection.FirstChild)return null;let u=this.MainSection.FirstChild.Element.cloneNode(!0);return t.appendChild(u),u instanceof Element&&(t.appendChild(u),Array.from(u.children).forEach(m=>m.innerHTML="")),u}CalcSumCol(e,t,n,s){const r=t.indexOf(e),l=n.cells[r-s+1],u=e.FormatData?e.FormatData:"{0:n0}",m=this.RowData.Data.some(C=>typeof C[e.FieldName]=="number"),y=this.RowData.Data.reduce((C,T)=>{const F=T[e.FieldName];return C+(F?parseFloat(F):0)},0);l.textContent=Utils$1.FormatEntity(u,m?y:this.RowData.Data.length)}ResetSummaryRow(e,t){for(let n=1;n<t;n++)e.cells[0]&&e.cells[0].remove();this.ClearSummaryContent(e)}ClearSummaryContent(e){Array.from(e.cells).forEach(t=>{t.innerHTML=""})}async RowChangeHandler(e,t,n,s=null){if(t.EmptyRow&&n.EvType===EventType.Change){if(!Utils$1.isNullOrWhiteSpace(this.Meta.DefaultVal)){var r=Utils$1.IsFunction(this.Meta.DefaultVal,!1,this);r&&Object.getOwnPropertyNames(r).forEach(u=>{t.Entity[u]=r[u]})}await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreated,e,this);let l;this.Meta.IsRealtime?(l=await t.PatchUpdateOrCreate(),t.Entity=l,this.Meta.ComponentType=="VirtualGrid"&&this.CacheData.push(l),this.Dirty=!1):(l=t.Entity,this.Dirty=!0),t.UpdateView(!0),this.MoveEmptyRow(t),this.EmptySection.Children=[],this.AddNewEmptyRow(),this.ClearSelected(),await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreated,e,this)}s&&s.ComponentType=="GridView"&&await this.DispatchEvent(s.Meta.Events,n.EvType,e,t),await this.DispatchEvent(this.Meta.Events,n.EvType,e,t),n.EvType===EventType.Change&&(this.PopulateFields(),this.RenderIndex(),this.Meta.IsSumary&&this.AddSummaries())}MoveEmptyRow(e){this.RowData.Data.includes(e.Entity)||(this.Meta.TopEmpty?(this.RowData.Data.unshift(e.Entity),this.MainSection.Children.includes(this.EmptySection.FirstChild)||this.MainSection.Children.unshift(this.EmptySection.FirstChild),this.MainSection.Element.prepend(this.EmptySection.Element.firstElementChild)):(this.RowData.Data.push(e.Entity),this.MainSection.Element.appendChild(this.EmptySection.Element.firstElementChild),this.MainSection.Children.includes(this.EmptySection.FirstChild)||this.MainSection.Children.push(this.EmptySection.FirstChild)),this.Meta.IsRealtime&&e.Element.classList.remove("new-row"),e.Parent=this.MainSection,e.ListViewSection=this.MainSection)}ProcessMetaData(e,t){let n=e.length>1&&e[1].length>0?e[1][0].total:null,s=e.length>2?e[2].map(r=>Utils$1.CastProp(r,"Component")):null;this.Settings=e.length>3&&e[3].length>0?Utils$1.As(e[3][0],"UserSetting"):null,this.FilterColumns(this.MergeComponent(s,this.Settings)),this.RenderTableHeader(this.Header),this.Paginator!=null&&(this.Paginator.Options.Total=n!==null?n:t)}RenderTableHeader(e){(!e||e.length==0)&&(e=this.Header),e.Count!=this.Header.Count&&this.FilterColumns(e),this._hasFirstLoad=!0,this.HeaderSection.Element===null&&this.AddSections(),e.forEach((n,s)=>n.PostOrder=s),this.HeaderSection.DisposeChildren();const t=e.some(n=>n.GroupName&&n.GroupName!=="");Html.Take(this.HeaderSection.Element).Clear().TRow.ForEach(e,(n,s)=>{var u;if(t&&n.GroupName!==""){if(n!==e.find(m=>m.GroupName===n.GroupName))return;Html.Th.Render(),Html.ColSpan(e.filter(m=>m.GroupName===n.GroupName).length),Html.IHtml(n.GroupName).Render();return}Html.Th.TabIndex(-1).Width(n.AutoFit?"auto":n.Width).Style(`${n.Style};min-width: ${n.MinWidth}; max-width: ${n.MaxWidth}`).TextAlign("center").Event(EventType.DblClick,this.EditForm.ComponentProperties.bind(this),n).Event(EventType.ContextMenu,this.HeaderContextMenu.bind(this),n).Event(EventType.FocusOut,m=>this.FocusOutHeader(m,n)).Event(EventType.KeyDown,m=>this.ThHotKeyHandler(m,n));var r=new Section$1(null,Html.Context);r.Meta=n,this.HeaderSection.AddChild(r),t&&(!n.GroupName||n.GroupName==="")&&Html.Instance.RowSpan(2),!t&&this.Header.some(m=>m.GroupName&&m.GroupName.length)&&Html.Instance.ClassName("header-group"),n.StatusBar&&Html.Instance.Icon("fal fa-edit").Event(EventType.Click,this.ToggleAll.bind(this)).End.Render();const l=(u=this.AdvSearchVM.OrderBy)==null?void 0:u.find(m=>m.ComId===n.Id);l&&Html.Instance.ClassName(l.OrderbyDirectionId===OrderbyDirection.ASC?"asc":"desc").Render(),n.Icon?Html.Instance.Icon(n.Icon).Margin(Direction.Right,0).End.Render():n.StatusBar||Html.Instance.Event(EventType.Click,m=>this.ClickHeader(m,n)).IHtml(n.Label).Render(),n.ComponentType==="Number"&&(Html.Instance.Div.End.Render(),Html.Instance.Span.Style("display: block;").End.Render()),n.Description&&Html.Instance.Attr("title",n.Description),Client.Instance.SystemRole&&(Html.Instance.Attr("contenteditable","true"),Html.Instance.Event(EventType.Input,m=>this.ChangeHeader(m,n))),this.CreateResizableTable(Html.Context),Html.Instance.EndOf(ElementType.th)}).EndOf(ElementType.tr).Render(),t&&Html.Instance.TRow.ForEach(e,(n,s)=>{if(t&&n.GroupName!==""){Html.Instance.Th.DataAttr("field",n.FieldName).Width(n.Width).Style(`min-width: ${n.MinWidth}; max-width: ${n.MaxWidth}`).TextAlign(n.TextAlignEnum).Event(EventType.ContextMenu,this.HeaderContextMenu.bind(this),n).InnerHTML(n.Label);const r=new Section$1(ElementType.tr);r.ParentElement=Html.Context.parentElement,r.Meta=n,this.HeaderSection.AddChild(r)}}),this.HeaderSection.Children=this.HeaderSection.Children.sort((n,s)=>n.Meta.PostOrder-s.Meta.PostOrder)}CreateResizableTable(e){var t=document.createElement("div");t.classList.add("resizer"),e.appendChild(t),this.CreateResizableColumn(e,t)}CreateResizableColumn(e,t){this.x=0,this.w=0,t.addEventListener("mousedown",n=>this.MouseDownHandler(n,e,t))}MouseDownHandler(e,t,n){e.preventDefault(),this.x=e.clientX;var s=window.getComputedStyle(t);this.w=parseFloat(s.width.replace("px","")==""?"0":s.width.replace("px","")),this.mouseMoveHandler=r=>this.MouseMoveHandler(r,t,n),this.mouseUpHandler=r=>this.MouseUpHandler(r,t,n),document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),n.classList.add("resizing")}MouseMoveHandler(e,t,n){e.preventDefault();var s=e.clientX-this.x;t.style.width=`${this.w+s}px`,t.style.minWidth=`${this.w+s}px`,t.style.maxWidth=`${this.w+s}px`}MouseUpHandler(e,t,n){e.preventDefault(),this.UpdateHeaders(),n.classList.remove("resizing"),document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}UpdateHeaders(){const e=this.HeaderSection.Children.filter(l=>l.Meta&&l.Meta.Id),t=new Map(e.map(l=>[l.Element,l.Meta.Id]));let n=0;const s=Array.from(this.HeaderSection.Element.querySelectorAll("th"));s.forEach(l=>{l.Order=n,n++}),s.map(l=>{const u=t.get(l);if(u){const m=`${l.offsetWidth}px`,y={Width:m,MaxWidth:m,MinWidth:m};return{Changes:[{Field:"Id",Value:u},{Field:"Width",Value:m},{Field:"MaxWidth",Value:m},{Field:"MinWidth",Value:m},{Field:"Order",Value:l.Order}],Table:this.Meta.RefName,header:l,widthProps:y}}return null}).filter(l=>l!=null).forEach(l=>{Client.Instance.PatchAsync(l).then(u=>{Object.assign(l.header.style,l.widthProps)})})}ChangeHeader(e,t){clearTimeout(this._imeout),this._imeout=setTimeout(()=>{let n=e.target,s={Table:"Component",Changes:[{Field:"Component.Id",Value:t.Id,OldVal:t.Id},{Field:"Component.Label",Value:n.textContent.trim(),OldVal:t.Label}]};Client.Instance.PatchAsync(s)},1e3)}async CustomQuery(e){try{const t=await Client.Instance.SubmitAsync({NoQueue:!0,Url:`/api/feature/com?t=${Client.Token.TenantCode||Client.Tenant}`,Method:"POST",JsonData:JSON.stringify(e,this.getCircularReplacer(),2),AllowAnonymous:!0});if(!t.value||t.value.length===0)return this.SetRowData(null),null;let n=t.count.total&&t.count.total>0?t.count.total:t.value.length,s=[...t.value];return this.ClearRowData(),this.UpdatePagination(n,s.length),await this.LoadMasterData(s),this.SetRowData(s),s}catch(t){throw console.error(t),t}}UpdatePagination(e,t){if(this.Paginator){var n=this.Paginator.Options;n.Total=e,n.CurrentPageCount=t,n.PageNumber=(n.PageIndex||0)+1,n.StartIndex=(n.PageIndex||0)*n.PageSize+1,n.EndIndex=n.StartIndex+n.CurrentPageCount,this.Paginator.UpdateView()}}ToggleAll(){if(this.AllListViewItem.some(t=>t.Selected)){this.ClearSelected();return}this.AllListViewItem.forEach(t=>{t.EmptyRow||(t.Selected=!0)})}HeaderContextMenu(e,t){e.preventDefault(),e.stopPropagation();var n=ContextMenu.Instance;n.Top=e.clientY,n.Left=e.clientX,n.MenuItems=[],Client.Instance.SystemRole&&n.MenuItems.push({Icon:"fal fa-wrench",Text:"Column Properties",Click:()=>this.EditForm.ComponentProperties(t)}),n.Render()}HideWidth(e,t){const n=t.target.closest("th");n&&(n.style.minWidth="",n.style.maxWidth="",n.style.width=""),this.UpdateHeaders(this.GetHeaderSettings())}GetHeaderSettings(){const e={};this.HeaderSection.Children.filter(s=>{var r;return((r=s.Meta)==null?void 0:r.Id)!=null}).forEach(s=>{e[s.Meta.Id]=s});const t=Array.from(this.HeaderSection.Element.firstElementChild.children);return this.HeaderSection.Children.forEach(s=>{s.Meta.Order=t.indexOf(s.Element)}),this.Header.filter(s=>s.Id!=null).map(s=>{const r=e[s.Id];return r?(s.Width=`${r.Element.offsetWidth}px`,s.MaxWidth=`${r.Element.offsetWidth}px`,s.MinWidth=`${r.Element.offsetWidth}px`,s):null}).filter(s=>s!=null).sort((s,r)=>s.Frozen-r.Frozen||s.Order-r.Order)}ShowWidth(e){const t=e.header,n=e.events;n.target.firstChild&&!n.target.firstChild.length&&n.target.prepend(document.createTextNode(t.ShortDesc)),n.target.style.minWidth="",n.target.style.maxWidth="",n.target.style.width="",this.UpdateHeaders(this.GetHeaderSettings())}FrozenColumn(e){const t=e.header,n=this.Header.find(s=>s.Id===t.Id);n&&(n.Frozen=!n.Frozen),this.UpdateHeaders(this.GetHeaderSettings())}CloneHeader(e){{var t=e,n=new ConfirmDialog;n.Content="Bạn có chắc chắn muốn clone cột này không?",n.Render(),n.YesConfirmed+=()=>{var s=t.Clone();s.Id=Uuid7.Id25();var r=s.MapToPatch();Client.Instance.PatchAsync(r).then(l=>{if(l==0){Toast.Warning("Clone error");return}this.Header.push(s),this.Header=this.Header.sort((u,m)=>m.Frozen-u.Frozen||m.ComponentType==="Button"-u.ComponentType==="Button"||u.Order-m.Order),this.Rerender(),Toast.Success("Clone success")}).catch(l=>{Toast.Warning("Clone header NOT success")})}}}RemoveHeader(e){var t=e,n=new ConfirmDialog;n.Content="Bạn có chắc chắn muốn clone cột này không?",n.Render(),n.YesConfirmed+=()=>{const s=[t.Id];Client.Instance.HardDeleteAsync(s,"Component",this.MetaConn,this.MetaConn).then(r=>{if(!r){Toast.Warning("delete error");return}Toast.Success("Delete success"),this.Header.Remove(t),this.Rerender()})}}RemoveRowById(e){super.RemoveRowById(e),this.RenderIndex()}RemoveRow(e){super.RemoveRow(e),this.RenderIndex()}HardDeleteConfirmed(e){return new Promise((t,n)=>{super.HardDeleteConfirmed(e).then(s=>{this.RenderIndex(),this.Meta.IsSumary&&this.AddSummaries(),t(s)}).catch(s=>n(s))})}UpdateView(e=!1,t=null,n=[]){!this.Editable&&!this.Meta.CanCache?e&&(this.DisposeNoRecord(),this.ListViewSearch.RefreshListView()):this.RowAction(s=>!s.EmptyRow,s=>s.UpdateView(e,t,n))}async RowChangeHandlerGrid(e,t,n,s=null){if(await new Promise(r=>setTimeout(r,this.CellCountNoSticky)),t.EmptyRow&&n.EvType===EventType.Change){await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.BeforeCreated,e),t.EmptyRow=!1,this.MoveEmptyRow(t);const r=this.Header.filter(m=>m.Editable),l=r.find(m=>m.FieldName===s.FieldName),u=r.indexOf(l);if(r.length>u+1){const m=r[u+1],y=t.Children.find(C=>C.FieldName===m.FieldName);y&&y.Focus()}this.EmptySection.Children=[],this.AddNewEmptyRow(),this.Entity[this.Name]=this.RowData.Data,await this.DispatchCustomEvent(this.Meta.Events,CustomEventType.AfterCreated,e)}this.AddSummaries(),this.PopulateFields(),await this.DispatchEvent(this.Meta.Events,EventType.Change,e)}GetViewPortItem(){if(!this.Element||!this.Element.classList.contains("sticky"))return this.RowData.Data.length;let e=this.Element.clientHeight-(this.HeaderSection.Element?this.HeaderSection.Element.clientHeight:0)-this.Paginator.Element.clientHeight-this._theadTable;return this.Header=this.Header.filter(t=>t!=null),this.Header.some(t=>t.Summary&&t.Summary.trim()!=="")&&(e-=this._tfooterTable),this.Meta.CanAdd&&(e-=this._rowHeight),this.GetRowCountByHeight(e)}},h(Fn,"ToolbarColumn",{StatusBar:!0,Label:"",Frozen:!0}),Fn);const gridView=Object.freeze(Object.defineProperty({__proto__:null,GridView:GridView$1},Symbol.toStringTag,{value:"Module"}));class Textarea extends Textbox{constructor(i,e=null){super(i,e),this.MultipleLine=!0}}class App{static Init(){var i=new Textbox({FieldName:"appointment_name",PlainText:"FullName"},document.getElementsByName("appointment_name")[0]);i.Render();var i=new Textbox({FieldName:"appointment_email",PlainText:"E-Mail"},document.getElementsByName("appointment_email")[0]);i.Render();var i=new Textbox({FieldName:"appointment_phone",PlainText:"Phone Number"},document.getElementsByName("appointment_phone")[0]);i.Render();var i=new Textbox({FieldName:"appointment_website",PlainText:"Your Website"},document.getElementsByName("appointment_website")[0]);i.Render();var i=new Textbox({FieldName:"name",PlainText:"Name"},document.getElementsByName("name")[0]);i.Render();var i=new Textbox({FieldName:"email",PlainText:"E-Mail"},document.getElementsByName("email")[0]);i.Render();var i=new Textbox({FieldName:"phone",PlainText:"Phone Number"},document.getElementsByName("phone")[0]);i.Render();var i=new Textbox({FieldName:"website",PlainText:"Your Website"},document.getElementsByName("website")[0]);i.Render();var i=new Textarea({FieldName:"message",PlainText:"Your message Here"},document.getElementsByName("message")[0]);i.Render()}}App.Init();window.Modernizr=function(o,i,e){function t(V){Y.cssText=V}function n(V,q){return t(we.join(V+";")+"")}function s(V,q){return typeof V===q}function r(V,q){return!!~(""+V).indexOf(q)}function l(V,q){for(var M in V){var z=V[M];if(!r(z,"-")&&Y[z]!==e)return q=="pfx"?z:!0}return!1}function u(V,q,M){for(var z in V){var ae=q[V[z]];if(ae!==e)return M===!1?V[z]:s(ae,"function")?ae.bind(M||q):ae}return!1}function m(V,q,M){var z=V.charAt(0).toUpperCase()+V.slice(1),ae=(V+" "+Ue.join(z+" ")+z).split(" ");return s(q,"string")||s(q,"undefined")?l(ae,q):(ae=(V+" "+Qe.join(z+" ")+z).split(" "),u(ae,q,M))}function y(){T.input=function(V){for(var q=0,M=V.length;q<M;q++)ce[V[q]]=V[q]in le;return ce.list&&(ce.list=!!i.createElement("datalist")&&!!o.HTMLDataListElement),ce}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),T.inputtypes=function(V){for(var q=0,M,z,ae,be=V.length;q<be;q++)le.setAttribute("type",z=V[q]),M=le.type!=="text",M&&(le.value=xe,le.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(z)&&le.style.WebkitAppearance!==e?(F.appendChild(le),ae=i.defaultView,M=ae.getComputedStyle&&ae.getComputedStyle(le,null).WebkitAppearance!=="textfield"&&le.offsetHeight!==0,F.removeChild(le)):/^(search|tel)$/.test(z)||(/^(url|email)$/.test(z)?M=le.checkValidity&&le.checkValidity()===!1:M=le.value!=xe)),Be[V[q]]=!!M;return Be}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var C="2.8.3",T={},F=i.documentElement,I="modernizr",G=i.createElement(I),Y=G.style,le=i.createElement("input"),xe=":)",se={}.toString,we=" -webkit- -moz- -o- -ms- ".split(" "),g="Webkit Moz O ms",Ue=g.split(" "),Qe=g.toLowerCase().split(" "),ke={svg:"http://www.w3.org/2000/svg"},me={},Be={},ce={},de=[],Le=de.slice,ue,J=function(V,q,M,z){var ae,be,We,Ze,He=i.createElement("div"),Pe=i.body,Ee=Pe||i.createElement("body");if(parseInt(M,10))for(;M--;)We=i.createElement("div"),We.id=z?z[M]:I+(M+1),He.appendChild(We);return ae=["&#173;",'<style id="s',I,'">',V,"</style>"].join(""),He.id=I,(Pe?He:Ee).innerHTML+=ae,Ee.appendChild(He),Pe||(Ee.style.background="",Ee.style.overflow="hidden",Ze=F.style.overflow,F.style.overflow="hidden",F.appendChild(Ee)),be=q(He,V),Pe?He.parentNode.removeChild(He):(Ee.parentNode.removeChild(Ee),F.style.overflow=Ze),!!be},j=function(V){var q=o.matchMedia||o.msMatchMedia;if(q)return q(V)&&q(V).matches||!1;var M;return J("@media "+V+" { #"+I+" { position: absolute; } }",function(z){M=(o.getComputedStyle?getComputedStyle(z,null):z.currentStyle).position=="absolute"}),M},oe=function(){function V(M,z){z=z||i.createElement(q[M]||"div"),M="on"+M;var ae=M in z;return ae||(z.setAttribute||(z=i.createElement("div")),z.setAttribute&&z.removeAttribute&&(z.setAttribute(M,""),ae=s(z[M],"function"),s(z[M],"undefined")||(z[M]=e),z.removeAttribute(M))),z=null,ae}var q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return V}(),Z={}.hasOwnProperty,ne;!s(Z,"undefined")&&!s(Z.call,"undefined")?ne=function(V,q){return Z.call(V,q)}:ne=function(V,q){return q in V&&s(V.constructor.prototype[q],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(V){var q=this;if(typeof q!="function")throw new TypeError;var M=Le.call(arguments,1),z=function(){if(this instanceof z){var ae=function(){};ae.prototype=q.prototype;var be=new ae,We=q.apply(be,M.concat(Le.call(arguments)));return Object(We)===We?We:be}return q.apply(V,M.concat(Le.call(arguments)))};return z}),me.flexbox=function(){return m("flexWrap")},me.canvas=function(){var V=i.createElement("canvas");return!!V.getContext&&!!V.getContext("2d")},me.canvastext=function(){return!!T.canvas&&!!s(i.createElement("canvas").getContext("2d").fillText,"function")},me.webgl=function(){return!!o.WebGLRenderingContext},me.touch=function(){var V;return"ontouchstart"in o||o.DocumentTouch&&i instanceof DocumentTouch?V=!0:J(["@media (",we.join("touch-enabled),("),I,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(q){V=q.offsetTop===9}),V},me.geolocation=function(){return"geolocation"in navigator},me.postmessage=function(){return!!o.postMessage},me.websqldatabase=function(){return!!o.openDatabase},me.indexedDB=function(){return!!m("indexedDB",o)},me.hashchange=function(){return oe("hashchange",o)&&(i.documentMode===e||i.documentMode>7)},me.history=function(){return!!o.history&&!!history.pushState},me.draganddrop=function(){var V=i.createElement("div");return"draggable"in V||"ondragstart"in V&&"ondrop"in V},me.websockets=function(){return"WebSocket"in o||"MozWebSocket"in o},me.rgba=function(){return t("background-color:rgba(150,255,150,.5)"),r(Y.backgroundColor,"rgba")},me.hsla=function(){return t("background-color:hsla(120,40%,100%,.5)"),r(Y.backgroundColor,"rgba")||r(Y.backgroundColor,"hsla")},me.multiplebgs=function(){return t("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(Y.background)},me.backgroundsize=function(){return m("backgroundSize")},me.borderimage=function(){return m("borderImage")},me.borderradius=function(){return m("borderRadius")},me.boxshadow=function(){return m("boxShadow")},me.textshadow=function(){return i.createElement("div").style.textShadow===""},me.opacity=function(){return n("opacity:.55"),/^0.55$/.test(Y.opacity)},me.cssanimations=function(){return m("animationName")},me.csscolumns=function(){return m("columnCount")},me.cssgradients=function(){var V="background-image:",q="gradient(linear,left top,right bottom,from(#9f9),to(white));",M="linear-gradient(left top,#9f9, white);";return t((V+"-webkit- ".split(" ").join(q+V)+we.join(M+V)).slice(0,-V.length)),r(Y.backgroundImage,"gradient")},me.cssreflections=function(){return m("boxReflect")},me.csstransforms=function(){return!!m("transform")},me.csstransforms3d=function(){var V=!!m("perspective");return V&&"webkitPerspective"in F.style&&J("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(q,M){V=q.offsetLeft===9&&q.offsetHeight===3}),V},me.csstransitions=function(){return m("transition")},me.fontface=function(){var V;return J('@font-face {font-family:"font";src:url("https://")}',function(q,M){var z=i.getElementById("smodernizr"),ae=z.sheet||z.styleSheet,be=ae?ae.cssRules&&ae.cssRules[0]?ae.cssRules[0].cssText:ae.cssText||"":"";V=/src/i.test(be)&&be.indexOf(M.split(" ")[0])===0}),V},me.generatedcontent=function(){var V;return J(["#",I,"{font:0/0 a}#",I,':after{content:"',xe,'";visibility:hidden;font:3px/1 a}'].join(""),function(q){V=q.offsetHeight>=3}),V},me.video=function(){var V=i.createElement("video"),q=!1;try{(q=!!V.canPlayType)&&(q=new Boolean(q),q.ogg=V.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),q.h264=V.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),q.webm=V.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch{}return q},me.audio=function(){var V=i.createElement("audio"),q=!1;try{(q=!!V.canPlayType)&&(q=new Boolean(q),q.ogg=V.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),q.mp3=V.canPlayType("audio/mpeg;").replace(/^no$/,""),q.wav=V.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),q.m4a=(V.canPlayType("audio/x-m4a;")||V.canPlayType("audio/aac;")).replace(/^no$/,""))}catch{}return q},me.localstorage=function(){try{return localStorage.setItem(I,I),localStorage.removeItem(I),!0}catch{return!1}},me.sessionstorage=function(){try{return sessionStorage.setItem(I,I),sessionStorage.removeItem(I),!0}catch{return!1}},me.webworkers=function(){return!!o.Worker},me.applicationcache=function(){return!!o.applicationCache},me.svg=function(){return!!i.createElementNS&&!!i.createElementNS(ke.svg,"svg").createSVGRect},me.inlinesvg=function(){var V=i.createElement("div");return V.innerHTML="<svg/>",(V.firstChild&&V.firstChild.namespaceURI)==ke.svg},me.smil=function(){return!!i.createElementNS&&/SVGAnimate/.test(se.call(i.createElementNS(ke.svg,"animate")))},me.svgclippaths=function(){return!!i.createElementNS&&/SVGClipPath/.test(se.call(i.createElementNS(ke.svg,"clipPath")))};for(var te in me)ne(me,te)&&(ue=te.toLowerCase(),T[ue]=me[te](),de.push((T[ue]?"":"no-")+ue));return T.input||y(),T.addTest=function(V,q){if(typeof V=="object")for(var M in V)ne(V,M)&&T.addTest(M,V[M]);else{if(V=V.toLowerCase(),T[V]!==e)return T;q=typeof q=="function"?q():q,F.className+=" "+(q?"":"no-")+V,T[V]=q}return T},t(""),G=le=null,function(V,q){function M(Ce,Ie){var Oe=Ce.createElement("p"),Et=Ce.getElementsByTagName("head")[0]||Ce.documentElement;return Oe.innerHTML="x<style>"+Ie+"</style>",Et.insertBefore(Oe.lastChild,Et.firstChild)}function z(){var Ce=ot.elements;return typeof Ce=="string"?Ce.split(" "):Ce}function ae(Ce){var Ie=qt[Ce[Vt]];return Ie||(Ie={},Mt++,Ce[Vt]=Mt,qt[Mt]=Ie),Ie}function be(Ce,Ie,Oe){if(Ie||(Ie=q),jt)return Ie.createElement(Ce);Oe||(Oe=ae(Ie));var Et;return Oe.cache[Ce]?Et=Oe.cache[Ce].cloneNode():ge.test(Ce)?Et=(Oe.cache[Ce]=Oe.createElem(Ce)).cloneNode():Et=Oe.createElem(Ce),Et.canHaveChildren&&!ct.test(Ce)&&!Et.tagUrn?Oe.frag.appendChild(Et):Et}function We(Ce,Ie){if(Ce||(Ce=q),jt)return Ce.createDocumentFragment();Ie=Ie||ae(Ce);for(var Oe=Ie.frag.cloneNode(),Et=0,ti=z(),Si=ti.length;Et<Si;Et++)Oe.createElement(ti[Et]);return Oe}function Ze(Ce,Ie){Ie.cache||(Ie.cache={},Ie.createElem=Ce.createElement,Ie.createFrag=Ce.createDocumentFragment,Ie.frag=Ie.createFrag()),Ce.createElement=function(Oe){return ot.shivMethods?be(Oe,Ce,Ie):Ie.createElem(Oe)},Ce.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+z().join().replace(/[\w\-]+/g,function(Oe){return Ie.createElem(Oe),Ie.frag.createElement(Oe),'c("'+Oe+'")'})+");return n}")(ot,Ie.frag)}function He(Ce){Ce||(Ce=q);var Ie=ae(Ce);return ot.shivCSS&&!Je&&!Ie.hasCSS&&(Ie.hasCSS=!!M(Ce,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),jt||Ze(Ce,Ie),Ce}var Pe="3.7.0",Ee=V.html5||{},ct=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,ge=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,Je,Vt="_html5shiv",Mt=0,qt={},jt;(function(){try{var Ce=q.createElement("a");Ce.innerHTML="<xyz></xyz>",Je="hidden"in Ce,jt=Ce.childNodes.length==1||function(){q.createElement("a");var Ie=q.createDocumentFragment();return typeof Ie.cloneNode>"u"||typeof Ie.createDocumentFragment>"u"||typeof Ie.createElement>"u"}()}catch{Je=!0,jt=!0}})();var ot={elements:Ee.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:Pe,shivCSS:Ee.shivCSS!==!1,supportsUnknownElements:jt,shivMethods:Ee.shivMethods!==!1,type:"default",shivDocument:He,createElement:be,createDocumentFragment:We};V.html5=ot,He(q)}(this,i),T._version=C,T._prefixes=we,T._domPrefixes=Qe,T._cssomPrefixes=Ue,T.mq=j,T.hasEvent=oe,T.testProp=function(V){return l([V])},T.testAllProps=m,T.testStyles=J,T.prefixed=function(V,q,M){return q?m(V,q,M):m(V,"pfx")},F.className=F.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+de.join(" ")),T}(void 0,(void 0).document),function(o,i,e){function t(de){return F.call(de)=="[object Function]"}function n(de){return typeof de=="string"}function s(){}function r(de){return!de||de=="loaded"||de=="complete"||de=="uninitialized"}function l(){var de=I.shift();G=1,de?de.t?C(function(){(de.t=="c"?ce.injectCss:ce.injectJs)(de.s,0,de.a,de.x,de.e,1)},0):(de(),l()):G=0}function u(de,Le,ue,J,j,oe,te){function ne(ae){if(!q&&r(V.readyState)&&(z.r=q=1,!G&&l(),V.onload=V.onreadystatechange=null,ae)){de!="img"&&C(function(){xe.removeChild(V)},50);for(var be in ke[Le])ke[Le].hasOwnProperty(be)&&ke[Le][be].onload()}}var te=te||ce.errorTimeout,V=i.createElement(de),q=0,M=0,z={t:ue,s:Le,e:j,a:oe,x:te};ke[Le]===1&&(M=1,ke[Le]=[]),de=="object"?V.data=Le:(V.src=Le,V.type=de),V.width=V.height="0",V.onerror=V.onload=V.onreadystatechange=function(){ne.call(this,M)},I.splice(J,0,z),de!="img"&&(M||ke[Le]===2?(xe.insertBefore(V,le?null:T),C(ne,te)):ke[Le].push(V))}function m(de,Le,ue,J,j){return G=0,Le=Le||"j",n(de)?u(Le=="c"?g:we,de,Le,this.i++,ue,J,j):(I.splice(this.i++,0,de),I.length==1&&l()),this}function y(){var de=ce;return de.loader={load:m,i:0},de}var se=i.documentElement,C=o.setTimeout,T=i.getElementsByTagName("script")[0],F={}.toString,I=[],G=0,Y="MozAppearance"in se.style,le=Y&&!!i.createRange().compareNode,xe=le?se:T.parentNode,se=o.opera&&F.call(o.opera)=="[object Opera]",se=!!i.attachEvent&&!se,we=Y?"object":se?"script":"img",g=se?"script":we,Ue=Array.isArray||function(de){return F.call(de)=="[object Array]"},Qe=[],ke={},me={timeout:function(de,Le){return Le.length&&(de.timeout=Le[0]),de}},Be,ce;ce=function(de){function Le(te){var te=te.split("!"),V=Qe.length,M=te.pop(),q=te.length,M={url:M,origUrl:M,prefixes:te},z,ae,be;for(ae=0;ae<q;ae++)be=te[ae].split("="),(z=me[be.shift()])&&(M=z(M,be));for(ae=0;ae<V;ae++)M=Qe[ae](M);return M}function ue(ne,te,V,q,M){var z=Le(ne),ae=z.autoCallback;z.url.split(".").pop().split("?").shift(),z.bypass||(te&&(te=t(te)?te:te[ne]||te[q]||te[ne.split("/").pop().split("?")[0]]),z.instead?z.instead(ne,te,V,q,M):(ke[z.url]?z.noexec=!0:ke[z.url]=1,V.load(z.url,z.forceCSS||!z.forceJS&&z.url.split(".").pop().split("?").shift()=="css"?"c":e,z.noexec,z.attrs,z.timeout),(t(te)||t(ae))&&V.load(function(){y(),te&&te(z.origUrl,M,q),ae&&ae(z.origUrl,M,q),ke[z.url]=2})))}function J(ne,te){function V(He,Pe){if(He){if(n(He))Pe||(z=function(){var Ee=[].slice.call(arguments);ae.apply(this,Ee),be()}),ue(He,z,te,0,q);else if(Object(He)===He)for(Ze in We=function(){var Ee=0,ct;for(ct in He)He.hasOwnProperty(ct)&&Ee++;return Ee}(),He)He.hasOwnProperty(Ze)&&(!Pe&&!--We&&(t(z)?z=function(){var Ee=[].slice.call(arguments);ae.apply(this,Ee),be()}:z[Ze]=function(Ee){return function(){var ct=[].slice.call(arguments);Ee&&Ee.apply(this,ct),be()}}(ae[Ze])),ue(He[Ze],z,te,Ze,q))}else!Pe&&be()}var q=!!ne.test,M=ne.load||ne.both,z=ne.callback||s,ae=z,be=ne.complete||s,We,Ze;V(q?ne.yep:ne.nope,!!M),M&&V(M)}var j,oe,Z=this.yepnope.loader;if(n(de))ue(de,0,Z,0);else if(Ue(de))for(j=0;j<de.length;j++)oe=de[j],n(oe)?ue(oe,0,Z,0):Ue(oe)?ce(oe):Object(oe)===oe&&J(oe,Z);else Object(de)===de&&J(de,Z)},ce.addPrefix=function(de,Le){me[de]=Le},ce.addFilter=function(de){Qe.push(de)},ce.errorTimeout=1e4,i.readyState==null&&i.addEventListener&&(i.readyState="loading",i.addEventListener("DOMContentLoaded",Be=function(){i.removeEventListener("DOMContentLoaded",Be,0),i.readyState="complete"},0)),o.yepnope=y(),o.yepnope.executeStack=l,o.yepnope.injectJs=function(de,Le,ue,V,j,oe){var Z=i.createElement("script"),ne,te,V=V||ce.errorTimeout;Z.src=de;for(te in ue)Z.setAttribute(te,ue[te]);Le=oe?l:Le||s,Z.onreadystatechange=Z.onload=function(){!ne&&r(Z.readyState)&&(ne=1,Le(),Z.onload=Z.onreadystatechange=null)},C(function(){ne||(ne=1,Le(1))},V),j?Z.onload():T.parentNode.insertBefore(Z,T)},o.yepnope.injectCss=function(de,te,ue,Z,j,oe){var Z=i.createElement("link"),ne,te=oe?l:te||s;Z.href=de,Z.rel="stylesheet",Z.type="text/css";for(ne in ue)Z.setAttribute(ne,ue[ne]);j||(T.parentNode.insertBefore(Z,T),C(te,0))}}(void 0,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(o,i){typeof module=="object"&&typeof module.exports=="object"?module.exports=o.document?i(o,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(o)})(typeof window<"u"?window:void 0,function(o,i){var e=[],t=Object.getPrototypeOf,n=e.slice,s=e.flat?function(a){return e.flat.call(a)}:function(a){return e.concat.apply([],a)},r=e.push,l=e.indexOf,u={},m=u.toString,y=u.hasOwnProperty,C=y.toString,T=C.call(Object),F={},I=function(a){return typeof a=="function"&&typeof a.nodeType!="number"&&typeof a.item!="function"},G=function(a){return a!=null&&a===a.window},Y=o.document,le={type:!0,src:!0,nonce:!0,noModule:!0};function xe(a,c,p){var f,E,w=(p=p||Y).createElement("script");if(w.text=a,c)for(f in le)(E=c[f]||c.getAttribute&&c.getAttribute(f))&&w.setAttribute(f,E);p.head.appendChild(w).parentNode.removeChild(w)}function se(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?u[m.call(a)]||"object":typeof a}var we="3.6.0",g=function(a,c){return new g.fn.init(a,c)};function Ue(a){var c=!!a&&"length"in a&&a.length,p=se(a);return!I(a)&&!G(a)&&(p==="array"||c===0||typeof c=="number"&&0<c&&c-1 in a)}g.fn=g.prototype={jquery:we,constructor:g,length:0,toArray:function(){return n.call(this)},get:function(a){return a==null?n.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var c=g.merge(this.constructor(),a);return c.prevObject=this,c},each:function(a){return g.each(this,a)},map:function(a){return this.pushStack(g.map(this,function(c,p){return a.call(c,p,c)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(a,c){return(c+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(a,c){return c%2}))},eq:function(a){var c=this.length,p=+a+(a<0?c:0);return this.pushStack(0<=p&&p<c?[this[p]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:e.sort,splice:e.splice},g.extend=g.fn.extend=function(){var a,c,p,f,E,w,b=arguments[0]||{},D=1,L=arguments.length,R=!1;for(typeof b=="boolean"&&(R=b,b=arguments[D]||{},D++),typeof b=="object"||I(b)||(b={}),D===L&&(b=this,D--);D<L;D++)if((a=arguments[D])!=null)for(c in a)f=a[c],c!=="__proto__"&&b!==f&&(R&&f&&(g.isPlainObject(f)||(E=Array.isArray(f)))?(p=b[c],w=E&&!Array.isArray(p)?[]:E||g.isPlainObject(p)?p:{},E=!1,b[c]=g.extend(R,w,f)):f!==void 0&&(b[c]=f));return b},g.extend({expando:"jQuery"+(we+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var c,p;return!(!a||m.call(a)!=="[object Object]")&&(!(c=t(a))||typeof(p=y.call(c,"constructor")&&c.constructor)=="function"&&C.call(p)===T)},isEmptyObject:function(a){var c;for(c in a)return!1;return!0},globalEval:function(a,c,p){xe(a,{nonce:c&&c.nonce},p)},each:function(a,c){var p,f=0;if(Ue(a))for(p=a.length;f<p&&c.call(a[f],f,a[f])!==!1;f++);else for(f in a)if(c.call(a[f],f,a[f])===!1)break;return a},makeArray:function(a,c){var p=c||[];return a!=null&&(Ue(Object(a))?g.merge(p,typeof a=="string"?[a]:a):r.call(p,a)),p},inArray:function(a,c,p){return c==null?-1:l.call(c,a,p)},merge:function(a,c){for(var p=+c.length,f=0,E=a.length;f<p;f++)a[E++]=c[f];return a.length=E,a},grep:function(a,c,p){for(var f=[],E=0,w=a.length,b=!p;E<w;E++)!c(a[E],E)!==b&&f.push(a[E]);return f},map:function(a,c,p){var f,E,w=0,b=[];if(Ue(a))for(f=a.length;w<f;w++)(E=c(a[w],w,p))!=null&&b.push(E);else for(w in a)(E=c(a[w],w,p))!=null&&b.push(E);return s(b)},guid:1,support:F}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=e[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){u["[object "+c+"]"]=c.toLowerCase()});var Qe=function(a){var c,p,f,E,w,b,D,L,R,U,K,H,B,pe,ve,fe,st,ft,Nt,Ke="sizzle"+1*new Date,Ae=a.document,Lt=0,Ge=0,rt=an(),Vi=an(),nn=an(),Ft=an(),yi=function(S,_){return S===_&&(K=!0),0},_i={}.hasOwnProperty,At=[],Ii=At.pop,Bt=At.push,at=At.push,Pt=At.slice,Ot=function(S,_){for(var O=0,W=S.length;O<W;O++)if(S[O]===_)return O;return-1},Jt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ne="[\\x20\\t\\r\\n\\f]",$e="(?:\\\\[\\da-fA-F]{1,6}"+Ne+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",gt="\\["+Ne+"*("+$e+")(?:"+Ne+"*([*^$|!~]?=)"+Ne+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+$e+"))|)"+Ne+"*\\]",Rt=":("+$e+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+gt+")*)|.*)\\)|)",pt=new RegExp(Ne+"+","g"),kt=new RegExp("^"+Ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ne+"+$","g"),Di=new RegExp("^"+Ne+"*,"+Ne+"*"),sn=new RegExp("^"+Ne+"*([>+~]|"+Ne+")"+Ne+"*"),xs=new RegExp(Ne+"|>"),_s=new RegExp(Rt),Is=new RegExp("^"+$e+"$"),rn={ID:new RegExp("^#("+$e+")"),CLASS:new RegExp("^\\.("+$e+")"),TAG:new RegExp("^("+$e+"|[*])"),ATTR:new RegExp("^"+gt),PSEUDO:new RegExp("^"+Rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ne+"*(even|odd|(([+-]|)(\\d*)n|)"+Ne+"*(?:([+-]|)"+Ne+"*(\\d+)|))"+Ne+"*\\)|)","i"),bool:new RegExp("^(?:"+Jt+")$","i"),needsContext:new RegExp("^"+Ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ne+"*((?:-\\d)?\\d*)"+Ne+"*\\)|)(?=[^-]|$)","i")},Ds=/HTML$/i,Ls=/^(?:input|select|textarea|button)$/i,As=/^h\d$/i,Hi=/^[^{]+\{\s*\[native \w/,Ms=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,In=/[+~]/,ai=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ne+"?|\\\\([^\\r\\n\\f])","g"),oi=function(S,_){var O="0x"+S.slice(1)-65536;return _||(O<0?String.fromCharCode(O+65536):String.fromCharCode(O>>10|55296,1023&O|56320))},jn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Wn=function(S,_){return _?S==="\0"?"�":S.slice(0,-1)+"\\"+S.charCodeAt(S.length-1).toString(16)+" ":"\\"+S},zn=function(){H()},Ns=cn(function(S){return S.disabled===!0&&S.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{at.apply(At=Pt.call(Ae.childNodes),Ae.childNodes),At[Ae.childNodes.length].nodeType}catch{at={apply:At.length?function(_,O){Bt.apply(_,Pt.call(O))}:function(_,O){for(var W=_.length,k=0;_[W++]=O[k++];);_.length=W-1}}}function Ye(S,_,O,W){var k,Q,ee,re,he,De,Te,_e=_&&_.ownerDocument,Ve=_?_.nodeType:9;if(O=O||[],typeof S!="string"||!S||Ve!==1&&Ve!==9&&Ve!==11)return O;if(!W&&(H(_),_=_||B,ve)){if(Ve!==11&&(he=Ms.exec(S)))if(k=he[1]){if(Ve===9){if(!(ee=_.getElementById(k)))return O;if(ee.id===k)return O.push(ee),O}else if(_e&&(ee=_e.getElementById(k))&&Nt(_,ee)&&ee.id===k)return O.push(ee),O}else{if(he[2])return at.apply(O,_.getElementsByTagName(S)),O;if((k=he[3])&&p.getElementsByClassName&&_.getElementsByClassName)return at.apply(O,_.getElementsByClassName(k)),O}if(p.qsa&&!Ft[S+" "]&&(!fe||!fe.test(S))&&(Ve!==1||_.nodeName.toLowerCase()!=="object")){if(Te=S,_e=_,Ve===1&&(xs.test(S)||sn.test(S))){for((_e=In.test(S)&&Ln(_.parentNode)||_)===_&&p.scope||((re=_.getAttribute("id"))?re=re.replace(jn,Wn):_.setAttribute("id",re=Ke)),Q=(De=b(S)).length;Q--;)De[Q]=(re?"#"+re:":scope")+" "+on(De[Q]);Te=De.join(",")}try{return at.apply(O,_e.querySelectorAll(Te)),O}catch{Ft(S,!0)}finally{re===Ke&&_.removeAttribute("id")}}}return L(S.replace(kt,"$1"),_,O,W)}function an(){var S=[];return function _(O,W){return S.push(O+" ")>f.cacheLength&&delete _[S.shift()],_[O+" "]=W}}function zt(S){return S[Ke]=!0,S}function Kt(S){var _=B.createElement("fieldset");try{return!!S(_)}catch{return!1}finally{_.parentNode&&_.parentNode.removeChild(_),_=null}}function Dn(S,_){for(var O=S.split("|"),W=O.length;W--;)f.attrHandle[O[W]]=_}function Kn(S,_){var O=_&&S,W=O&&S.nodeType===1&&_.nodeType===1&&S.sourceIndex-_.sourceIndex;if(W)return W;if(O){for(;O=O.nextSibling;)if(O===_)return-1}return S?1:-1}function Fs(S){return function(_){return _.nodeName.toLowerCase()==="input"&&_.type===S}}function Ps(S){return function(_){var O=_.nodeName.toLowerCase();return(O==="input"||O==="button")&&_.type===S}}function Yn(S){return function(_){return"form"in _?_.parentNode&&_.disabled===!1?"label"in _?"label"in _.parentNode?_.parentNode.disabled===S:_.disabled===S:_.isDisabled===S||_.isDisabled!==!S&&Ns(_)===S:_.disabled===S:"label"in _&&_.disabled===S}}function Ei(S){return zt(function(_){return _=+_,zt(function(O,W){for(var k,Q=S([],O.length,_),ee=Q.length;ee--;)O[k=Q[ee]]&&(O[k]=!(W[k]=O[k]))})})}function Ln(S){return S&&typeof S.getElementsByTagName<"u"&&S}for(c in p=Ye.support={},w=Ye.isXML=function(S){var _=S&&S.namespaceURI,O=S&&(S.ownerDocument||S).documentElement;return!Ds.test(_||O&&O.nodeName||"HTML")},H=Ye.setDocument=function(S){var _,O,W=S?S.ownerDocument||S:Ae;return W!=B&&W.nodeType===9&&W.documentElement&&(pe=(B=W).documentElement,ve=!w(B),Ae!=B&&(O=B.defaultView)&&O.top!==O&&(O.addEventListener?O.addEventListener("unload",zn,!1):O.attachEvent&&O.attachEvent("onunload",zn)),p.scope=Kt(function(k){return pe.appendChild(k).appendChild(B.createElement("div")),typeof k.querySelectorAll<"u"&&!k.querySelectorAll(":scope fieldset div").length}),p.attributes=Kt(function(k){return k.className="i",!k.getAttribute("className")}),p.getElementsByTagName=Kt(function(k){return k.appendChild(B.createComment("")),!k.getElementsByTagName("*").length}),p.getElementsByClassName=Hi.test(B.getElementsByClassName),p.getById=Kt(function(k){return pe.appendChild(k).id=Ke,!B.getElementsByName||!B.getElementsByName(Ke).length}),p.getById?(f.filter.ID=function(k){var Q=k.replace(ai,oi);return function(ee){return ee.getAttribute("id")===Q}},f.find.ID=function(k,Q){if(typeof Q.getElementById<"u"&&ve){var ee=Q.getElementById(k);return ee?[ee]:[]}}):(f.filter.ID=function(k){var Q=k.replace(ai,oi);return function(ee){var re=typeof ee.getAttributeNode<"u"&&ee.getAttributeNode("id");return re&&re.value===Q}},f.find.ID=function(k,Q){if(typeof Q.getElementById<"u"&&ve){var ee,re,he,De=Q.getElementById(k);if(De){if((ee=De.getAttributeNode("id"))&&ee.value===k)return[De];for(he=Q.getElementsByName(k),re=0;De=he[re++];)if((ee=De.getAttributeNode("id"))&&ee.value===k)return[De]}return[]}}),f.find.TAG=p.getElementsByTagName?function(k,Q){return typeof Q.getElementsByTagName<"u"?Q.getElementsByTagName(k):p.qsa?Q.querySelectorAll(k):void 0}:function(k,Q){var ee,re=[],he=0,De=Q.getElementsByTagName(k);if(k==="*"){for(;ee=De[he++];)ee.nodeType===1&&re.push(ee);return re}return De},f.find.CLASS=p.getElementsByClassName&&function(k,Q){if(typeof Q.getElementsByClassName<"u"&&ve)return Q.getElementsByClassName(k)},st=[],fe=[],(p.qsa=Hi.test(B.querySelectorAll))&&(Kt(function(k){var Q;pe.appendChild(k).innerHTML="<a id='"+Ke+"'></a><select id='"+Ke+"-\r\\' msallowcapture=''><option selected=''></option></select>",k.querySelectorAll("[msallowcapture^='']").length&&fe.push("[*^$]="+Ne+`*(?:''|"")`),k.querySelectorAll("[selected]").length||fe.push("\\["+Ne+"*(?:value|"+Jt+")"),k.querySelectorAll("[id~="+Ke+"-]").length||fe.push("~="),(Q=B.createElement("input")).setAttribute("name",""),k.appendChild(Q),k.querySelectorAll("[name='']").length||fe.push("\\["+Ne+"*name"+Ne+"*="+Ne+`*(?:''|"")`),k.querySelectorAll(":checked").length||fe.push(":checked"),k.querySelectorAll("a#"+Ke+"+*").length||fe.push(".#.+[+~]"),k.querySelectorAll("\\\f"),fe.push("[\\r\\n\\f]")}),Kt(function(k){k.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Q=B.createElement("input");Q.setAttribute("type","hidden"),k.appendChild(Q).setAttribute("name","D"),k.querySelectorAll("[name=d]").length&&fe.push("name"+Ne+"*[*^$|!~]?="),k.querySelectorAll(":enabled").length!==2&&fe.push(":enabled",":disabled"),pe.appendChild(k).disabled=!0,k.querySelectorAll(":disabled").length!==2&&fe.push(":enabled",":disabled"),k.querySelectorAll("*,:x"),fe.push(",.*:")})),(p.matchesSelector=Hi.test(ft=pe.matches||pe.webkitMatchesSelector||pe.mozMatchesSelector||pe.oMatchesSelector||pe.msMatchesSelector))&&Kt(function(k){p.disconnectedMatch=ft.call(k,"*"),ft.call(k,"[s!='']:x"),st.push("!=",Rt)}),fe=fe.length&&new RegExp(fe.join("|")),st=st.length&&new RegExp(st.join("|")),_=Hi.test(pe.compareDocumentPosition),Nt=_||Hi.test(pe.contains)?function(k,Q){var ee=k.nodeType===9?k.documentElement:k,re=Q&&Q.parentNode;return k===re||!(!re||re.nodeType!==1||!(ee.contains?ee.contains(re):k.compareDocumentPosition&&16&k.compareDocumentPosition(re)))}:function(k,Q){if(Q){for(;Q=Q.parentNode;)if(Q===k)return!0}return!1},yi=_?function(k,Q){if(k===Q)return K=!0,0;var ee=!k.compareDocumentPosition-!Q.compareDocumentPosition;return ee||(1&(ee=(k.ownerDocument||k)==(Q.ownerDocument||Q)?k.compareDocumentPosition(Q):1)||!p.sortDetached&&Q.compareDocumentPosition(k)===ee?k==B||k.ownerDocument==Ae&&Nt(Ae,k)?-1:Q==B||Q.ownerDocument==Ae&&Nt(Ae,Q)?1:U?Ot(U,k)-Ot(U,Q):0:4&ee?-1:1)}:function(k,Q){if(k===Q)return K=!0,0;var ee,re=0,he=k.parentNode,De=Q.parentNode,Te=[k],_e=[Q];if(!he||!De)return k==B?-1:Q==B?1:he?-1:De?1:U?Ot(U,k)-Ot(U,Q):0;if(he===De)return Kn(k,Q);for(ee=k;ee=ee.parentNode;)Te.unshift(ee);for(ee=Q;ee=ee.parentNode;)_e.unshift(ee);for(;Te[re]===_e[re];)re++;return re?Kn(Te[re],_e[re]):Te[re]==Ae?-1:_e[re]==Ae?1:0}),B},Ye.matches=function(S,_){return Ye(S,null,null,_)},Ye.matchesSelector=function(S,_){if(H(S),p.matchesSelector&&ve&&!Ft[_+" "]&&(!st||!st.test(_))&&(!fe||!fe.test(_)))try{var O=ft.call(S,_);if(O||p.disconnectedMatch||S.document&&S.document.nodeType!==11)return O}catch{Ft(_,!0)}return 0<Ye(_,B,null,[S]).length},Ye.contains=function(S,_){return(S.ownerDocument||S)!=B&&H(S),Nt(S,_)},Ye.attr=function(S,_){(S.ownerDocument||S)!=B&&H(S);var O=f.attrHandle[_.toLowerCase()],W=O&&_i.call(f.attrHandle,_.toLowerCase())?O(S,_,!ve):void 0;return W!==void 0?W:p.attributes||!ve?S.getAttribute(_):(W=S.getAttributeNode(_))&&W.specified?W.value:null},Ye.escape=function(S){return(S+"").replace(jn,Wn)},Ye.error=function(S){throw new Error("Syntax error, unrecognized expression: "+S)},Ye.uniqueSort=function(S){var _,O=[],W=0,k=0;if(K=!p.detectDuplicates,U=!p.sortStable&&S.slice(0),S.sort(yi),K){for(;_=S[k++];)_===S[k]&&(W=O.push(k));for(;W--;)S.splice(O[W],1)}return U=null,S},E=Ye.getText=function(S){var _,O="",W=0,k=S.nodeType;if(k){if(k===1||k===9||k===11){if(typeof S.textContent=="string")return S.textContent;for(S=S.firstChild;S;S=S.nextSibling)O+=E(S)}else if(k===3||k===4)return S.nodeValue}else for(;_=S[W++];)O+=E(_);return O},(f=Ye.selectors={cacheLength:50,createPseudo:zt,match:rn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(S){return S[1]=S[1].replace(ai,oi),S[3]=(S[3]||S[4]||S[5]||"").replace(ai,oi),S[2]==="~="&&(S[3]=" "+S[3]+" "),S.slice(0,4)},CHILD:function(S){return S[1]=S[1].toLowerCase(),S[1].slice(0,3)==="nth"?(S[3]||Ye.error(S[0]),S[4]=+(S[4]?S[5]+(S[6]||1):2*(S[3]==="even"||S[3]==="odd")),S[5]=+(S[7]+S[8]||S[3]==="odd")):S[3]&&Ye.error(S[0]),S},PSEUDO:function(S){var _,O=!S[6]&&S[2];return rn.CHILD.test(S[0])?null:(S[3]?S[2]=S[4]||S[5]||"":O&&_s.test(O)&&(_=b(O,!0))&&(_=O.indexOf(")",O.length-_)-O.length)&&(S[0]=S[0].slice(0,_),S[2]=O.slice(0,_)),S.slice(0,3))}},filter:{TAG:function(S){var _=S.replace(ai,oi).toLowerCase();return S==="*"?function(){return!0}:function(O){return O.nodeName&&O.nodeName.toLowerCase()===_}},CLASS:function(S){var _=rt[S+" "];return _||(_=new RegExp("(^|"+Ne+")"+S+"("+Ne+"|$)"))&&rt(S,function(O){return _.test(typeof O.className=="string"&&O.className||typeof O.getAttribute<"u"&&O.getAttribute("class")||"")})},ATTR:function(S,_,O){return function(W){var k=Ye.attr(W,S);return k==null?_==="!=":!_||(k+="",_==="="?k===O:_==="!="?k!==O:_==="^="?O&&k.indexOf(O)===0:_==="*="?O&&-1<k.indexOf(O):_==="$="?O&&k.slice(-O.length)===O:_==="~="?-1<(" "+k.replace(pt," ")+" ").indexOf(O):_==="|="&&(k===O||k.slice(0,O.length+1)===O+"-"))}},CHILD:function(S,_,O,W,k){var Q=S.slice(0,3)!=="nth",ee=S.slice(-4)!=="last",re=_==="of-type";return W===1&&k===0?function(he){return!!he.parentNode}:function(he,De,Te){var _e,Ve,dt,Fe,yt,wt,It=Q!==ee?"nextSibling":"previousSibling",Xe=he.parentNode,Zt=re&&he.nodeName.toLowerCase(),xt=!Te&&!re,mt=!1;if(Xe){if(Q){for(;It;){for(Fe=he;Fe=Fe[It];)if(re?Fe.nodeName.toLowerCase()===Zt:Fe.nodeType===1)return!1;wt=It=S==="only"&&!wt&&"nextSibling"}return!0}if(wt=[ee?Xe.firstChild:Xe.lastChild],ee&&xt){for(mt=(yt=(_e=(Ve=(dt=(Fe=Xe)[Ke]||(Fe[Ke]={}))[Fe.uniqueID]||(dt[Fe.uniqueID]={}))[S]||[])[0]===Lt&&_e[1])&&_e[2],Fe=yt&&Xe.childNodes[yt];Fe=++yt&&Fe&&Fe[It]||(mt=yt=0)||wt.pop();)if(Fe.nodeType===1&&++mt&&Fe===he){Ve[S]=[Lt,yt,mt];break}}else if(xt&&(mt=yt=(_e=(Ve=(dt=(Fe=he)[Ke]||(Fe[Ke]={}))[Fe.uniqueID]||(dt[Fe.uniqueID]={}))[S]||[])[0]===Lt&&_e[1]),mt===!1)for(;(Fe=++yt&&Fe&&Fe[It]||(mt=yt=0)||wt.pop())&&!((re?Fe.nodeName.toLowerCase()===Zt:Fe.nodeType===1)&&++mt&&(xt&&((Ve=(dt=Fe[Ke]||(Fe[Ke]={}))[Fe.uniqueID]||(dt[Fe.uniqueID]={}))[S]=[Lt,mt]),Fe===he)););return(mt-=k)===W||mt%W==0&&0<=mt/W}}},PSEUDO:function(S,_){var O,W=f.pseudos[S]||f.setFilters[S.toLowerCase()]||Ye.error("unsupported pseudo: "+S);return W[Ke]?W(_):1<W.length?(O=[S,S,"",_],f.setFilters.hasOwnProperty(S.toLowerCase())?zt(function(k,Q){for(var ee,re=W(k,_),he=re.length;he--;)k[ee=Ot(k,re[he])]=!(Q[ee]=re[he])}):function(k){return W(k,0,O)}):W}},pseudos:{not:zt(function(S){var _=[],O=[],W=D(S.replace(kt,"$1"));return W[Ke]?zt(function(k,Q,ee,re){for(var he,De=W(k,null,re,[]),Te=k.length;Te--;)(he=De[Te])&&(k[Te]=!(Q[Te]=he))}):function(k,Q,ee){return _[0]=k,W(_,null,ee,O),_[0]=null,!O.pop()}}),has:zt(function(S){return function(_){return 0<Ye(S,_).length}}),contains:zt(function(S){return S=S.replace(ai,oi),function(_){return-1<(_.textContent||E(_)).indexOf(S)}}),lang:zt(function(S){return Is.test(S||"")||Ye.error("unsupported lang: "+S),S=S.replace(ai,oi).toLowerCase(),function(_){var O;do if(O=ve?_.lang:_.getAttribute("xml:lang")||_.getAttribute("lang"))return(O=O.toLowerCase())===S||O.indexOf(S+"-")===0;while((_=_.parentNode)&&_.nodeType===1);return!1}}),target:function(S){var _=a.location&&a.location.hash;return _&&_.slice(1)===S.id},root:function(S){return S===pe},focus:function(S){return S===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(S.type||S.href||~S.tabIndex)},enabled:Yn(!1),disabled:Yn(!0),checked:function(S){var _=S.nodeName.toLowerCase();return _==="input"&&!!S.checked||_==="option"&&!!S.selected},selected:function(S){return S.parentNode&&S.parentNode.selectedIndex,S.selected===!0},empty:function(S){for(S=S.firstChild;S;S=S.nextSibling)if(S.nodeType<6)return!1;return!0},parent:function(S){return!f.pseudos.empty(S)},header:function(S){return As.test(S.nodeName)},input:function(S){return Ls.test(S.nodeName)},button:function(S){var _=S.nodeName.toLowerCase();return _==="input"&&S.type==="button"||_==="button"},text:function(S){var _;return S.nodeName.toLowerCase()==="input"&&S.type==="text"&&((_=S.getAttribute("type"))==null||_.toLowerCase()==="text")},first:Ei(function(){return[0]}),last:Ei(function(S,_){return[_-1]}),eq:Ei(function(S,_,O){return[O<0?O+_:O]}),even:Ei(function(S,_){for(var O=0;O<_;O+=2)S.push(O);return S}),odd:Ei(function(S,_){for(var O=1;O<_;O+=2)S.push(O);return S}),lt:Ei(function(S,_,O){for(var W=O<0?O+_:_<O?_:O;0<=--W;)S.push(W);return S}),gt:Ei(function(S,_,O){for(var W=O<0?O+_:O;++W<_;)S.push(W);return S})}}).pseudos.nth=f.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[c]=Fs(c);for(c in{submit:!0,reset:!0})f.pseudos[c]=Ps(c);function Xn(){}function on(S){for(var _=0,O=S.length,W="";_<O;_++)W+=S[_].value;return W}function cn(S,_,O){var W=_.dir,k=_.next,Q=k||W,ee=O&&Q==="parentNode",re=Ge++;return _.first?function(he,De,Te){for(;he=he[W];)if(he.nodeType===1||ee)return S(he,De,Te);return!1}:function(he,De,Te){var _e,Ve,dt,Fe=[Lt,re];if(Te){for(;he=he[W];)if((he.nodeType===1||ee)&&S(he,De,Te))return!0}else for(;he=he[W];)if(he.nodeType===1||ee)if(Ve=(dt=he[Ke]||(he[Ke]={}))[he.uniqueID]||(dt[he.uniqueID]={}),k&&k===he.nodeName.toLowerCase())he=he[W]||he;else{if((_e=Ve[Q])&&_e[0]===Lt&&_e[1]===re)return Fe[2]=_e[2];if((Ve[Q]=Fe)[2]=S(he,De,Te))return!0}return!1}}function An(S){return 1<S.length?function(_,O,W){for(var k=S.length;k--;)if(!S[k](_,O,W))return!1;return!0}:S[0]}function un(S,_,O,W,k){for(var Q,ee=[],re=0,he=S.length,De=_!=null;re<he;re++)(Q=S[re])&&(O&&!O(Q,W,k)||(ee.push(Q),De&&_.push(re)));return ee}function Mn(S,_,O,W,k,Q){return W&&!W[Ke]&&(W=Mn(W)),k&&!k[Ke]&&(k=Mn(k,Q)),zt(function(ee,re,he,De){var Te,_e,Ve,dt=[],Fe=[],yt=re.length,wt=ee||function(Zt,xt,mt){for(var Yt=0,dn=xt.length;Yt<dn;Yt++)Ye(Zt,xt[Yt],mt);return mt}(_||"*",he.nodeType?[he]:he,[]),It=!S||!ee&&_?wt:un(wt,dt,S,he,De),Xe=O?k||(ee?S:yt||W)?[]:re:It;if(O&&O(It,Xe,he,De),W)for(Te=un(Xe,Fe),W(Te,[],he,De),_e=Te.length;_e--;)(Ve=Te[_e])&&(Xe[Fe[_e]]=!(It[Fe[_e]]=Ve));if(ee){if(k||S){if(k){for(Te=[],_e=Xe.length;_e--;)(Ve=Xe[_e])&&Te.push(It[_e]=Ve);k(null,Xe=[],Te,De)}for(_e=Xe.length;_e--;)(Ve=Xe[_e])&&-1<(Te=k?Ot(ee,Ve):dt[_e])&&(ee[Te]=!(re[Te]=Ve))}}else Xe=un(Xe===re?Xe.splice(yt,Xe.length):Xe),k?k(null,re,Xe,De):at.apply(re,Xe)})}function Nn(S){for(var _,O,W,k=S.length,Q=f.relative[S[0].type],ee=Q||f.relative[" "],re=Q?1:0,he=cn(function(_e){return _e===_},ee,!0),De=cn(function(_e){return-1<Ot(_,_e)},ee,!0),Te=[function(_e,Ve,dt){var Fe=!Q&&(dt||Ve!==R)||((_=Ve).nodeType?he(_e,Ve,dt):De(_e,Ve,dt));return _=null,Fe}];re<k;re++)if(O=f.relative[S[re].type])Te=[cn(An(Te),O)];else{if((O=f.filter[S[re].type].apply(null,S[re].matches))[Ke]){for(W=++re;W<k&&!f.relative[S[W].type];W++);return Mn(1<re&&An(Te),1<re&&on(S.slice(0,re-1).concat({value:S[re-2].type===" "?"*":""})).replace(kt,"$1"),O,re<W&&Nn(S.slice(re,W)),W<k&&Nn(S=S.slice(W)),W<k&&on(S))}Te.push(O)}return An(Te)}return Xn.prototype=f.filters=f.pseudos,f.setFilters=new Xn,b=Ye.tokenize=function(S,_){var O,W,k,Q,ee,re,he,De=Vi[S+" "];if(De)return _?0:De.slice(0);for(ee=S,re=[],he=f.preFilter;ee;){for(Q in O&&!(W=Di.exec(ee))||(W&&(ee=ee.slice(W[0].length)||ee),re.push(k=[])),O=!1,(W=sn.exec(ee))&&(O=W.shift(),k.push({value:O,type:W[0].replace(kt," ")}),ee=ee.slice(O.length)),f.filter)!(W=rn[Q].exec(ee))||he[Q]&&!(W=he[Q](W))||(O=W.shift(),k.push({value:O,type:Q,matches:W}),ee=ee.slice(O.length));if(!O)break}return _?ee.length:ee?Ye.error(S):Vi(S,re).slice(0)},D=Ye.compile=function(S,_){var O,W,k,Q,ee,re,he=[],De=[],Te=nn[S+" "];if(!Te){for(_||(_=b(S)),O=_.length;O--;)(Te=Nn(_[O]))[Ke]?he.push(Te):De.push(Te);(Te=nn(S,(W=De,Q=0<(k=he).length,ee=0<W.length,re=function(_e,Ve,dt,Fe,yt){var wt,It,Xe,Zt=0,xt="0",mt=_e&&[],Yt=[],dn=R,Qn=_e||ee&&f.find.TAG("*",yt),Jn=Lt+=dn==null?1:Math.random()||.1,Os=Qn.length;for(yt&&(R=Ve==B||Ve||yt);xt!==Os&&(wt=Qn[xt])!=null;xt++){if(ee&&wt){for(It=0,Ve||wt.ownerDocument==B||(H(wt),dt=!ve);Xe=W[It++];)if(Xe(wt,Ve||B,dt)){Fe.push(wt);break}yt&&(Lt=Jn)}Q&&((wt=!Xe&&wt)&&Zt--,_e&&mt.push(wt))}if(Zt+=xt,Q&&xt!==Zt){for(It=0;Xe=k[It++];)Xe(mt,Yt,Ve,dt);if(_e){if(0<Zt)for(;xt--;)mt[xt]||Yt[xt]||(Yt[xt]=Ii.call(Fe));Yt=un(Yt)}at.apply(Fe,Yt),yt&&!_e&&0<Yt.length&&1<Zt+k.length&&Ye.uniqueSort(Fe)}return yt&&(Lt=Jn,R=dn),mt},Q?zt(re):re))).selector=S}return Te},L=Ye.select=function(S,_,O,W){var k,Q,ee,re,he,De=typeof S=="function"&&S,Te=!W&&b(S=De.selector||S);if(O=O||[],Te.length===1){if(2<(Q=Te[0]=Te[0].slice(0)).length&&(ee=Q[0]).type==="ID"&&_.nodeType===9&&ve&&f.relative[Q[1].type]){if(!(_=(f.find.ID(ee.matches[0].replace(ai,oi),_)||[])[0]))return O;De&&(_=_.parentNode),S=S.slice(Q.shift().value.length)}for(k=rn.needsContext.test(S)?0:Q.length;k--&&(ee=Q[k],!f.relative[re=ee.type]);)if((he=f.find[re])&&(W=he(ee.matches[0].replace(ai,oi),In.test(Q[0].type)&&Ln(_.parentNode)||_))){if(Q.splice(k,1),!(S=W.length&&on(Q)))return at.apply(O,W),O;break}}return(De||D(S,Te))(W,_,!ve,O,!_||In.test(S)&&Ln(_.parentNode)||_),O},p.sortStable=Ke.split("").sort(yi).join("")===Ke,p.detectDuplicates=!!K,H(),p.sortDetached=Kt(function(S){return 1&S.compareDocumentPosition(B.createElement("fieldset"))}),Kt(function(S){return S.innerHTML="<a href='#'></a>",S.firstChild.getAttribute("href")==="#"})||Dn("type|href|height|width",function(S,_,O){if(!O)return S.getAttribute(_,_.toLowerCase()==="type"?1:2)}),p.attributes&&Kt(function(S){return S.innerHTML="<input/>",S.firstChild.setAttribute("value",""),S.firstChild.getAttribute("value")===""})||Dn("value",function(S,_,O){if(!O&&S.nodeName.toLowerCase()==="input")return S.defaultValue}),Kt(function(S){return S.getAttribute("disabled")==null})||Dn(Jt,function(S,_,O){var W;if(!O)return S[_]===!0?_.toLowerCase():(W=S.getAttributeNode(_))&&W.specified?W.value:null}),Ye}(o);g.find=Qe,g.expr=Qe.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=Qe.uniqueSort,g.text=Qe.getText,g.isXMLDoc=Qe.isXML,g.contains=Qe.contains,g.escapeSelector=Qe.escape;var ke=function(a,c,p){for(var f=[],E=p!==void 0;(a=a[c])&&a.nodeType!==9;)if(a.nodeType===1){if(E&&g(a).is(p))break;f.push(a)}return f},me=function(a,c){for(var p=[];a;a=a.nextSibling)a.nodeType===1&&a!==c&&p.push(a);return p},Be=g.expr.match.needsContext;function ce(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}var de=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Le(a,c,p){return I(c)?g.grep(a,function(f,E){return!!c.call(f,E,f)!==p}):c.nodeType?g.grep(a,function(f){return f===c!==p}):typeof c!="string"?g.grep(a,function(f){return-1<l.call(c,f)!==p}):g.filter(c,a,p)}g.filter=function(a,c,p){var f=c[0];return p&&(a=":not("+a+")"),c.length===1&&f.nodeType===1?g.find.matchesSelector(f,a)?[f]:[]:g.find.matches(a,g.grep(c,function(E){return E.nodeType===1}))},g.fn.extend({find:function(a){var c,p,f=this.length,E=this;if(typeof a!="string")return this.pushStack(g(a).filter(function(){for(c=0;c<f;c++)if(g.contains(E[c],this))return!0}));for(p=this.pushStack([]),c=0;c<f;c++)g.find(a,E[c],p);return 1<f?g.uniqueSort(p):p},filter:function(a){return this.pushStack(Le(this,a||[],!1))},not:function(a){return this.pushStack(Le(this,a||[],!0))},is:function(a){return!!Le(this,typeof a=="string"&&Be.test(a)?g(a):a||[],!1).length}});var ue,J=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(g.fn.init=function(a,c,p){var f,E;if(!a)return this;if(p=p||ue,typeof a=="string"){if(!(f=a[0]==="<"&&a[a.length-1]===">"&&3<=a.length?[null,a,null]:J.exec(a))||!f[1]&&c)return!c||c.jquery?(c||p).find(a):this.constructor(c).find(a);if(f[1]){if(c=c instanceof g?c[0]:c,g.merge(this,g.parseHTML(f[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),de.test(f[1])&&g.isPlainObject(c))for(f in c)I(this[f])?this[f](c[f]):this.attr(f,c[f]);return this}return(E=Y.getElementById(f[2]))&&(this[0]=E,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):I(a)?p.ready!==void 0?p.ready(a):a(g):g.makeArray(a,this)}).prototype=g.fn,ue=g(Y);var j=/^(?:parents|prev(?:Until|All))/,oe={children:!0,contents:!0,next:!0,prev:!0};function Z(a,c){for(;(a=a[c])&&a.nodeType!==1;);return a}g.fn.extend({has:function(a){var c=g(a,this),p=c.length;return this.filter(function(){for(var f=0;f<p;f++)if(g.contains(this,c[f]))return!0})},closest:function(a,c){var p,f=0,E=this.length,w=[],b=typeof a!="string"&&g(a);if(!Be.test(a)){for(;f<E;f++)for(p=this[f];p&&p!==c;p=p.parentNode)if(p.nodeType<11&&(b?-1<b.index(p):p.nodeType===1&&g.find.matchesSelector(p,a))){w.push(p);break}}return this.pushStack(1<w.length?g.uniqueSort(w):w)},index:function(a){return a?typeof a=="string"?l.call(g(a),this[0]):l.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(a,c))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),g.each({parent:function(a){var c=a.parentNode;return c&&c.nodeType!==11?c:null},parents:function(a){return ke(a,"parentNode")},parentsUntil:function(a,c,p){return ke(a,"parentNode",p)},next:function(a){return Z(a,"nextSibling")},prev:function(a){return Z(a,"previousSibling")},nextAll:function(a){return ke(a,"nextSibling")},prevAll:function(a){return ke(a,"previousSibling")},nextUntil:function(a,c,p){return ke(a,"nextSibling",p)},prevUntil:function(a,c,p){return ke(a,"previousSibling",p)},siblings:function(a){return me((a.parentNode||{}).firstChild,a)},children:function(a){return me(a.firstChild)},contents:function(a){return a.contentDocument!=null&&t(a.contentDocument)?a.contentDocument:(ce(a,"template")&&(a=a.content||a),g.merge([],a.childNodes))}},function(a,c){g.fn[a]=function(p,f){var E=g.map(this,c,p);return a.slice(-5)!=="Until"&&(f=p),f&&typeof f=="string"&&(E=g.filter(f,E)),1<this.length&&(oe[a]||g.uniqueSort(E),j.test(a)&&E.reverse()),this.pushStack(E)}});var ne=/[^\x20\t\r\n\f]+/g;function te(a){return a}function V(a){throw a}function q(a,c,p,f){var E;try{a&&I(E=a.promise)?E.call(a).done(c).fail(p):a&&I(E=a.then)?E.call(a,c,p):c.apply(void 0,[a].slice(f))}catch(w){p.apply(void 0,[w])}}g.Callbacks=function(a){var c,p;a=typeof a=="string"?(c=a,p={},g.each(c.match(ne)||[],function(H,B){p[B]=!0}),p):g.extend({},a);var f,E,w,b,D=[],L=[],R=-1,U=function(){for(b=b||a.once,w=f=!0;L.length;R=-1)for(E=L.shift();++R<D.length;)D[R].apply(E[0],E[1])===!1&&a.stopOnFalse&&(R=D.length,E=!1);a.memory||(E=!1),f=!1,b&&(D=E?[]:"")},K={add:function(){return D&&(E&&!f&&(R=D.length-1,L.push(E)),function H(B){g.each(B,function(pe,ve){I(ve)?a.unique&&K.has(ve)||D.push(ve):ve&&ve.length&&se(ve)!=="string"&&H(ve)})}(arguments),E&&!f&&U()),this},remove:function(){return g.each(arguments,function(H,B){for(var pe;-1<(pe=g.inArray(B,D,pe));)D.splice(pe,1),pe<=R&&R--}),this},has:function(H){return H?-1<g.inArray(H,D):0<D.length},empty:function(){return D&&(D=[]),this},disable:function(){return b=L=[],D=E="",this},disabled:function(){return!D},lock:function(){return b=L=[],E||f||(D=E=""),this},locked:function(){return!!b},fireWith:function(H,B){return b||(B=[H,(B=B||[]).slice?B.slice():B],L.push(B),f||U()),this},fire:function(){return K.fireWith(this,arguments),this},fired:function(){return!!w}};return K},g.extend({Deferred:function(a){var c=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],p="pending",f={state:function(){return p},always:function(){return E.done(arguments).fail(arguments),this},catch:function(w){return f.then(null,w)},pipe:function(){var w=arguments;return g.Deferred(function(b){g.each(c,function(D,L){var R=I(w[L[4]])&&w[L[4]];E[L[1]](function(){var U=R&&R.apply(this,arguments);U&&I(U.promise)?U.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[L[0]+"With"](this,R?[U]:arguments)})}),w=null}).promise()},then:function(w,b,D){var L=0;function R(U,K,H,B){return function(){var pe=this,ve=arguments,fe=function(){var ft,Nt;if(!(U<L)){if((ft=H.apply(pe,ve))===K.promise())throw new TypeError("Thenable self-resolution");Nt=ft&&(typeof ft=="object"||typeof ft=="function")&&ft.then,I(Nt)?B?Nt.call(ft,R(L,K,te,B),R(L,K,V,B)):(L++,Nt.call(ft,R(L,K,te,B),R(L,K,V,B),R(L,K,te,K.notifyWith))):(H!==te&&(pe=void 0,ve=[ft]),(B||K.resolveWith)(pe,ve))}},st=B?fe:function(){try{fe()}catch(ft){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(ft,st.stackTrace),L<=U+1&&(H!==V&&(pe=void 0,ve=[ft]),K.rejectWith(pe,ve))}};U?st():(g.Deferred.getStackHook&&(st.stackTrace=g.Deferred.getStackHook()),o.setTimeout(st))}}return g.Deferred(function(U){c[0][3].add(R(0,U,I(D)?D:te,U.notifyWith)),c[1][3].add(R(0,U,I(w)?w:te)),c[2][3].add(R(0,U,I(b)?b:V))}).promise()},promise:function(w){return w!=null?g.extend(w,f):f}},E={};return g.each(c,function(w,b){var D=b[2],L=b[5];f[b[1]]=D.add,L&&D.add(function(){p=L},c[3-w][2].disable,c[3-w][3].disable,c[0][2].lock,c[0][3].lock),D.add(b[3].fire),E[b[0]]=function(){return E[b[0]+"With"](this===E?void 0:this,arguments),this},E[b[0]+"With"]=D.fireWith}),f.promise(E),a&&a.call(E,E),E},when:function(a){var c=arguments.length,p=c,f=Array(p),E=n.call(arguments),w=g.Deferred(),b=function(D){return function(L){f[D]=this,E[D]=1<arguments.length?n.call(arguments):L,--c||w.resolveWith(f,E)}};if(c<=1&&(q(a,w.done(b(p)).resolve,w.reject,!c),w.state()==="pending"||I(E[p]&&E[p].then)))return w.then();for(;p--;)q(E[p],b(p),w.reject);return w.promise()}});var M=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(a,c){o.console&&o.console.warn&&a&&M.test(a.name)&&o.console.warn("jQuery.Deferred exception: "+a.message,a.stack,c)},g.readyException=function(a){o.setTimeout(function(){throw a})};var z=g.Deferred();function ae(){Y.removeEventListener("DOMContentLoaded",ae),o.removeEventListener("load",ae),g.ready()}g.fn.ready=function(a){return z.then(a).catch(function(c){g.readyException(c)}),this},g.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--g.readyWait:g.isReady)||(g.isReady=!0)!==a&&0<--g.readyWait||z.resolveWith(Y,[g])}}),g.ready.then=z.then,Y.readyState==="complete"||Y.readyState!=="loading"&&!Y.documentElement.doScroll?o.setTimeout(g.ready):(Y.addEventListener("DOMContentLoaded",ae),o.addEventListener("load",ae));var be=function(a,c,p,f,E,w,b){var D=0,L=a.length,R=p==null;if(se(p)==="object")for(D in E=!0,p)be(a,c,D,p[D],!0,w,b);else if(f!==void 0&&(E=!0,I(f)||(b=!0),R&&(b?(c.call(a,f),c=null):(R=c,c=function(U,K,H){return R.call(g(U),H)})),c))for(;D<L;D++)c(a[D],p,b?f:f.call(a[D],D,c(a[D],p)));return E?a:R?c.call(a):L?c(a[0],p):w},We=/^-ms-/,Ze=/-([a-z])/g;function He(a,c){return c.toUpperCase()}function Pe(a){return a.replace(We,"ms-").replace(Ze,He)}var Ee=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function ct(){this.expando=g.expando+ct.uid++}ct.uid=1,ct.prototype={cache:function(a){var c=a[this.expando];return c||(c={},Ee(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,configurable:!0}))),c},set:function(a,c,p){var f,E=this.cache(a);if(typeof c=="string")E[Pe(c)]=p;else for(f in c)E[Pe(f)]=c[f];return E},get:function(a,c){return c===void 0?this.cache(a):a[this.expando]&&a[this.expando][Pe(c)]},access:function(a,c,p){return c===void 0||c&&typeof c=="string"&&p===void 0?this.get(a,c):(this.set(a,c,p),p!==void 0?p:c)},remove:function(a,c){var p,f=a[this.expando];if(f!==void 0){if(c!==void 0)for(p=(c=Array.isArray(c)?c.map(Pe):(c=Pe(c))in f?[c]:c.match(ne)||[]).length;p--;)delete f[c[p]];(c===void 0||g.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var c=a[this.expando];return c!==void 0&&!g.isEmptyObject(c)}};var ge=new ct,Je=new ct,Vt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mt=/[A-Z]/g;function qt(a,c,p){var f,E;if(p===void 0&&a.nodeType===1)if(f="data-"+c.replace(Mt,"-$&").toLowerCase(),typeof(p=a.getAttribute(f))=="string"){try{p=(E=p)==="true"||E!=="false"&&(E==="null"?null:E===+E+""?+E:Vt.test(E)?JSON.parse(E):E)}catch{}Je.set(a,c,p)}else p=void 0;return p}g.extend({hasData:function(a){return Je.hasData(a)||ge.hasData(a)},data:function(a,c,p){return Je.access(a,c,p)},removeData:function(a,c){Je.remove(a,c)},_data:function(a,c,p){return ge.access(a,c,p)},_removeData:function(a,c){ge.remove(a,c)}}),g.fn.extend({data:function(a,c){var p,f,E,w=this[0],b=w&&w.attributes;if(a===void 0){if(this.length&&(E=Je.get(w),w.nodeType===1&&!ge.get(w,"hasDataAttrs"))){for(p=b.length;p--;)b[p]&&(f=b[p].name).indexOf("data-")===0&&(f=Pe(f.slice(5)),qt(w,f,E[f]));ge.set(w,"hasDataAttrs",!0)}return E}return typeof a=="object"?this.each(function(){Je.set(this,a)}):be(this,function(D){var L;if(w&&D===void 0)return(L=Je.get(w,a))!==void 0||(L=qt(w,a))!==void 0?L:void 0;this.each(function(){Je.set(this,a,D)})},null,c,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){Je.remove(this,a)})}}),g.extend({queue:function(a,c,p){var f;if(a)return c=(c||"fx")+"queue",f=ge.get(a,c),p&&(!f||Array.isArray(p)?f=ge.access(a,c,g.makeArray(p)):f.push(p)),f||[]},dequeue:function(a,c){c=c||"fx";var p=g.queue(a,c),f=p.length,E=p.shift(),w=g._queueHooks(a,c);E==="inprogress"&&(E=p.shift(),f--),E&&(c==="fx"&&p.unshift("inprogress"),delete w.stop,E.call(a,function(){g.dequeue(a,c)},w)),!f&&w&&w.empty.fire()},_queueHooks:function(a,c){var p=c+"queueHooks";return ge.get(a,p)||ge.access(a,p,{empty:g.Callbacks("once memory").add(function(){ge.remove(a,[c+"queue",p])})})}}),g.fn.extend({queue:function(a,c){var p=2;return typeof a!="string"&&(c=a,a="fx",p--),arguments.length<p?g.queue(this[0],a):c===void 0?this:this.each(function(){var f=g.queue(this,a,c);g._queueHooks(this,a),a==="fx"&&f[0]!=="inprogress"&&g.dequeue(this,a)})},dequeue:function(a){return this.each(function(){g.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var p,f=1,E=g.Deferred(),w=this,b=this.length,D=function(){--f||E.resolveWith(w,[w])};for(typeof a!="string"&&(c=a,a=void 0),a=a||"fx";b--;)(p=ge.get(w[b],a+"queueHooks"))&&p.empty&&(f++,p.empty.add(D));return D(),E.promise(c)}});var jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+jt+")([a-z%]*)$","i"),Ce=["Top","Right","Bottom","Left"],Ie=Y.documentElement,Oe=function(a){return g.contains(a.ownerDocument,a)},Et={composed:!0};Ie.getRootNode&&(Oe=function(a){return g.contains(a.ownerDocument,a)||a.getRootNode(Et)===a.ownerDocument});var ti=function(a,c){return(a=c||a).style.display==="none"||a.style.display===""&&Oe(a)&&g.css(a,"display")==="none"};function Si(a,c,p,f){var E,w,b=20,D=f?function(){return f.cur()}:function(){return g.css(a,c,"")},L=D(),R=p&&p[3]||(g.cssNumber[c]?"":"px"),U=a.nodeType&&(g.cssNumber[c]||R!=="px"&&+L)&&ot.exec(g.css(a,c));if(U&&U[3]!==R){for(L/=2,R=R||U[3],U=+L||1;b--;)g.style(a,c,U+R),(1-w)*(1-(w=D()/L||.5))<=0&&(b=0),U/=w;U*=2,g.style(a,c,U+R),p=p||[]}return p&&(U=+U||+L||0,E=p[1]?U+(p[1]+1)*p[2]:+p[2],f&&(f.unit=R,f.start=U,f.end=E)),E}var ji={};function ci(a,c){for(var p,f,E,w,b,D,L,R=[],U=0,K=a.length;U<K;U++)(f=a[U]).style&&(p=f.style.display,c?(p==="none"&&(R[U]=ge.get(f,"display")||null,R[U]||(f.style.display="")),f.style.display===""&&ti(f)&&(R[U]=(L=b=w=void 0,b=(E=f).ownerDocument,D=E.nodeName,(L=ji[D])||(w=b.body.appendChild(b.createElement(D)),L=g.css(w,"display"),w.parentNode.removeChild(w),L==="none"&&(L="block"),ji[D]=L)))):p!=="none"&&(R[U]="none",ge.set(f,"display",p)));for(U=0;U<K;U++)R[U]!=null&&(a[U].style.display=R[U]);return a}g.fn.extend({show:function(){return ci(this,!0)},hide:function(){return ci(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){ti(this)?g(this).show():g(this).hide()})}});var ii,Ti,di=/^(?:checkbox|radio)$/i,Wi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ct=/^$|^module$|\/(?:java|ecma)script/i;ii=Y.createDocumentFragment().appendChild(Y.createElement("div")),(Ti=Y.createElement("input")).setAttribute("type","radio"),Ti.setAttribute("checked","checked"),Ti.setAttribute("name","t"),ii.appendChild(Ti),F.checkClone=ii.cloneNode(!0).cloneNode(!0).lastChild.checked,ii.innerHTML="<textarea>x</textarea>",F.noCloneChecked=!!ii.cloneNode(!0).lastChild.defaultValue,ii.innerHTML="<option></option>",F.option=!!ii.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function St(a,c){var p;return p=typeof a.getElementsByTagName<"u"?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll<"u"?a.querySelectorAll(c||"*"):[],c===void 0||c&&ce(a,c)?g.merge([a],p):p}function Mi(a,c){for(var p=0,f=a.length;p<f;p++)ge.set(a[p],"globalEval",!c||ge.get(c[p],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,F.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var zi=/<|&#?\w+;/;function Ni(a,c,p,f,E){for(var w,b,D,L,R,U,K=c.createDocumentFragment(),H=[],B=0,pe=a.length;B<pe;B++)if((w=a[B])||w===0)if(se(w)==="object")g.merge(H,w.nodeType?[w]:w);else if(zi.test(w)){for(b=b||K.appendChild(c.createElement("div")),D=(Wi.exec(w)||["",""])[1].toLowerCase(),L=bt[D]||bt._default,b.innerHTML=L[1]+g.htmlPrefilter(w)+L[2],U=L[0];U--;)b=b.lastChild;g.merge(H,b.childNodes),(b=K.firstChild).textContent=""}else H.push(c.createTextNode(w));for(K.textContent="",B=0;w=H[B++];)if(f&&-1<g.inArray(w,f))E&&E.push(w);else if(R=Oe(w),b=St(K.appendChild(w),"script"),R&&Mi(b),p)for(U=0;w=b[U++];)Ct.test(w.type||"")&&p.push(w);return K}var Ki=/^([^.]*)(?:\.(.+)|)/;function Ht(){return!0}function ni(){return!1}function pn(a,c){return a===function(){try{return Y.activeElement}catch{}}()==(c==="focus")}function Wt(a,c,p,f,E,w){var b,D;if(typeof c=="object"){for(D in typeof p!="string"&&(f=f||p,p=void 0),c)Wt(a,D,p,f,c[D],w);return a}if(f==null&&E==null?(E=p,f=p=void 0):E==null&&(typeof p=="string"?(E=f,f=void 0):(E=f,f=p,p=void 0)),E===!1)E=ni;else if(!E)return a;return w===1&&(b=E,(E=function(L){return g().off(L),b.apply(this,arguments)}).guid=b.guid||(b.guid=g.guid++)),a.each(function(){g.event.add(this,c,E,f,p)})}function xi(a,c,p){p?(ge.set(a,c,!1),g.event.add(a,c,{namespace:!1,handler:function(f){var E,w,b=ge.get(this,c);if(1&f.isTrigger&&this[c]){if(b.length)(g.event.special[c]||{}).delegateType&&f.stopPropagation();else if(b=n.call(arguments),ge.set(this,c,b),E=p(this,c),this[c](),b!==(w=ge.get(this,c))||E?ge.set(this,c,!1):w={},b!==w)return f.stopImmediatePropagation(),f.preventDefault(),w&&w.value}else b.length&&(ge.set(this,c,{value:g.event.trigger(g.extend(b[0],g.Event.prototype),b.slice(1),this)}),f.stopImmediatePropagation())}})):ge.get(a,c)===void 0&&g.event.add(a,c,Ht)}g.event={global:{},add:function(a,c,p,f,E){var w,b,D,L,R,U,K,H,B,pe,ve,fe=ge.get(a);if(Ee(a))for(p.handler&&(p=(w=p).handler,E=w.selector),E&&g.find.matchesSelector(Ie,E),p.guid||(p.guid=g.guid++),(L=fe.events)||(L=fe.events=Object.create(null)),(b=fe.handle)||(b=fe.handle=function(st){return typeof g<"u"&&g.event.triggered!==st.type?g.event.dispatch.apply(a,arguments):void 0}),R=(c=(c||"").match(ne)||[""]).length;R--;)B=ve=(D=Ki.exec(c[R])||[])[1],pe=(D[2]||"").split(".").sort(),B&&(K=g.event.special[B]||{},B=(E?K.delegateType:K.bindType)||B,K=g.event.special[B]||{},U=g.extend({type:B,origType:ve,data:f,handler:p,guid:p.guid,selector:E,needsContext:E&&g.expr.match.needsContext.test(E),namespace:pe.join(".")},w),(H=L[B])||((H=L[B]=[]).delegateCount=0,K.setup&&K.setup.call(a,f,pe,b)!==!1||a.addEventListener&&a.addEventListener(B,b)),K.add&&(K.add.call(a,U),U.handler.guid||(U.handler.guid=p.guid)),E?H.splice(H.delegateCount++,0,U):H.push(U),g.event.global[B]=!0)},remove:function(a,c,p,f,E){var w,b,D,L,R,U,K,H,B,pe,ve,fe=ge.hasData(a)&&ge.get(a);if(fe&&(L=fe.events)){for(R=(c=(c||"").match(ne)||[""]).length;R--;)if(B=ve=(D=Ki.exec(c[R])||[])[1],pe=(D[2]||"").split(".").sort(),B){for(K=g.event.special[B]||{},H=L[B=(f?K.delegateType:K.bindType)||B]||[],D=D[2]&&new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=w=H.length;w--;)U=H[w],!E&&ve!==U.origType||p&&p.guid!==U.guid||D&&!D.test(U.namespace)||f&&f!==U.selector&&(f!=="**"||!U.selector)||(H.splice(w,1),U.selector&&H.delegateCount--,K.remove&&K.remove.call(a,U));b&&!H.length&&(K.teardown&&K.teardown.call(a,pe,fe.handle)!==!1||g.removeEvent(a,B,fe.handle),delete L[B])}else for(B in L)g.event.remove(a,B+c[R],p,f,!0);g.isEmptyObject(L)&&ge.remove(a,"handle events")}},dispatch:function(a){var c,p,f,E,w,b,D=new Array(arguments.length),L=g.event.fix(a),R=(ge.get(this,"events")||Object.create(null))[L.type]||[],U=g.event.special[L.type]||{};for(D[0]=L,c=1;c<arguments.length;c++)D[c]=arguments[c];if(L.delegateTarget=this,!U.preDispatch||U.preDispatch.call(this,L)!==!1){for(b=g.event.handlers.call(this,L,R),c=0;(E=b[c++])&&!L.isPropagationStopped();)for(L.currentTarget=E.elem,p=0;(w=E.handlers[p++])&&!L.isImmediatePropagationStopped();)L.rnamespace&&w.namespace!==!1&&!L.rnamespace.test(w.namespace)||(L.handleObj=w,L.data=w.data,(f=((g.event.special[w.origType]||{}).handle||w.handler).apply(E.elem,D))!==void 0&&(L.result=f)===!1&&(L.preventDefault(),L.stopPropagation()));return U.postDispatch&&U.postDispatch.call(this,L),L.result}},handlers:function(a,c){var p,f,E,w,b,D=[],L=c.delegateCount,R=a.target;if(L&&R.nodeType&&!(a.type==="click"&&1<=a.button)){for(;R!==this;R=R.parentNode||this)if(R.nodeType===1&&(a.type!=="click"||R.disabled!==!0)){for(w=[],b={},p=0;p<L;p++)b[E=(f=c[p]).selector+" "]===void 0&&(b[E]=f.needsContext?-1<g(E,this).index(R):g.find(E,this,null,[R]).length),b[E]&&w.push(f);w.length&&D.push({elem:R,handlers:w})}}return R=this,L<c.length&&D.push({elem:R,handlers:c.slice(L)}),D},addProp:function(a,c){Object.defineProperty(g.Event.prototype,a,{enumerable:!0,configurable:!0,get:I(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(p){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:p})}})},fix:function(a){return a[g.expando]?a:new g.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var c=this||a;return di.test(c.type)&&c.click&&ce(c,"input")&&xi(c,"click",Ht),!1},trigger:function(a){var c=this||a;return di.test(c.type)&&c.click&&ce(c,"input")&&xi(c,"click"),!0},_default:function(a){var c=a.target;return di.test(c.type)&&c.click&&ce(c,"input")&&ge.get(c,"click")||ce(c,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},g.removeEvent=function(a,c,p){a.removeEventListener&&a.removeEventListener(c,p)},g.Event=function(a,c){if(!(this instanceof g.Event))return new g.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?Ht:ni,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,c&&g.extend(this,c),this.timeStamp=a&&a.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:ni,isPropagationStopped:ni,isImmediatePropagationStopped:ni,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Ht,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Ht,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Ht,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(a,c){g.event.special[a]={setup:function(){return xi(this,a,pn),!1},trigger:function(){return xi(this,a),!0},_default:function(){return!0},delegateType:c}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){g.event.special[a]={delegateType:c,bindType:c,handle:function(p){var f,E=p.relatedTarget,w=p.handleObj;return E&&(E===this||g.contains(this,E))||(p.type=w.origType,f=w.handler.apply(this,arguments),p.type=c),f}}}),g.fn.extend({on:function(a,c,p,f){return Wt(this,a,c,p,f)},one:function(a,c,p,f){return Wt(this,a,c,p,f,1)},off:function(a,c,p){var f,E;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,g(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof a=="object"){for(E in a)this.off(E,c,a[E]);return this}return c!==!1&&typeof c!="function"||(p=c,c=void 0),p===!1&&(p=ni),this.each(function(){g.event.remove(this,a,p,c)})}});var mn=/<script|<style|<link/i,fn=/checked\s*(?:[^=]|=\s*.checked.)/i,gn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Fi(a,c){return ce(a,"table")&&ce(c.nodeType!==11?c:c.firstChild,"tr")&&g(a).children("tbody")[0]||a}function yn(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function vn(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function Yi(a,c){var p,f,E,w,b,D;if(c.nodeType===1){if(ge.hasData(a)&&(D=ge.get(a).events))for(E in ge.remove(c,"handle events"),D)for(p=0,f=D[E].length;p<f;p++)g.event.add(c,E,D[E][p]);Je.hasData(a)&&(w=Je.access(a),b=g.extend({},w),Je.set(c,b))}}function ui(a,c,p,f){c=s(c);var E,w,b,D,L,R,U=0,K=a.length,H=K-1,B=c[0],pe=I(B);if(pe||1<K&&typeof B=="string"&&!F.checkClone&&fn.test(B))return a.each(function(ve){var fe=a.eq(ve);pe&&(c[0]=B.call(this,ve,fe.html())),ui(fe,c,p,f)});if(K&&(w=(E=Ni(c,a[0].ownerDocument,!1,a,f)).firstChild,E.childNodes.length===1&&(E=w),w||f)){for(D=(b=g.map(St(E,"script"),yn)).length;U<K;U++)L=E,U!==H&&(L=g.clone(L,!0,!0),D&&g.merge(b,St(L,"script"))),p.call(a[U],L,U);if(D)for(R=b[b.length-1].ownerDocument,g.map(b,vn),U=0;U<D;U++)L=b[U],Ct.test(L.type||"")&&!ge.access(L,"globalEval")&&g.contains(R,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?g._evalUrl&&!L.noModule&&g._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},R):xe(L.textContent.replace(gn,""),L,R))}return a}function Xi(a,c,p){for(var f,E=c?g.filter(c,a):a,w=0;(f=E[w])!=null;w++)p||f.nodeType!==1||g.cleanData(St(f)),f.parentNode&&(p&&Oe(f)&&Mi(St(f,"script")),f.parentNode.removeChild(f));return a}g.extend({htmlPrefilter:function(a){return a},clone:function(a,c,p){var f,E,w,b,D,L,R,U=a.cloneNode(!0),K=Oe(a);if(!(F.noCloneChecked||a.nodeType!==1&&a.nodeType!==11||g.isXMLDoc(a)))for(b=St(U),f=0,E=(w=St(a)).length;f<E;f++)D=w[f],L=b[f],(R=L.nodeName.toLowerCase())==="input"&&di.test(D.type)?L.checked=D.checked:R!=="input"&&R!=="textarea"||(L.defaultValue=D.defaultValue);if(c)if(p)for(w=w||St(a),b=b||St(U),f=0,E=w.length;f<E;f++)Yi(w[f],b[f]);else Yi(a,U);return 0<(b=St(U,"script")).length&&Mi(b,!K&&St(a,"script")),U},cleanData:function(a){for(var c,p,f,E=g.event.special,w=0;(p=a[w])!==void 0;w++)if(Ee(p)){if(c=p[ge.expando]){if(c.events)for(f in c.events)E[f]?g.event.remove(p,f):g.removeEvent(p,f,c.handle);p[ge.expando]=void 0}p[Je.expando]&&(p[Je.expando]=void 0)}}}),g.fn.extend({detach:function(a){return Xi(this,a,!0)},remove:function(a){return Xi(this,a)},text:function(a){return be(this,function(c){return c===void 0?g.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=c)})},null,a,arguments.length)},append:function(){return ui(this,arguments,function(a){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||Fi(this,a).appendChild(a)})},prepend:function(){return ui(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Fi(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return ui(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ui(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;(a=this[c])!=null;c++)a.nodeType===1&&(g.cleanData(St(a,!1)),a.textContent="");return this},clone:function(a,c){return a=a!=null&&a,c=c??a,this.map(function(){return g.clone(this,a,c)})},html:function(a){return be(this,function(c){var p=this[0]||{},f=0,E=this.length;if(c===void 0&&p.nodeType===1)return p.innerHTML;if(typeof c=="string"&&!mn.test(c)&&!bt[(Wi.exec(c)||["",""])[1].toLowerCase()]){c=g.htmlPrefilter(c);try{for(;f<E;f++)(p=this[f]||{}).nodeType===1&&(g.cleanData(St(p,!1)),p.innerHTML=c);p=0}catch{}}p&&this.empty().append(c)},null,a,arguments.length)},replaceWith:function(){var a=[];return ui(this,arguments,function(c){var p=this.parentNode;g.inArray(this,a)<0&&(g.cleanData(St(this)),p&&p.replaceChild(c,this))},a)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){g.fn[a]=function(p){for(var f,E=[],w=g(p),b=w.length-1,D=0;D<=b;D++)f=D===b?this:this.clone(!0),g(w[D])[c](f),r.apply(E,f.get());return this.pushStack(E)}});var Pi=new RegExp("^("+jt+")(?!px)[a-z%]+$","i"),Ut=function(a){var c=a.ownerDocument.defaultView;return c&&c.opener||(c=o),c.getComputedStyle(a)},Qi=function(a,c,p){var f,E,w={};for(E in c)w[E]=a.style[E],a.style[E]=c[E];for(E in f=p.call(a),c)a.style[E]=w[E];return f},En=new RegExp(Ce.join("|"),"i");function hi(a,c,p){var f,E,w,b,D=a.style;return(p=p||Ut(a))&&((b=p.getPropertyValue(c)||p[c])!==""||Oe(a)||(b=g.style(a,c)),!F.pixelBoxStyles()&&Pi.test(b)&&En.test(c)&&(f=D.width,E=D.minWidth,w=D.maxWidth,D.minWidth=D.maxWidth=D.width=b,b=p.width,D.width=f,D.minWidth=E,D.maxWidth=w)),b!==void 0?b+"":b}function Ji(a,c){return{get:function(){if(!a())return(this.get=c).apply(this,arguments);delete this.get}}}(function(){function a(){if(R){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",R.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ie.appendChild(L).appendChild(R);var U=o.getComputedStyle(R);p=U.top!=="1%",D=c(U.marginLeft)===12,R.style.right="60%",w=c(U.right)===36,f=c(U.width)===36,R.style.position="absolute",E=c(R.offsetWidth/3)===12,Ie.removeChild(L),R=null}}function c(U){return Math.round(parseFloat(U))}var p,f,E,w,b,D,L=Y.createElement("div"),R=Y.createElement("div");R.style&&(R.style.backgroundClip="content-box",R.cloneNode(!0).style.backgroundClip="",F.clearCloneStyle=R.style.backgroundClip==="content-box",g.extend(F,{boxSizingReliable:function(){return a(),f},pixelBoxStyles:function(){return a(),w},pixelPosition:function(){return a(),p},reliableMarginLeft:function(){return a(),D},scrollboxSize:function(){return a(),E},reliableTrDimensions:function(){var U,K,H,B;return b==null&&(U=Y.createElement("table"),K=Y.createElement("tr"),H=Y.createElement("div"),U.style.cssText="position:absolute;left:-11111px;border-collapse:separate",K.style.cssText="border:1px solid",K.style.height="1px",H.style.height="9px",H.style.display="block",Ie.appendChild(U).appendChild(K).appendChild(H),B=o.getComputedStyle(K),b=parseInt(B.height,10)+parseInt(B.borderTopWidth,10)+parseInt(B.borderBottomWidth,10)===K.offsetHeight,Ie.removeChild(U)),b}}))})();var pi=["Webkit","Moz","ms"],Oi=Y.createElement("div").style,Zi={};function si(a){var c=g.cssProps[a]||Zi[a];return c||(a in Oi?a:Zi[a]=function(p){for(var f=p[0].toUpperCase()+p.slice(1),E=pi.length;E--;)if((p=pi[E]+f)in Oi)return p}(a)||a)}var mi=/^(none|table(?!-c[ea]).+)/,en=/^--/,tn={position:"absolute",visibility:"hidden",display:"block"},fi={letterSpacing:"0",fontWeight:"400"};function A(a,c,p){var f=ot.exec(c);return f?Math.max(0,f[2]-(p||0))+(f[3]||"px"):c}function d(a,c,p,f,E,w){var b=c==="width"?1:0,D=0,L=0;if(p===(f?"border":"content"))return 0;for(;b<4;b+=2)p==="margin"&&(L+=g.css(a,p+Ce[b],!0,E)),f?(p==="content"&&(L-=g.css(a,"padding"+Ce[b],!0,E)),p!=="margin"&&(L-=g.css(a,"border"+Ce[b]+"Width",!0,E))):(L+=g.css(a,"padding"+Ce[b],!0,E),p!=="padding"?L+=g.css(a,"border"+Ce[b]+"Width",!0,E):D+=g.css(a,"border"+Ce[b]+"Width",!0,E));return!f&&0<=w&&(L+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-w-L-D-.5))||0),L}function v(a,c,p){var f=Ut(a),E=(!F.boxSizingReliable()||p)&&g.css(a,"boxSizing",!1,f)==="border-box",w=E,b=hi(a,c,f),D="offset"+c[0].toUpperCase()+c.slice(1);if(Pi.test(b)){if(!p)return b;b="auto"}return(!F.boxSizingReliable()&&E||!F.reliableTrDimensions()&&ce(a,"tr")||b==="auto"||!parseFloat(b)&&g.css(a,"display",!1,f)==="inline")&&a.getClientRects().length&&(E=g.css(a,"boxSizing",!1,f)==="border-box",(w=D in a)&&(b=a[D])),(b=parseFloat(b)||0)+d(a,c,p||(E?"border":"content"),w,f,b)+"px"}function x(a,c,p,f,E){return new x.prototype.init(a,c,p,f,E)}g.extend({cssHooks:{opacity:{get:function(a,c){if(c){var p=hi(a,"opacity");return p===""?"1":p}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,c,p,f){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var E,w,b,D=Pe(c),L=en.test(c),R=a.style;if(L||(c=si(D)),b=g.cssHooks[c]||g.cssHooks[D],p===void 0)return b&&"get"in b&&(E=b.get(a,!1,f))!==void 0?E:R[c];(w=typeof p)=="string"&&(E=ot.exec(p))&&E[1]&&(p=Si(a,c,E),w="number"),p!=null&&p==p&&(w!=="number"||L||(p+=E&&E[3]||(g.cssNumber[D]?"":"px")),F.clearCloneStyle||p!==""||c.indexOf("background")!==0||(R[c]="inherit"),b&&"set"in b&&(p=b.set(a,p,f))===void 0||(L?R.setProperty(c,p):R[c]=p))}},css:function(a,c,p,f){var E,w,b,D=Pe(c);return en.test(c)||(c=si(D)),(b=g.cssHooks[c]||g.cssHooks[D])&&"get"in b&&(E=b.get(a,!0,p)),E===void 0&&(E=hi(a,c,f)),E==="normal"&&c in fi&&(E=fi[c]),p===""||p?(w=parseFloat(E),p===!0||isFinite(w)?w||0:E):E}}),g.each(["height","width"],function(a,c){g.cssHooks[c]={get:function(p,f,E){if(f)return!mi.test(g.css(p,"display"))||p.getClientRects().length&&p.getBoundingClientRect().width?v(p,c,E):Qi(p,tn,function(){return v(p,c,E)})},set:function(p,f,E){var w,b=Ut(p),D=!F.scrollboxSize()&&b.position==="absolute",L=(D||E)&&g.css(p,"boxSizing",!1,b)==="border-box",R=E?d(p,c,E,L,b):0;return L&&D&&(R-=Math.ceil(p["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(b[c])-d(p,c,"border",!1,b)-.5)),R&&(w=ot.exec(f))&&(w[3]||"px")!=="px"&&(p.style[c]=f,f=g.css(p,c)),A(0,f,R)}}}),g.cssHooks.marginLeft=Ji(F.reliableMarginLeft,function(a,c){if(c)return(parseFloat(hi(a,"marginLeft"))||a.getBoundingClientRect().left-Qi(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(a,c){g.cssHooks[a+c]={expand:function(p){for(var f=0,E={},w=typeof p=="string"?p.split(" "):[p];f<4;f++)E[a+Ce[f]+c]=w[f]||w[f-2]||w[0];return E}},a!=="margin"&&(g.cssHooks[a+c].set=A)}),g.fn.extend({css:function(a,c){return be(this,function(p,f,E){var w,b,D={},L=0;if(Array.isArray(f)){for(w=Ut(p),b=f.length;L<b;L++)D[f[L]]=g.css(p,f[L],!1,w);return D}return E!==void 0?g.style(p,f,E):g.css(p,f)},a,c,1<arguments.length)}}),((g.Tween=x).prototype={constructor:x,init:function(a,c,p,f,E,w){this.elem=a,this.prop=p,this.easing=E||g.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=f,this.unit=w||(g.cssNumber[p]?"":"px")},cur:function(){var a=x.propHooks[this.prop];return a&&a.get?a.get(this):x.propHooks._default.get(this)},run:function(a){var c,p=x.propHooks[this.prop];return this.options.duration?this.pos=c=g.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),p&&p.set?p.set(this):x.propHooks._default.set(this),this}}).init.prototype=x.prototype,(x.propHooks={_default:{get:function(a){var c;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(c=g.css(a.elem,a.prop,""))&&c!=="auto"?c:0},set:function(a){g.fx.step[a.prop]?g.fx.step[a.prop](a):a.elem.nodeType!==1||!g.cssHooks[a.prop]&&a.elem.style[si(a.prop)]==null?a.elem[a.prop]=a.now:g.style(a.elem,a.prop,a.now+a.unit)}}}).scrollTop=x.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},g.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},g.fx=x.prototype.init,g.fx.step={};var N,X,ie,Me,Re=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function et(){X&&(Y.hidden===!1&&o.requestAnimationFrame?o.requestAnimationFrame(et):o.setTimeout(et,g.fx.interval),g.fx.tick())}function ze(){return o.setTimeout(function(){N=void 0}),N=Date.now()}function tt(a,c){var p,f=0,E={height:a};for(c=c?1:0;f<4;f+=2-c)E["margin"+(p=Ce[f])]=E["padding"+p]=a;return c&&(E.opacity=E.width=a),E}function ut(a,c,p){for(var f,E=(it.tweeners[c]||[]).concat(it.tweeners["*"]),w=0,b=E.length;w<b;w++)if(f=E[w].call(p,c,a))return f}function it(a,c,p){var f,E,w=0,b=it.prefilters.length,D=g.Deferred().always(function(){delete L.elem}),L=function(){if(E)return!1;for(var K=N||ze(),H=Math.max(0,R.startTime+R.duration-K),B=1-(H/R.duration||0),pe=0,ve=R.tweens.length;pe<ve;pe++)R.tweens[pe].run(B);return D.notifyWith(a,[R,B,H]),B<1&&ve?H:(ve||D.notifyWith(a,[R,1,0]),D.resolveWith(a,[R]),!1)},R=D.promise({elem:a,props:g.extend({},c),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},p),originalProperties:c,originalOptions:p,startTime:N||ze(),duration:p.duration,tweens:[],createTween:function(K,H){var B=g.Tween(a,R.opts,K,H,R.opts.specialEasing[K]||R.opts.easing);return R.tweens.push(B),B},stop:function(K){var H=0,B=K?R.tweens.length:0;if(E)return this;for(E=!0;H<B;H++)R.tweens[H].run(1);return K?(D.notifyWith(a,[R,1,0]),D.resolveWith(a,[R,K])):D.rejectWith(a,[R,K]),this}}),U=R.props;for(!function(K,H){var B,pe,ve,fe,st;for(B in K)if(ve=H[pe=Pe(B)],fe=K[B],Array.isArray(fe)&&(ve=fe[1],fe=K[B]=fe[0]),B!==pe&&(K[pe]=fe,delete K[B]),(st=g.cssHooks[pe])&&"expand"in st)for(B in fe=st.expand(fe),delete K[pe],fe)B in K||(K[B]=fe[B],H[B]=ve);else H[pe]=ve}(U,R.opts.specialEasing);w<b;w++)if(f=it.prefilters[w].call(R,a,U,R.opts))return I(f.stop)&&(g._queueHooks(R.elem,R.opts.queue).stop=f.stop.bind(f)),f;return g.map(U,ut,R),I(R.opts.start)&&R.opts.start.call(a,R),R.progress(R.opts.progress).done(R.opts.done,R.opts.complete).fail(R.opts.fail).always(R.opts.always),g.fx.timer(g.extend(L,{elem:a,anim:R,queue:R.opts.queue})),R}g.Animation=g.extend(it,{tweeners:{"*":[function(a,c){var p=this.createTween(a,c);return Si(p.elem,a,ot.exec(c),p),p}]},tweener:function(a,c){I(a)?(c=a,a=["*"]):a=a.match(ne);for(var p,f=0,E=a.length;f<E;f++)p=a[f],it.tweeners[p]=it.tweeners[p]||[],it.tweeners[p].unshift(c)},prefilters:[function(a,c,p){var f,E,w,b,D,L,R,U,K="width"in c||"height"in c,H=this,B={},pe=a.style,ve=a.nodeType&&ti(a),fe=ge.get(a,"fxshow");for(f in p.queue||((b=g._queueHooks(a,"fx")).unqueued==null&&(b.unqueued=0,D=b.empty.fire,b.empty.fire=function(){b.unqueued||D()}),b.unqueued++,H.always(function(){H.always(function(){b.unqueued--,g.queue(a,"fx").length||b.empty.fire()})})),c)if(E=c[f],Re.test(E)){if(delete c[f],w=w||E==="toggle",E===(ve?"hide":"show")){if(E!=="show"||!fe||fe[f]===void 0)continue;ve=!0}B[f]=fe&&fe[f]||g.style(a,f)}if((L=!g.isEmptyObject(c))||!g.isEmptyObject(B))for(f in K&&a.nodeType===1&&(p.overflow=[pe.overflow,pe.overflowX,pe.overflowY],(R=fe&&fe.display)==null&&(R=ge.get(a,"display")),(U=g.css(a,"display"))==="none"&&(R?U=R:(ci([a],!0),R=a.style.display||R,U=g.css(a,"display"),ci([a]))),(U==="inline"||U==="inline-block"&&R!=null)&&g.css(a,"float")==="none"&&(L||(H.done(function(){pe.display=R}),R==null&&(U=pe.display,R=U==="none"?"":U)),pe.display="inline-block")),p.overflow&&(pe.overflow="hidden",H.always(function(){pe.overflow=p.overflow[0],pe.overflowX=p.overflow[1],pe.overflowY=p.overflow[2]})),L=!1,B)L||(fe?"hidden"in fe&&(ve=fe.hidden):fe=ge.access(a,"fxshow",{display:R}),w&&(fe.hidden=!ve),ve&&ci([a],!0),H.done(function(){for(f in ve||ci([a]),ge.remove(a,"fxshow"),B)g.style(a,f,B[f])})),L=ut(ve?fe[f]:0,f,H),f in fe||(fe[f]=L.start,ve&&(L.end=L.start,L.start=0))}],prefilter:function(a,c){c?it.prefilters.unshift(a):it.prefilters.push(a)}}),g.speed=function(a,c,p){var f=a&&typeof a=="object"?g.extend({},a):{complete:p||!p&&c||I(a)&&a,duration:a,easing:p&&c||c&&!I(c)&&c};return g.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in g.fx.speeds?f.duration=g.fx.speeds[f.duration]:f.duration=g.fx.speeds._default),f.queue!=null&&f.queue!==!0||(f.queue="fx"),f.old=f.complete,f.complete=function(){I(f.old)&&f.old.call(this),f.queue&&g.dequeue(this,f.queue)},f},g.fn.extend({fadeTo:function(a,c,p,f){return this.filter(ti).css("opacity",0).show().end().animate({opacity:c},a,p,f)},animate:function(a,c,p,f){var E=g.isEmptyObject(a),w=g.speed(c,p,f),b=function(){var D=it(this,g.extend({},a),w);(E||ge.get(this,"finish"))&&D.stop(!0)};return b.finish=b,E||w.queue===!1?this.each(b):this.queue(w.queue,b)},stop:function(a,c,p){var f=function(E){var w=E.stop;delete E.stop,w(p)};return typeof a!="string"&&(p=c,c=a,a=void 0),c&&this.queue(a||"fx",[]),this.each(function(){var E=!0,w=a!=null&&a+"queueHooks",b=g.timers,D=ge.get(this);if(w)D[w]&&D[w].stop&&f(D[w]);else for(w in D)D[w]&&D[w].stop&&lt.test(w)&&f(D[w]);for(w=b.length;w--;)b[w].elem!==this||a!=null&&b[w].queue!==a||(b[w].anim.stop(p),E=!1,b.splice(w,1));!E&&p||g.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var c,p=ge.get(this),f=p[a+"queue"],E=p[a+"queueHooks"],w=g.timers,b=f?f.length:0;for(p.finish=!0,g.queue(this,a,[]),E&&E.stop&&E.stop.call(this,!0),c=w.length;c--;)w[c].elem===this&&w[c].queue===a&&(w[c].anim.stop(!0),w.splice(c,1));for(c=0;c<b;c++)f[c]&&f[c].finish&&f[c].finish.call(this);delete p.finish})}}),g.each(["toggle","show","hide"],function(a,c){var p=g.fn[c];g.fn[c]=function(f,E,w){return f==null||typeof f=="boolean"?p.apply(this,arguments):this.animate(tt(c,!0),f,E,w)}}),g.each({slideDown:tt("show"),slideUp:tt("hide"),slideToggle:tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){g.fn[a]=function(p,f,E){return this.animate(c,p,f,E)}}),g.timers=[],g.fx.tick=function(){var a,c=0,p=g.timers;for(N=Date.now();c<p.length;c++)(a=p[c])()||p[c]!==a||p.splice(c--,1);p.length||g.fx.stop(),N=void 0},g.fx.timer=function(a){g.timers.push(a),g.fx.start()},g.fx.interval=13,g.fx.start=function(){X||(X=!0,et())},g.fx.stop=function(){X=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(a,c){return a=g.fx&&g.fx.speeds[a]||a,c=c||"fx",this.queue(c,function(p,f){var E=o.setTimeout(p,a);f.stop=function(){o.clearTimeout(E)}})},ie=Y.createElement("input"),Me=Y.createElement("select").appendChild(Y.createElement("option")),ie.type="checkbox",F.checkOn=ie.value!=="",F.optSelected=Me.selected,(ie=Y.createElement("input")).value="t",ie.type="radio",F.radioValue=ie.value==="t";var Tt,Dt=g.expr.attrHandle;g.fn.extend({attr:function(a,c){return be(this,g.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){g.removeAttr(this,a)})}}),g.extend({attr:function(a,c,p){var f,E,w=a.nodeType;if(w!==3&&w!==8&&w!==2)return typeof a.getAttribute>"u"?g.prop(a,c,p):(w===1&&g.isXMLDoc(a)||(E=g.attrHooks[c.toLowerCase()]||(g.expr.match.bool.test(c)?Tt:void 0)),p!==void 0?p===null?void g.removeAttr(a,c):E&&"set"in E&&(f=E.set(a,p,c))!==void 0?f:(a.setAttribute(c,p+""),p):E&&"get"in E&&(f=E.get(a,c))!==null?f:(f=g.find.attr(a,c))==null?void 0:f)},attrHooks:{type:{set:function(a,c){if(!F.radioValue&&c==="radio"&&ce(a,"input")){var p=a.value;return a.setAttribute("type",c),p&&(a.value=p),c}}}},removeAttr:function(a,c){var p,f=0,E=c&&c.match(ne);if(E&&a.nodeType===1)for(;p=E[f++];)a.removeAttribute(p)}}),Tt={set:function(a,c,p){return c===!1?g.removeAttr(a,p):a.setAttribute(p,p),p}},g.each(g.expr.match.bool.source.match(/\w+/g),function(a,c){var p=Dt[c]||g.find.attr;Dt[c]=function(f,E,w){var b,D,L=E.toLowerCase();return w||(D=Dt[L],Dt[L]=b,b=p(f,E,w)!=null?L:null,Dt[L]=D),b}});var ri=/^(?:input|select|textarea|button)$/i,gi=/^(?:a|area)$/i;function _t(a){return(a.match(ne)||[]).join(" ")}function Qt(a){return a.getAttribute&&a.getAttribute("class")||""}function Cn(a){return Array.isArray(a)?a:typeof a=="string"&&a.match(ne)||[]}g.fn.extend({prop:function(a,c){return be(this,g.prop,a,c,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[g.propFix[a]||a]})}}),g.extend({prop:function(a,c,p){var f,E,w=a.nodeType;if(w!==3&&w!==8&&w!==2)return w===1&&g.isXMLDoc(a)||(c=g.propFix[c]||c,E=g.propHooks[c]),p!==void 0?E&&"set"in E&&(f=E.set(a,p,c))!==void 0?f:a[c]=p:E&&"get"in E&&(f=E.get(a,c))!==null?f:a[c]},propHooks:{tabIndex:{get:function(a){var c=g.find.attr(a,"tabindex");return c?parseInt(c,10):ri.test(a.nodeName)||gi.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),F.optSelected||(g.propHooks.selected={get:function(a){var c=a.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(a){var c=a.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this}),g.fn.extend({addClass:function(a){var c,p,f,E,w,b,D,L=0;if(I(a))return this.each(function(R){g(this).addClass(a.call(this,R,Qt(this)))});if((c=Cn(a)).length){for(;p=this[L++];)if(E=Qt(p),f=p.nodeType===1&&" "+_t(E)+" "){for(b=0;w=c[b++];)f.indexOf(" "+w+" ")<0&&(f+=w+" ");E!==(D=_t(f))&&p.setAttribute("class",D)}}return this},removeClass:function(a){var c,p,f,E,w,b,D,L=0;if(I(a))return this.each(function(R){g(this).removeClass(a.call(this,R,Qt(this)))});if(!arguments.length)return this.attr("class","");if((c=Cn(a)).length){for(;p=this[L++];)if(E=Qt(p),f=p.nodeType===1&&" "+_t(E)+" "){for(b=0;w=c[b++];)for(;-1<f.indexOf(" "+w+" ");)f=f.replace(" "+w+" "," ");E!==(D=_t(f))&&p.setAttribute("class",D)}}return this},toggleClass:function(a,c){var p=typeof a,f=p==="string"||Array.isArray(a);return typeof c=="boolean"&&f?c?this.addClass(a):this.removeClass(a):I(a)?this.each(function(E){g(this).toggleClass(a.call(this,E,Qt(this),c),c)}):this.each(function(){var E,w,b,D;if(f)for(w=0,b=g(this),D=Cn(a);E=D[w++];)b.hasClass(E)?b.removeClass(E):b.addClass(E);else a!==void 0&&p!=="boolean"||((E=Qt(this))&&ge.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||a===!1?"":ge.get(this,"__className__")||""))})},hasClass:function(a){var c,p,f=0;for(c=" "+a+" ";p=this[f++];)if(p.nodeType===1&&-1<(" "+_t(Qt(p))+" ").indexOf(c))return!0;return!1}});var us=/\r/g;g.fn.extend({val:function(a){var c,p,f,E=this[0];return arguments.length?(f=I(a),this.each(function(w){var b;this.nodeType===1&&((b=f?a.call(this,w,g(this).val()):a)==null?b="":typeof b=="number"?b+="":Array.isArray(b)&&(b=g.map(b,function(D){return D==null?"":D+""})),(c=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&c.set(this,b,"value")!==void 0||(this.value=b))})):E?(c=g.valHooks[E.type]||g.valHooks[E.nodeName.toLowerCase()])&&"get"in c&&(p=c.get(E,"value"))!==void 0?p:typeof(p=E.value)=="string"?p.replace(us,""):p??"":void 0}}),g.extend({valHooks:{option:{get:function(a){var c=g.find.attr(a,"value");return c??_t(g.text(a))}},select:{get:function(a){var c,p,f,E=a.options,w=a.selectedIndex,b=a.type==="select-one",D=b?null:[],L=b?w+1:E.length;for(f=w<0?L:b?w:0;f<L;f++)if(((p=E[f]).selected||f===w)&&!p.disabled&&(!p.parentNode.disabled||!ce(p.parentNode,"optgroup"))){if(c=g(p).val(),b)return c;D.push(c)}return D},set:function(a,c){for(var p,f,E=a.options,w=g.makeArray(c),b=E.length;b--;)((f=E[b]).selected=-1<g.inArray(g.valHooks.option.get(f),w))&&(p=!0);return p||(a.selectedIndex=-1),w}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=-1<g.inArray(g(a).val(),c)}},F.checkOn||(g.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),F.focusin="onfocusin"in o;var On=/^(?:focusinfocus|focusoutblur)$/,Rn=function(a){a.stopPropagation()};g.extend(g.event,{trigger:function(a,c,p,f){var E,w,b,D,L,R,U,K,H=[p||Y],B=y.call(a,"type")?a.type:a,pe=y.call(a,"namespace")?a.namespace.split("."):[];if(w=K=b=p=p||Y,p.nodeType!==3&&p.nodeType!==8&&!On.test(B+g.event.triggered)&&(-1<B.indexOf(".")&&(B=(pe=B.split(".")).shift(),pe.sort()),L=B.indexOf(":")<0&&"on"+B,(a=a[g.expando]?a:new g.Event(B,typeof a=="object"&&a)).isTrigger=f?2:3,a.namespace=pe.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=p),c=c==null?[a]:g.makeArray(c,[a]),U=g.event.special[B]||{},f||!U.trigger||U.trigger.apply(p,c)!==!1)){if(!f&&!U.noBubble&&!G(p)){for(D=U.delegateType||B,On.test(D+B)||(w=w.parentNode);w;w=w.parentNode)H.push(w),b=w;b===(p.ownerDocument||Y)&&H.push(b.defaultView||b.parentWindow||o)}for(E=0;(w=H[E++])&&!a.isPropagationStopped();)K=w,a.type=1<E?D:U.bindType||B,(R=(ge.get(w,"events")||Object.create(null))[a.type]&&ge.get(w,"handle"))&&R.apply(w,c),(R=L&&w[L])&&R.apply&&Ee(w)&&(a.result=R.apply(w,c),a.result===!1&&a.preventDefault());return a.type=B,f||a.isDefaultPrevented()||U._default&&U._default.apply(H.pop(),c)!==!1||!Ee(p)||L&&I(p[B])&&!G(p)&&((b=p[L])&&(p[L]=null),g.event.triggered=B,a.isPropagationStopped()&&K.addEventListener(B,Rn),p[B](),a.isPropagationStopped()&&K.removeEventListener(B,Rn),g.event.triggered=void 0,b&&(p[L]=b)),a.result}},simulate:function(a,c,p){var f=g.extend(new g.Event,p,{type:a,isSimulated:!0});g.event.trigger(f,null,c)}}),g.fn.extend({trigger:function(a,c){return this.each(function(){g.event.trigger(a,c,this)})},triggerHandler:function(a,c){var p=this[0];if(p)return g.event.trigger(a,c,p,!0)}}),F.focusin||g.each({focus:"focusin",blur:"focusout"},function(a,c){var p=function(f){g.event.simulate(c,f.target,g.event.fix(f))};g.event.special[c]={setup:function(){var f=this.ownerDocument||this.document||this,E=ge.access(f,c);E||f.addEventListener(a,p,!0),ge.access(f,c,(E||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,E=ge.access(f,c)-1;E?ge.access(f,c,E):(f.removeEventListener(a,p,!0),ge.remove(f,c))}}});var Ri=o.location,kn={guid:Date.now()},wn=/\?/;g.parseXML=function(a){var c,p;if(!a||typeof a!="string")return null;try{c=new o.DOMParser().parseFromString(a,"text/xml")}catch{}return p=c&&c.getElementsByTagName("parsererror")[0],c&&!p||g.error("Invalid XML: "+(p?g.map(p.childNodes,function(f){return f.textContent}).join(`
`):a)),c};var hs=/\[\]$/,Vn=/\r?\n/g,ps=/^(?:submit|button|image|reset|file)$/i,ms=/^(?:input|select|textarea|keygen)/i;function bn(a,c,p,f){var E;if(Array.isArray(c))g.each(c,function(w,b){p||hs.test(a)?f(a,b):bn(a+"["+(typeof b=="object"&&b!=null?w:"")+"]",b,p,f)});else if(p||se(c)!=="object")f(a,c);else for(E in c)bn(a+"["+E+"]",c[E],p,f)}g.param=function(a,c){var p,f=[],E=function(w,b){var D=I(b)?b():b;f[f.length]=encodeURIComponent(w)+"="+encodeURIComponent(D??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!g.isPlainObject(a))g.each(a,function(){E(this.name,this.value)});else for(p in a)bn(p,a[p],c,E);return f.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=g.prop(this,"elements");return a?g.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!g(this).is(":disabled")&&ms.test(this.nodeName)&&!ps.test(a)&&(this.checked||!di.test(a))}).map(function(a,c){var p=g(this).val();return p==null?null:Array.isArray(p)?g.map(p,function(f){return{name:c.name,value:f.replace(Vn,`\r
`)}}):{name:c.name,value:p.replace(Vn,`\r
`)}}).get()}});var fs=/%20/g,gs=/#.*$/,ys=/([?&])_=[^&]*/,vs=/^(.*?):[ \t]*([^\r\n]*)$/gm,Es=/^(?:GET|HEAD)$/,Cs=/^\/\//,Hn={},Sn={},Un="*/".concat("*"),Tn=Y.createElement("a");function Bn(a){return function(c,p){typeof c!="string"&&(p=c,c="*");var f,E=0,w=c.toLowerCase().match(ne)||[];if(I(p))for(;f=w[E++];)f[0]==="+"?(f=f.slice(1)||"*",(a[f]=a[f]||[]).unshift(p)):(a[f]=a[f]||[]).push(p)}}function Gn(a,c,p,f){var E={},w=a===Sn;function b(D){var L;return E[D]=!0,g.each(a[D]||[],function(R,U){var K=U(c,p,f);return typeof K!="string"||w||E[K]?w?!(L=K):void 0:(c.dataTypes.unshift(K),b(K),!1)}),L}return b(c.dataTypes[0])||!E["*"]&&b("*")}function xn(a,c){var p,f,E=g.ajaxSettings.flatOptions||{};for(p in c)c[p]!==void 0&&((E[p]?a:f||(f={}))[p]=c[p]);return f&&g.extend(!0,a,f),a}Tn.href=Ri.href,g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ri.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ri.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?xn(xn(a,g.ajaxSettings),c):xn(g.ajaxSettings,a)},ajaxPrefilter:Bn(Hn),ajaxTransport:Bn(Sn),ajax:function(a,c){typeof a=="object"&&(c=a,a=void 0),c=c||{};var p,f,E,w,b,D,L,R,U,K,H=g.ajaxSetup({},c),B=H.context||H,pe=H.context&&(B.nodeType||B.jquery)?g(B):g.event,ve=g.Deferred(),fe=g.Callbacks("once memory"),st=H.statusCode||{},ft={},Nt={},Ke="canceled",Ae={readyState:0,getResponseHeader:function(Ge){var rt;if(L){if(!w)for(w={};rt=vs.exec(E);)w[rt[1].toLowerCase()+" "]=(w[rt[1].toLowerCase()+" "]||[]).concat(rt[2]);rt=w[Ge.toLowerCase()+" "]}return rt==null?null:rt.join(", ")},getAllResponseHeaders:function(){return L?E:null},setRequestHeader:function(Ge,rt){return L==null&&(Ge=Nt[Ge.toLowerCase()]=Nt[Ge.toLowerCase()]||Ge,ft[Ge]=rt),this},overrideMimeType:function(Ge){return L==null&&(H.mimeType=Ge),this},statusCode:function(Ge){var rt;if(Ge)if(L)Ae.always(Ge[Ae.status]);else for(rt in Ge)st[rt]=[st[rt],Ge[rt]];return this},abort:function(Ge){var rt=Ge||Ke;return p&&p.abort(rt),Lt(0,rt),this}};if(ve.promise(Ae),H.url=((a||H.url||Ri.href)+"").replace(Cs,Ri.protocol+"//"),H.type=c.method||c.type||H.method||H.type,H.dataTypes=(H.dataType||"*").toLowerCase().match(ne)||[""],H.crossDomain==null){D=Y.createElement("a");try{D.href=H.url,D.href=D.href,H.crossDomain=Tn.protocol+"//"+Tn.host!=D.protocol+"//"+D.host}catch{H.crossDomain=!0}}if(H.data&&H.processData&&typeof H.data!="string"&&(H.data=g.param(H.data,H.traditional)),Gn(Hn,H,c,Ae),L)return Ae;for(U in(R=g.event&&H.global)&&g.active++==0&&g.event.trigger("ajaxStart"),H.type=H.type.toUpperCase(),H.hasContent=!Es.test(H.type),f=H.url.replace(gs,""),H.hasContent?H.data&&H.processData&&(H.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(H.data=H.data.replace(fs,"+")):(K=H.url.slice(f.length),H.data&&(H.processData||typeof H.data=="string")&&(f+=(wn.test(f)?"&":"?")+H.data,delete H.data),H.cache===!1&&(f=f.replace(ys,"$1"),K=(wn.test(f)?"&":"?")+"_="+kn.guid+++K),H.url=f+K),H.ifModified&&(g.lastModified[f]&&Ae.setRequestHeader("If-Modified-Since",g.lastModified[f]),g.etag[f]&&Ae.setRequestHeader("If-None-Match",g.etag[f])),(H.data&&H.hasContent&&H.contentType!==!1||c.contentType)&&Ae.setRequestHeader("Content-Type",H.contentType),Ae.setRequestHeader("Accept",H.dataTypes[0]&&H.accepts[H.dataTypes[0]]?H.accepts[H.dataTypes[0]]+(H.dataTypes[0]!=="*"?", "+Un+"; q=0.01":""):H.accepts["*"]),H.headers)Ae.setRequestHeader(U,H.headers[U]);if(H.beforeSend&&(H.beforeSend.call(B,Ae,H)===!1||L))return Ae.abort();if(Ke="abort",fe.add(H.complete),Ae.done(H.success),Ae.fail(H.error),p=Gn(Sn,H,c,Ae)){if(Ae.readyState=1,R&&pe.trigger("ajaxSend",[Ae,H]),L)return Ae;H.async&&0<H.timeout&&(b=o.setTimeout(function(){Ae.abort("timeout")},H.timeout));try{L=!1,p.send(ft,Lt)}catch(Ge){if(L)throw Ge;Lt(-1,Ge)}}else Lt(-1,"No Transport");function Lt(Ge,rt,Vi,nn){var Ft,yi,_i,At,Ii,Bt=rt;L||(L=!0,b&&o.clearTimeout(b),p=void 0,E=nn||"",Ae.readyState=0<Ge?4:0,Ft=200<=Ge&&Ge<300||Ge===304,Vi&&(At=function(at,Pt,Ot){for(var Jt,Ne,$e,gt,Rt=at.contents,pt=at.dataTypes;pt[0]==="*";)pt.shift(),Jt===void 0&&(Jt=at.mimeType||Pt.getResponseHeader("Content-Type"));if(Jt){for(Ne in Rt)if(Rt[Ne]&&Rt[Ne].test(Jt)){pt.unshift(Ne);break}}if(pt[0]in Ot)$e=pt[0];else{for(Ne in Ot){if(!pt[0]||at.converters[Ne+" "+pt[0]]){$e=Ne;break}gt||(gt=Ne)}$e=$e||gt}if($e)return $e!==pt[0]&&pt.unshift($e),Ot[$e]}(H,Ae,Vi)),!Ft&&-1<g.inArray("script",H.dataTypes)&&g.inArray("json",H.dataTypes)<0&&(H.converters["text script"]=function(){}),At=function(at,Pt,Ot,Jt){var Ne,$e,gt,Rt,pt,kt={},Di=at.dataTypes.slice();if(Di[1])for(gt in at.converters)kt[gt.toLowerCase()]=at.converters[gt];for($e=Di.shift();$e;)if(at.responseFields[$e]&&(Ot[at.responseFields[$e]]=Pt),!pt&&Jt&&at.dataFilter&&(Pt=at.dataFilter(Pt,at.dataType)),pt=$e,$e=Di.shift()){if($e==="*")$e=pt;else if(pt!=="*"&&pt!==$e){if(!(gt=kt[pt+" "+$e]||kt["* "+$e])){for(Ne in kt)if((Rt=Ne.split(" "))[1]===$e&&(gt=kt[pt+" "+Rt[0]]||kt["* "+Rt[0]])){gt===!0?gt=kt[Ne]:kt[Ne]!==!0&&($e=Rt[0],Di.unshift(Rt[1]));break}}if(gt!==!0)if(gt&&at.throws)Pt=gt(Pt);else try{Pt=gt(Pt)}catch(sn){return{state:"parsererror",error:gt?sn:"No conversion from "+pt+" to "+$e}}}}return{state:"success",data:Pt}}(H,At,Ae,Ft),Ft?(H.ifModified&&((Ii=Ae.getResponseHeader("Last-Modified"))&&(g.lastModified[f]=Ii),(Ii=Ae.getResponseHeader("etag"))&&(g.etag[f]=Ii)),Ge===204||H.type==="HEAD"?Bt="nocontent":Ge===304?Bt="notmodified":(Bt=At.state,yi=At.data,Ft=!(_i=At.error))):(_i=Bt,!Ge&&Bt||(Bt="error",Ge<0&&(Ge=0))),Ae.status=Ge,Ae.statusText=(rt||Bt)+"",Ft?ve.resolveWith(B,[yi,Bt,Ae]):ve.rejectWith(B,[Ae,Bt,_i]),Ae.statusCode(st),st=void 0,R&&pe.trigger(Ft?"ajaxSuccess":"ajaxError",[Ae,H,Ft?yi:_i]),fe.fireWith(B,[Ae,Bt]),R&&(pe.trigger("ajaxComplete",[Ae,H]),--g.active||g.event.trigger("ajaxStop")))}return Ae},getJSON:function(a,c,p){return g.get(a,c,p,"json")},getScript:function(a,c){return g.get(a,void 0,c,"script")}}),g.each(["get","post"],function(a,c){g[c]=function(p,f,E,w){return I(f)&&(w=w||E,E=f,f=void 0),g.ajax(g.extend({url:p,type:c,dataType:w,data:f,success:E},g.isPlainObject(p)&&p))}}),g.ajaxPrefilter(function(a){var c;for(c in a.headers)c.toLowerCase()==="content-type"&&(a.contentType=a.headers[c]||"")}),g._evalUrl=function(a,c,p){return g.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){g.globalEval(f,c,p)}})},g.fn.extend({wrapAll:function(a){var c;return this[0]&&(I(a)&&(a=a.call(this[0])),c=g(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var p=this;p.firstElementChild;)p=p.firstElementChild;return p}).append(this)),this},wrapInner:function(a){return I(a)?this.each(function(c){g(this).wrapInner(a.call(this,c))}):this.each(function(){var c=g(this),p=c.contents();p.length?p.wrapAll(a):c.append(a)})},wrap:function(a){var c=I(a);return this.each(function(p){g(this).wrapAll(c?a.call(this,p):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(a){return!g.expr.pseudos.visible(a)},g.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch{}};var ws={0:200,1223:204},ki=g.ajaxSettings.xhr();F.cors=!!ki&&"withCredentials"in ki,F.ajax=ki=!!ki,g.ajaxTransport(function(a){var c,p;if(F.cors||ki&&!a.crossDomain)return{send:function(f,E){var w,b=a.xhr();if(b.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(w in a.xhrFields)b[w]=a.xhrFields[w];for(w in a.mimeType&&b.overrideMimeType&&b.overrideMimeType(a.mimeType),a.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest"),f)b.setRequestHeader(w,f[w]);c=function(D){return function(){c&&(c=p=b.onload=b.onerror=b.onabort=b.ontimeout=b.onreadystatechange=null,D==="abort"?b.abort():D==="error"?typeof b.status!="number"?E(0,"error"):E(b.status,b.statusText):E(ws[b.status]||b.status,b.statusText,(b.responseType||"text")!=="text"||typeof b.responseText!="string"?{binary:b.response}:{text:b.responseText},b.getAllResponseHeaders()))}},b.onload=c(),p=b.onerror=b.ontimeout=c("error"),b.onabort!==void 0?b.onabort=p:b.onreadystatechange=function(){b.readyState===4&&o.setTimeout(function(){c&&p()})},c=c("abort");try{b.send(a.hasContent&&a.data||null)}catch(D){if(c)throw D}},abort:function(){c&&c()}}}),g.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return g.globalEval(a),a}}}),g.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),g.ajaxTransport("script",function(a){var c,p;if(a.crossDomain||a.scriptAttrs)return{send:function(f,E){c=g("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",p=function(w){c.remove(),p=null,w&&E(w.type==="error"?404:200,w.type)}),Y.head.appendChild(c[0])},abort:function(){p&&p()}}});var $n,qn=[],_n=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=qn.pop()||g.expando+"_"+kn.guid++;return this[a]=!0,a}}),g.ajaxPrefilter("json jsonp",function(a,c,p){var f,E,w,b=a.jsonp!==!1&&(_n.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&_n.test(a.data)&&"data");if(b||a.dataTypes[0]==="jsonp")return f=a.jsonpCallback=I(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,b?a[b]=a[b].replace(_n,"$1"+f):a.jsonp!==!1&&(a.url+=(wn.test(a.url)?"&":"?")+a.jsonp+"="+f),a.converters["script json"]=function(){return w||g.error(f+" was not called"),w[0]},a.dataTypes[0]="json",E=o[f],o[f]=function(){w=arguments},p.always(function(){E===void 0?g(o).removeProp(f):o[f]=E,a[f]&&(a.jsonpCallback=c.jsonpCallback,qn.push(f)),w&&I(E)&&E(w[0]),w=E=void 0}),"script"}),F.createHTMLDocument=(($n=Y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",$n.childNodes.length===2),g.parseHTML=function(a,c,p){return typeof a!="string"?[]:(typeof c=="boolean"&&(p=c,c=!1),c||(F.createHTMLDocument?((f=(c=Y.implementation.createHTMLDocument("")).createElement("base")).href=Y.location.href,c.head.appendChild(f)):c=Y),w=!p&&[],(E=de.exec(a))?[c.createElement(E[1])]:(E=Ni([a],c,w),w&&w.length&&g(w).remove(),g.merge([],E.childNodes)));var f,E,w},g.fn.load=function(a,c,p){var f,E,w,b=this,D=a.indexOf(" ");return-1<D&&(f=_t(a.slice(D)),a=a.slice(0,D)),I(c)?(p=c,c=void 0):c&&typeof c=="object"&&(E="POST"),0<b.length&&g.ajax({url:a,type:E||"GET",dataType:"html",data:c}).done(function(L){w=arguments,b.html(f?g("<div>").append(g.parseHTML(L)).find(f):L)}).always(p&&function(L,R){b.each(function(){p.apply(this,w||[L.responseText,R,L])})}),this},g.expr.pseudos.animated=function(a){return g.grep(g.timers,function(c){return a===c.elem}).length},g.offset={setOffset:function(a,c,p){var f,E,w,b,D,L,R=g.css(a,"position"),U=g(a),K={};R==="static"&&(a.style.position="relative"),D=U.offset(),w=g.css(a,"top"),L=g.css(a,"left"),(R==="absolute"||R==="fixed")&&-1<(w+L).indexOf("auto")?(b=(f=U.position()).top,E=f.left):(b=parseFloat(w)||0,E=parseFloat(L)||0),I(c)&&(c=c.call(a,p,g.extend({},D))),c.top!=null&&(K.top=c.top-D.top+b),c.left!=null&&(K.left=c.left-D.left+E),"using"in c?c.using.call(a,K):U.css(K)}},g.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(E){g.offset.setOffset(this,a,E)});var c,p,f=this[0];return f?f.getClientRects().length?(c=f.getBoundingClientRect(),p=f.ownerDocument.defaultView,{top:c.top+p.pageYOffset,left:c.left+p.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var a,c,p,f=this[0],E={top:0,left:0};if(g.css(f,"position")==="fixed")c=f.getBoundingClientRect();else{for(c=this.offset(),p=f.ownerDocument,a=f.offsetParent||p.documentElement;a&&(a===p.body||a===p.documentElement)&&g.css(a,"position")==="static";)a=a.parentNode;a&&a!==f&&a.nodeType===1&&((E=g(a).offset()).top+=g.css(a,"borderTopWidth",!0),E.left+=g.css(a,"borderLeftWidth",!0))}return{top:c.top-E.top-g.css(f,"marginTop",!0),left:c.left-E.left-g.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&g.css(a,"position")==="static";)a=a.offsetParent;return a||Ie})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var p=c==="pageYOffset";g.fn[a]=function(f){return be(this,function(E,w,b){var D;if(G(E)?D=E:E.nodeType===9&&(D=E.defaultView),b===void 0)return D?D[c]:E[w];D?D.scrollTo(p?D.pageXOffset:b,p?b:D.pageYOffset):E[w]=b},a,f,arguments.length)}}),g.each(["top","left"],function(a,c){g.cssHooks[c]=Ji(F.pixelPosition,function(p,f){if(f)return f=hi(p,c),Pi.test(f)?g(p).position()[c]+"px":f})}),g.each({Height:"height",Width:"width"},function(a,c){g.each({padding:"inner"+a,content:c,"":"outer"+a},function(p,f){g.fn[f]=function(E,w){var b=arguments.length&&(p||typeof E!="boolean"),D=p||(E===!0||w===!0?"margin":"border");return be(this,function(L,R,U){var K;return G(L)?f.indexOf("outer")===0?L["inner"+a]:L.document.documentElement["client"+a]:L.nodeType===9?(K=L.documentElement,Math.max(L.body["scroll"+a],K["scroll"+a],L.body["offset"+a],K["offset"+a],K["client"+a])):U===void 0?g.css(L,R,D):g.style(L,R,U,D)},c,b?E:void 0,b)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,c){g.fn[c]=function(p){return this.on(c,p)}}),g.fn.extend({bind:function(a,c,p){return this.on(a,null,c,p)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,p,f){return this.on(c,a,p,f)},undelegate:function(a,c,p){return arguments.length===1?this.off(a,"**"):this.off(c,a||"**",p)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,c){g.fn[c]=function(p,f){return 0<arguments.length?this.on(c,null,p,f):this.trigger(c)}});var bs=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;g.proxy=function(a,c){var p,f,E;if(typeof c=="string"&&(p=a[c],c=a,a=p),I(a))return f=n.call(arguments,2),(E=function(){return a.apply(c||this,f.concat(n.call(arguments)))}).guid=a.guid=a.guid||g.guid++,E},g.holdReady=function(a){a?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=ce,g.isFunction=I,g.isWindow=G,g.camelCase=Pe,g.type=se,g.now=Date.now,g.isNumeric=function(a){var c=g.type(a);return(c==="number"||c==="string")&&!isNaN(a-parseFloat(a))},g.trim=function(a){return a==null?"":(a+"").replace(bs,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return g});var Ss=o.jQuery,Ts=o.$;return g.noConflict=function(a){return o.$===g&&(o.$=Ts),a&&o.jQuery===g&&(o.jQuery=Ss),g},typeof i>"u"&&(o.jQuery=o.$=g),g});/*!
  * Bootstrap v5.0.2 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(o,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("@popperjs/core")):typeof define=="function"&&define.amd?define(["@popperjs/core"],i):(o=typeof globalThis<"u"?globalThis:o||self).bootstrap=i(o.Popper)})(void 0,function(o){function i(A){if(A&&A.__esModule)return A;var d=Object.create(null);return A&&Object.keys(A).forEach(function(v){if(v!=="default"){var x=Object.getOwnPropertyDescriptor(A,v);Object.defineProperty(d,v,x.get?x:{enumerable:!0,get:function(){return A[v]}})}}),d.default=A,Object.freeze(d)}var e=i(o);const t={find:(A,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,A)),findOne:(A,d=document.documentElement)=>Element.prototype.querySelector.call(d,A),children:(A,d)=>[].concat(...A.children).filter(v=>v.matches(d)),parents(A,d){const v=[];let x=A.parentNode;for(;x&&x.nodeType===Node.ELEMENT_NODE&&x.nodeType!==3;)x.matches(d)&&v.push(x),x=x.parentNode;return v},prev(A,d){let v=A.previousElementSibling;for(;v;){if(v.matches(d))return[v];v=v.previousElementSibling}return[]},next(A,d){let v=A.nextElementSibling;for(;v;){if(v.matches(d))return[v];v=v.nextElementSibling}return[]}},n=A=>{do A+=Math.floor(1e6*Math.random());while(document.getElementById(A));return A},s=A=>{let d=A.getAttribute("data-bs-target");if(!d||d==="#"){let v=A.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v="#"+v.split("#")[1]),d=v&&v!=="#"?v.trim():null}return d},r=A=>{const d=s(A);return d&&document.querySelector(d)?d:null},l=A=>{const d=s(A);return d?document.querySelector(d):null},u=A=>{A.dispatchEvent(new Event("transitionend"))},m=A=>!(!A||typeof A!="object")&&(A.jquery!==void 0&&(A=A[0]),A.nodeType!==void 0),y=A=>m(A)?A.jquery?A[0]:A:typeof A=="string"&&A.length>0?t.findOne(A):null,C=(A,d,v)=>{Object.keys(v).forEach(x=>{const N=v[x],X=d[x],ie=X&&m(X)?"element":(Me=X)==null?""+Me:{}.toString.call(Me).match(/\s([a-z]+)/i)[1].toLowerCase();var Me;if(!new RegExp(N).test(ie))throw new TypeError(`${A.toUpperCase()}: Option "${x}" provided type "${ie}" but expected type "${N}".`)})},T=A=>!(!m(A)||A.getClientRects().length===0)&&getComputedStyle(A).getPropertyValue("visibility")==="visible",F=A=>!A||A.nodeType!==Node.ELEMENT_NODE||!!A.classList.contains("disabled")||(A.disabled!==void 0?A.disabled:A.hasAttribute("disabled")&&A.getAttribute("disabled")!=="false"),I=A=>{if(!document.documentElement.attachShadow)return null;if(typeof A.getRootNode=="function"){const d=A.getRootNode();return d instanceof ShadowRoot?d:null}return A instanceof ShadowRoot?A:A.parentNode?I(A.parentNode):null},G=()=>{},Y=A=>A.offsetHeight,le=()=>{const{jQuery:A}=window;return A&&!document.body.hasAttribute("data-bs-no-jquery")?A:null},xe=[],se=()=>document.documentElement.dir==="rtl",we=A=>{var d;d=()=>{const v=le();if(v){const x=A.NAME,N=v.fn[x];v.fn[x]=A.jQueryInterface,v.fn[x].Constructor=A,v.fn[x].noConflict=()=>(v.fn[x]=N,A.jQueryInterface)}},document.readyState==="loading"?(xe.length||document.addEventListener("DOMContentLoaded",()=>{xe.forEach(v=>v())}),xe.push(d)):d()},g=A=>{typeof A=="function"&&A()},Ue=(A,d,v=!0)=>{if(!v)return void g(A);const x=(ie=>{if(!ie)return 0;let{transitionDuration:Me,transitionDelay:Re}=window.getComputedStyle(ie);const lt=Number.parseFloat(Me),et=Number.parseFloat(Re);return lt||et?(Me=Me.split(",")[0],Re=Re.split(",")[0],1e3*(Number.parseFloat(Me)+Number.parseFloat(Re))):0})(d)+5;let N=!1;const X=({target:ie})=>{ie===d&&(N=!0,d.removeEventListener("transitionend",X),g(A))};d.addEventListener("transitionend",X),setTimeout(()=>{N||u(d)},x)},Qe=(A,d,v,x)=>{let N=A.indexOf(d);if(N===-1)return A[!v&&x?A.length-1:0];const X=A.length;return N+=v?1:-1,x&&(N=(N+X)%X),A[Math.max(0,Math.min(N,X-1))]},ke=/[^.]*(?=\..*)\.|.*/,me=/\..*/,Be=/::\d+$/,ce={};let de=1;const Le={mouseenter:"mouseover",mouseleave:"mouseout"},ue=/^(mouseenter|mouseleave)/i,J=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function j(A,d){return d&&`${d}::${de++}`||A.uidEvent||de++}function oe(A){const d=j(A);return A.uidEvent=d,ce[d]=ce[d]||{},ce[d]}function Z(A,d,v=null){const x=Object.keys(A);for(let N=0,X=x.length;N<X;N++){const ie=A[x[N]];if(ie.originalHandler===d&&ie.delegationSelector===v)return ie}return null}function ne(A,d,v){const x=typeof d=="string",N=x?v:d;let X=q(A);return J.has(X)||(X=A),[x,N,X]}function te(A,d,v,x,N){if(typeof d!="string"||!A)return;if(v||(v=x,x=null),ue.test(d)){const ut=it=>function(Tt){if(!Tt.relatedTarget||Tt.relatedTarget!==Tt.delegateTarget&&!Tt.delegateTarget.contains(Tt.relatedTarget))return it.call(this,Tt)};x?x=ut(x):v=ut(v)}const[X,ie,Me]=ne(d,v,x),Re=oe(A),lt=Re[Me]||(Re[Me]={}),et=Z(lt,ie,X?v:null);if(et)return void(et.oneOff=et.oneOff&&N);const ze=j(ie,d.replace(ke,"")),tt=X?function(ut,it,Tt){return function Dt(ri){const gi=ut.querySelectorAll(it);for(let{target:_t}=ri;_t&&_t!==this;_t=_t.parentNode)for(let Qt=gi.length;Qt--;)if(gi[Qt]===_t)return ri.delegateTarget=_t,Dt.oneOff&&M.off(ut,ri.type,it,Tt),Tt.apply(_t,[ri]);return null}}(A,v,x):function(ut,it){return function Tt(Dt){return Dt.delegateTarget=ut,Tt.oneOff&&M.off(ut,Dt.type,it),it.apply(ut,[Dt])}}(A,v);tt.delegationSelector=X?v:null,tt.originalHandler=ie,tt.oneOff=N,tt.uidEvent=ze,lt[ze]=tt,A.addEventListener(Me,tt,X)}function V(A,d,v,x,N){const X=Z(d[v],x,N);X&&(A.removeEventListener(v,X,!!N),delete d[v][X.uidEvent])}function q(A){return A=A.replace(me,""),Le[A]||A}const M={on(A,d,v,x){te(A,d,v,x,!1)},one(A,d,v,x){te(A,d,v,x,!0)},off(A,d,v,x){if(typeof d!="string"||!A)return;const[N,X,ie]=ne(d,v,x),Me=ie!==d,Re=oe(A),lt=d.startsWith(".");if(X!==void 0)return!Re||!Re[ie]?void 0:void V(A,Re,ie,X,N?v:null);lt&&Object.keys(Re).forEach(ze=>{(function(tt,ut,it,Tt){const Dt=ut[it]||{};Object.keys(Dt).forEach(ri=>{if(ri.includes(Tt)){const gi=Dt[ri];V(tt,ut,it,gi.originalHandler,gi.delegationSelector)}})})(A,Re,ze,d.slice(1))});const et=Re[ie]||{};Object.keys(et).forEach(ze=>{const tt=ze.replace(Be,"");if(!Me||d.includes(tt)){const ut=et[ze];V(A,Re,ie,ut.originalHandler,ut.delegationSelector)}})},trigger(A,d,v){if(typeof d!="string"||!A)return null;const x=le(),N=q(d),X=d!==N,ie=J.has(N);let Me,Re=!0,lt=!0,et=!1,ze=null;return X&&x&&(Me=x.Event(d,v),x(A).trigger(Me),Re=!Me.isPropagationStopped(),lt=!Me.isImmediatePropagationStopped(),et=Me.isDefaultPrevented()),ie?(ze=document.createEvent("HTMLEvents"),ze.initEvent(N,Re,!0)):ze=new CustomEvent(d,{bubbles:Re,cancelable:!0}),v!==void 0&&Object.keys(v).forEach(tt=>{Object.defineProperty(ze,tt,{get:()=>v[tt]})}),et&&ze.preventDefault(),lt&&A.dispatchEvent(ze),ze.defaultPrevented&&Me!==void 0&&Me.preventDefault(),ze}},z=new Map;var ae={set(A,d,v){z.has(A)||z.set(A,new Map);const x=z.get(A);x.has(d)||x.size===0?x.set(d,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(x.keys())[0]}.`)},get:(A,d)=>z.has(A)&&z.get(A).get(d)||null,remove(A,d){if(!z.has(A))return;const v=z.get(A);v.delete(d),v.size===0&&z.delete(A)}};class be{constructor(d){(d=y(d))&&(this._element=d,ae.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ae.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(d=>{this[d]=null})}_queueCallback(d,v,x=!0){Ue(d,v,x)}static getInstance(d){return ae.get(d,this.DATA_KEY)}static getOrCreateInstance(d,v={}){return this.getInstance(d)||new this(d,typeof v=="object"?v:null)}static get VERSION(){return"5.0.2"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return"bs."+this.NAME}static get EVENT_KEY(){return"."+this.DATA_KEY}}class We extends be{static get NAME(){return"alert"}close(d){const v=d?this._getRootElement(d):this._element,x=this._triggerCloseEvent(v);x===null||x.defaultPrevented||this._removeElement(v)}_getRootElement(d){return l(d)||d.closest(".alert")}_triggerCloseEvent(d){return M.trigger(d,"close.bs.alert")}_removeElement(d){d.classList.remove("show");const v=d.classList.contains("fade");this._queueCallback(()=>this._destroyElement(d),d,v)}_destroyElement(d){d.remove(),M.trigger(d,"closed.bs.alert")}static jQueryInterface(d){return this.each(function(){const v=We.getOrCreateInstance(this);d==="close"&&v[d](this)})}static handleDismiss(d){return function(v){v&&v.preventDefault(),d.close(this)}}}M.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',We.handleDismiss(new We)),we(We);class Ze extends be{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const v=Ze.getOrCreateInstance(this);d==="toggle"&&v[d]()})}}function He(A){return A==="true"||A!=="false"&&(A===Number(A).toString()?Number(A):A===""||A==="null"?null:A)}function Pe(A){return A.replace(/[A-Z]/g,d=>"-"+d.toLowerCase())}M.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',A=>{A.preventDefault();const d=A.target.closest('[data-bs-toggle="button"]');Ze.getOrCreateInstance(d).toggle()}),we(Ze);const Ee={setDataAttribute(A,d,v){A.setAttribute("data-bs-"+Pe(d),v)},removeDataAttribute(A,d){A.removeAttribute("data-bs-"+Pe(d))},getDataAttributes(A){if(!A)return{};const d={};return Object.keys(A.dataset).filter(v=>v.startsWith("bs")).forEach(v=>{let x=v.replace(/^bs/,"");x=x.charAt(0).toLowerCase()+x.slice(1,x.length),d[x]=He(A.dataset[v])}),d},getDataAttribute:(A,d)=>He(A.getAttribute("data-bs-"+Pe(d))),offset(A){const d=A.getBoundingClientRect();return{top:d.top+document.body.scrollTop,left:d.left+document.body.scrollLeft}},position:A=>({top:A.offsetTop,left:A.offsetLeft})},ct={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ge={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Je="next",Vt="prev",Mt="left",qt="right",jt={ArrowLeft:qt,ArrowRight:Mt};class ot extends be{constructor(d,v){super(d),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(v),this._indicatorsElement=t.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=!!window.PointerEvent,this._addEventListeners()}static get Default(){return ct}static get NAME(){return"carousel"}next(){this._slide(Je)}nextWhenVisible(){!document.hidden&&T(this._element)&&this.next()}prev(){this._slide(Vt)}pause(d){d||(this._isPaused=!0),t.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(u(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(d){d||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(d){this._activeElement=t.findOne(".active.carousel-item",this._element);const v=this._getItemIndex(this._activeElement);if(d>this._items.length-1||d<0)return;if(this._isSliding)return void M.one(this._element,"slid.bs.carousel",()=>this.to(d));if(v===d)return this.pause(),void this.cycle();const x=d>v?Je:Vt;this._slide(x,this._items[d])}_getConfig(d){return d={...ct,...Ee.getDataAttributes(this._element),...typeof d=="object"?d:{}},C("carousel",d,ge),d}_handleSwipe(){const d=Math.abs(this.touchDeltaX);if(d<=40)return;const v=d/this.touchDeltaX;this.touchDeltaX=0,v&&this._slide(v>0?qt:Mt)}_addEventListeners(){this._config.keyboard&&M.on(this._element,"keydown.bs.carousel",d=>this._keydown(d)),this._config.pause==="hover"&&(M.on(this._element,"mouseenter.bs.carousel",d=>this.pause(d)),M.on(this._element,"mouseleave.bs.carousel",d=>this.cycle(d))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const d=N=>{!this._pointerEvent||N.pointerType!=="pen"&&N.pointerType!=="touch"?this._pointerEvent||(this.touchStartX=N.touches[0].clientX):this.touchStartX=N.clientX},v=N=>{this.touchDeltaX=N.touches&&N.touches.length>1?0:N.touches[0].clientX-this.touchStartX},x=N=>{!this._pointerEvent||N.pointerType!=="pen"&&N.pointerType!=="touch"||(this.touchDeltaX=N.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(X=>this.cycle(X),500+this._config.interval))};t.find(".carousel-item img",this._element).forEach(N=>{M.on(N,"dragstart.bs.carousel",X=>X.preventDefault())}),this._pointerEvent?(M.on(this._element,"pointerdown.bs.carousel",N=>d(N)),M.on(this._element,"pointerup.bs.carousel",N=>x(N)),this._element.classList.add("pointer-event")):(M.on(this._element,"touchstart.bs.carousel",N=>d(N)),M.on(this._element,"touchmove.bs.carousel",N=>v(N)),M.on(this._element,"touchend.bs.carousel",N=>x(N)))}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const v=jt[d.key];v&&(d.preventDefault(),this._slide(v))}_getItemIndex(d){return this._items=d&&d.parentNode?t.find(".carousel-item",d.parentNode):[],this._items.indexOf(d)}_getItemByOrder(d,v){const x=d===Je;return Qe(this._items,v,x,this._config.wrap)}_triggerSlideEvent(d,v){const x=this._getItemIndex(d),N=this._getItemIndex(t.findOne(".active.carousel-item",this._element));return M.trigger(this._element,"slide.bs.carousel",{relatedTarget:d,direction:v,from:N,to:x})}_setActiveIndicatorElement(d){if(this._indicatorsElement){const v=t.findOne(".active",this._indicatorsElement);v.classList.remove("active"),v.removeAttribute("aria-current");const x=t.find("[data-bs-target]",this._indicatorsElement);for(let N=0;N<x.length;N++)if(Number.parseInt(x[N].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(d)){x[N].classList.add("active"),x[N].setAttribute("aria-current","true");break}}}_updateInterval(){const d=this._activeElement||t.findOne(".active.carousel-item",this._element);if(!d)return;const v=Number.parseInt(d.getAttribute("data-bs-interval"),10);v?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=v):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(d,v){const x=this._directionToOrder(d),N=t.findOne(".active.carousel-item",this._element),X=this._getItemIndex(N),ie=v||this._getItemByOrder(x,N),Me=this._getItemIndex(ie),Re=!!this._interval,lt=x===Je,et=lt?"carousel-item-start":"carousel-item-end",ze=lt?"carousel-item-next":"carousel-item-prev",tt=this._orderToDirection(x);if(ie&&ie.classList.contains("active"))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(ie,tt).defaultPrevented||!N||!ie)return;this._isSliding=!0,Re&&this.pause(),this._setActiveIndicatorElement(ie),this._activeElement=ie;const ut=()=>{M.trigger(this._element,"slid.bs.carousel",{relatedTarget:ie,direction:tt,from:X,to:Me})};if(this._element.classList.contains("slide")){ie.classList.add(ze),Y(ie),N.classList.add(et),ie.classList.add(et);const it=()=>{ie.classList.remove(et,ze),ie.classList.add("active"),N.classList.remove("active",ze,et),this._isSliding=!1,setTimeout(ut,0)};this._queueCallback(it,N,!0)}else N.classList.remove("active"),ie.classList.add("active"),this._isSliding=!1,ut();Re&&this.cycle()}_directionToOrder(d){return[qt,Mt].includes(d)?se()?d===Mt?Vt:Je:d===Mt?Je:Vt:d}_orderToDirection(d){return[Je,Vt].includes(d)?se()?d===Vt?Mt:qt:d===Vt?qt:Mt:d}static carouselInterface(d,v){const x=ot.getOrCreateInstance(d,v);let{_config:N}=x;typeof v=="object"&&(N={...N,...v});const X=typeof v=="string"?v:N.slide;if(typeof v=="number")x.to(v);else if(typeof X=="string"){if(x[X]===void 0)throw new TypeError(`No method named "${X}"`);x[X]()}else N.interval&&N.ride&&(x.pause(),x.cycle())}static jQueryInterface(d){return this.each(function(){ot.carouselInterface(this,d)})}static dataApiClickHandler(d){const v=l(this);if(!v||!v.classList.contains("carousel"))return;const x={...Ee.getDataAttributes(v),...Ee.getDataAttributes(this)},N=this.getAttribute("data-bs-slide-to");N&&(x.interval=!1),ot.carouselInterface(v,x),N&&ot.getInstance(v).to(N),d.preventDefault()}}M.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",ot.dataApiClickHandler),M.on(window,"load.bs.carousel.data-api",()=>{const A=t.find('[data-bs-ride="carousel"]');for(let d=0,v=A.length;d<v;d++)ot.carouselInterface(A[d],ot.getInstance(A[d]))}),we(ot);const Ce={toggle:!0,parent:""},Ie={toggle:"boolean",parent:"(string|element)"};class Oe extends be{constructor(d,v){super(d),this._isTransitioning=!1,this._config=this._getConfig(v),this._triggerArray=t.find(`[data-bs-toggle="collapse"][href="#${this._element.id}"],[data-bs-toggle="collapse"][data-bs-target="#${this._element.id}"]`);const x=t.find('[data-bs-toggle="collapse"]');for(let N=0,X=x.length;N<X;N++){const ie=x[N],Me=r(ie),Re=t.find(Me).filter(lt=>lt===this._element);Me!==null&&Re.length&&(this._selector=Me,this._triggerArray.push(ie))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return Ce}static get NAME(){return"collapse"}toggle(){this._element.classList.contains("show")?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains("show"))return;let d,v;this._parent&&(d=t.find(".show, .collapsing",this._parent).filter(ie=>typeof this._config.parent=="string"?ie.getAttribute("data-bs-parent")===this._config.parent:ie.classList.contains("collapse")),d.length===0&&(d=null));const x=t.findOne(this._selector);if(d){const ie=d.find(Me=>x!==Me);if(v=ie?Oe.getInstance(ie):null,v&&v._isTransitioning)return}if(M.trigger(this._element,"show.bs.collapse").defaultPrevented)return;d&&d.forEach(ie=>{x!==ie&&Oe.collapseInterface(ie,"hide"),v||ae.set(ie,"bs.collapse",null)});const N=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[N]=0,this._triggerArray.length&&this._triggerArray.forEach(ie=>{ie.classList.remove("collapsed"),ie.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);const X="scroll"+(N[0].toUpperCase()+N.slice(1));this._queueCallback(()=>{this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[N]="",this.setTransitioning(!1),M.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[N]=this._element[X]+"px"}hide(){if(this._isTransitioning||!this._element.classList.contains("show")||M.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const d=this._getDimension();this._element.style[d]=this._element.getBoundingClientRect()[d]+"px",Y(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");const v=this._triggerArray.length;if(v>0)for(let x=0;x<v;x++){const N=this._triggerArray[x],X=l(N);X&&!X.classList.contains("show")&&(N.classList.add("collapsed"),N.setAttribute("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[d]="",this._queueCallback(()=>{this.setTransitioning(!1),this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),M.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}setTransitioning(d){this._isTransitioning=d}_getConfig(d){return(d={...Ce,...d}).toggle=!!d.toggle,C("collapse",d,Ie),d}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){let{parent:d}=this._config;d=y(d);const v=`[data-bs-toggle="collapse"][data-bs-parent="${d}"]`;return t.find(v,d).forEach(x=>{const N=l(x);this._addAriaAndCollapsedClass(N,[x])}),d}_addAriaAndCollapsedClass(d,v){if(!d||!v.length)return;const x=d.classList.contains("show");v.forEach(N=>{x?N.classList.remove("collapsed"):N.classList.add("collapsed"),N.setAttribute("aria-expanded",x)})}static collapseInterface(d,v){let x=Oe.getInstance(d);const N={...Ce,...Ee.getDataAttributes(d),...typeof v=="object"&&v?v:{}};if(!x&&N.toggle&&typeof v=="string"&&/show|hide/.test(v)&&(N.toggle=!1),x||(x=new Oe(d,N)),typeof v=="string"){if(x[v]===void 0)throw new TypeError(`No method named "${v}"`);x[v]()}}static jQueryInterface(d){return this.each(function(){Oe.collapseInterface(this,d)})}}M.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',function(A){(A.target.tagName==="A"||A.delegateTarget&&A.delegateTarget.tagName==="A")&&A.preventDefault();const d=Ee.getDataAttributes(this),v=r(this);t.find(v).forEach(x=>{const N=Oe.getInstance(x);let X;N?(N._parent===null&&typeof d.parent=="string"&&(N._config.parent=d.parent,N._parent=N._getParent()),X="toggle"):X=d,Oe.collapseInterface(x,X)})}),we(Oe);const Et=new RegExp("ArrowUp|ArrowDown|Escape"),ti=se()?"top-end":"top-start",Si=se()?"top-start":"top-end",ji=se()?"bottom-end":"bottom-start",ci=se()?"bottom-start":"bottom-end",ii=se()?"left-start":"right-start",Ti=se()?"right-start":"left-start",di={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Wi={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class Ct extends be{constructor(d,v){super(d),this._popper=null,this._config=this._getConfig(v),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return di}static get DefaultType(){return Wi}static get NAME(){return"dropdown"}toggle(){F(this._element)||(this._element.classList.contains("show")?this.hide():this.show())}show(){if(F(this._element)||this._menu.classList.contains("show"))return;const d=Ct.getParentFromElement(this._element),v={relatedTarget:this._element};if(!M.trigger(this._element,"show.bs.dropdown",v).defaultPrevented){if(this._inNavbar)Ee.setDataAttribute(this._menu,"popper","none");else{if(e===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let x=this._element;this._config.reference==="parent"?x=d:m(this._config.reference)?x=y(this._config.reference):typeof this._config.reference=="object"&&(x=this._config.reference);const N=this._getPopperConfig(),X=N.modifiers.find(ie=>ie.name==="applyStyles"&&ie.enabled===!1);this._popper=e.createPopper(x,this._menu,N),X&&Ee.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!d.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(x=>M.on(x,"mouseover",G)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle("show"),this._element.classList.toggle("show"),M.trigger(this._element,"shown.bs.dropdown",v)}}hide(){if(F(this._element)||!this._menu.classList.contains("show"))return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){M.on(this._element,"click.bs.dropdown",d=>{d.preventDefault(),this.toggle()})}_completeHide(d){M.trigger(this._element,"hide.bs.dropdown",d).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(v=>M.off(v,"mouseover",G)),this._popper&&this._popper.destroy(),this._menu.classList.remove("show"),this._element.classList.remove("show"),this._element.setAttribute("aria-expanded","false"),Ee.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,"hidden.bs.dropdown",d))}_getConfig(d){if(d={...this.constructor.Default,...Ee.getDataAttributes(this._element),...d},C("dropdown",d,this.constructor.DefaultType),typeof d.reference=="object"&&!m(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError("dropdown".toUpperCase()+': Option "reference" provided type "object" without a required "getBoundingClientRect" method.');return d}_getMenuElement(){return t.next(this._element,".dropdown-menu")[0]}_getPlacement(){const d=this._element.parentNode;if(d.classList.contains("dropend"))return ii;if(d.classList.contains("dropstart"))return Ti;const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?v?Si:ti:v?ci:ji}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(v=>Number.parseInt(v,10)):typeof d=="function"?v=>d(v,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...typeof this._config.popperConfig=="function"?this._config.popperConfig(d):this._config.popperConfig}}_selectMenuItem({key:d,target:v}){const x=t.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(T);x.length&&Qe(x,v,d==="ArrowDown",!x.includes(v)).focus()}static dropdownInterface(d,v){const x=Ct.getOrCreateInstance(d,v);if(typeof v=="string"){if(x[v]===void 0)throw new TypeError(`No method named "${v}"`);x[v]()}}static jQueryInterface(d){return this.each(function(){Ct.dropdownInterface(this,d)})}static clearMenus(d){if(d&&(d.button===2||d.type==="keyup"&&d.key!=="Tab"))return;const v=t.find('[data-bs-toggle="dropdown"]');for(let x=0,N=v.length;x<N;x++){const X=Ct.getInstance(v[x]);if(!X||X._config.autoClose===!1||!X._element.classList.contains("show"))continue;const ie={relatedTarget:X._element};if(d){const Me=d.composedPath(),Re=Me.includes(X._menu);if(Me.includes(X._element)||X._config.autoClose==="inside"&&!Re||X._config.autoClose==="outside"&&Re||X._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;d.type==="click"&&(ie.clickEvent=d)}X._completeHide(ie)}}static getParentFromElement(d){return l(d)||d.parentNode}static dataApiKeydownHandler(d){if(/input|textarea/i.test(d.target.tagName)?d.key==="Space"||d.key!=="Escape"&&(d.key!=="ArrowDown"&&d.key!=="ArrowUp"||d.target.closest(".dropdown-menu")):!Et.test(d.key))return;const v=this.classList.contains("show");if(!v&&d.key==="Escape"||(d.preventDefault(),d.stopPropagation(),F(this)))return;const x=()=>this.matches('[data-bs-toggle="dropdown"]')?this:t.prev(this,'[data-bs-toggle="dropdown"]')[0];return d.key==="Escape"?(x().focus(),void Ct.clearMenus()):d.key==="ArrowUp"||d.key==="ArrowDown"?(v||x().click(),void Ct.getInstance(x())._selectMenuItem(d)):void(v&&d.key!=="Space"||Ct.clearMenus())}}M.on(document,"keydown.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',Ct.dataApiKeydownHandler),M.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",Ct.dataApiKeydownHandler),M.on(document,"click.bs.dropdown.data-api",Ct.clearMenus),M.on(document,"keyup.bs.dropdown.data-api",Ct.clearMenus),M.on(document,"click.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',function(A){A.preventDefault(),Ct.dropdownInterface(this)}),we(Ct);class bt{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",v=>v+d),this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","paddingRight",v=>v+d),this._setElementAttributes(".sticky-top","marginRight",v=>v-d)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,v,x){const N=this.getWidth();this._applyManipulationCallback(d,X=>{if(X!==this._element&&window.innerWidth>X.clientWidth+N)return;this._saveInitialAttribute(X,v);const ie=window.getComputedStyle(X)[v];X.style[v]=x(Number.parseFloat(ie))+"px"})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","paddingRight"),this._resetElementAttributes(".sticky-top","marginRight")}_saveInitialAttribute(d,v){const x=d.style[v];x&&Ee.setDataAttribute(d,v,x)}_resetElementAttributes(d,v){this._applyManipulationCallback(d,x=>{const N=Ee.getDataAttribute(x,v);N===void 0?x.style.removeProperty(v):(Ee.removeDataAttribute(x,v),x.style[v]=N)})}_applyManipulationCallback(d,v){m(d)?v(d):t.find(d,this._element).forEach(v)}isOverflowing(){return this.getWidth()>0}}const St={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Mi={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"};class zi{constructor(d){this._config=this._getConfig(d),this._isAppended=!1,this._element=null}show(d){this._config.isVisible?(this._append(),this._config.isAnimated&&Y(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{g(d)})):g(d)}hide(d){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),g(d)})):g(d)}_getElement(){if(!this._element){const d=document.createElement("div");d.className="modal-backdrop",this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_getConfig(d){return(d={...St,...typeof d=="object"?d:{}}).rootElement=y(d.rootElement),C("backdrop",d,Mi),d}_append(){this._isAppended||(this._config.rootElement.appendChild(this._getElement()),M.on(this._getElement(),"mousedown.bs.backdrop",()=>{g(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(M.off(this._element,"mousedown.bs.backdrop"),this._element.remove(),this._isAppended=!1)}_emulateAnimation(d){Ue(d,this._getElement(),this._config.isAnimated)}}const Ni={backdrop:!0,keyboard:!0,focus:!0},Ki={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"};class Ht extends be{constructor(d,v){super(d),this._config=this._getConfig(v),this._dialog=t.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new bt}static get Default(){return Ni}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||M.trigger(this._element,"show.bs.modal",{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),M.on(this._element,"click.dismiss.bs.modal",'[data-bs-dismiss="modal"]',v=>this.hide(v)),M.on(this._dialog,"mousedown.dismiss.bs.modal",()=>{M.one(this._element,"mouseup.dismiss.bs.modal",v=>{v.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(d)))}hide(d){if(d&&["A","AREA"].includes(d.target.tagName)&&d.preventDefault(),!this._isShown||this._isTransitioning||M.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const v=this._isAnimated();v&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),M.off(document,"focusin.bs.modal"),this._element.classList.remove("show"),M.off(this._element,"click.dismiss.bs.modal"),M.off(this._dialog,"mousedown.dismiss.bs.modal"),this._queueCallback(()=>this._hideModal(),this._element,v)}dispose(){[window,this._dialog].forEach(d=>M.off(d,".bs.modal")),this._backdrop.dispose(),super.dispose(),M.off(document,"focusin.bs.modal")}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zi({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_getConfig(d){return d={...Ni,...Ee.getDataAttributes(this._element),...typeof d=="object"?d:{}},C("modal",d,Ki),d}_showElement(d){const v=this._isAnimated(),x=t.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,x&&(x.scrollTop=0),v&&Y(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus(),this._queueCallback(()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,M.trigger(this._element,"shown.bs.modal",{relatedTarget:d})},this._dialog,v)}_enforceFocus(){M.off(document,"focusin.bs.modal"),M.on(document,"focusin.bs.modal",d=>{document===d.target||this._element===d.target||this._element.contains(d.target)||this._element.focus()})}_setEscapeEvent(){this._isShown?M.on(this._element,"keydown.dismiss.bs.modal",d=>{this._config.keyboard&&d.key==="Escape"?(d.preventDefault(),this.hide()):this._config.keyboard||d.key!=="Escape"||this._triggerBackdropTransition()}):M.off(this._element,"keydown.dismiss.bs.modal")}_setResizeEvent(){this._isShown?M.on(window,"resize.bs.modal",()=>this._adjustDialog()):M.off(window,"resize.bs.modal")}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,"hidden.bs.modal")})}_showBackdrop(d){M.on(this._element,"click.dismiss.bs.modal",v=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:v.target===v.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(d)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(M.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:d,scrollHeight:v,style:x}=this._element,N=v>document.documentElement.clientHeight;!N&&x.overflowY==="hidden"||d.contains("modal-static")||(N||(x.overflowY="hidden"),d.add("modal-static"),this._queueCallback(()=>{d.remove("modal-static"),N||this._queueCallback(()=>{x.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),x=v>0;(!x&&d&&!se()||x&&!d&&se())&&(this._element.style.paddingLeft=v+"px"),(x&&!d&&!se()||!x&&d&&se())&&(this._element.style.paddingRight=v+"px")}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,v){return this.each(function(){const x=Ht.getOrCreateInstance(this,d);if(typeof d=="string"){if(x[d]===void 0)throw new TypeError(`No method named "${d}"`);x[d](v)}})}}M.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(A){const d=l(this);["A","AREA"].includes(this.tagName)&&A.preventDefault(),M.one(d,"show.bs.modal",v=>{v.defaultPrevented||M.one(d,"hidden.bs.modal",()=>{T(this)&&this.focus()})}),Ht.getOrCreateInstance(d).toggle(this)}),we(Ht);const ni={backdrop:!0,keyboard:!0,scroll:!1},pn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"};class Wt extends be{constructor(d,v){super(d),this._config=this._getConfig(v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._addEventListeners()}static get NAME(){return"offcanvas"}static get Default(){return ni}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||M.trigger(this._element,"show.bs.offcanvas",{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new bt().hide(),this._enforceFocusOnElement(this._element)),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{M.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(M.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(M.off(document,"focusin.bs.offcanvas"),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new bt().reset(),M.trigger(this._element,"hidden.bs.offcanvas")},this._element,!0)))}dispose(){this._backdrop.dispose(),super.dispose(),M.off(document,"focusin.bs.offcanvas")}_getConfig(d){return d={...ni,...Ee.getDataAttributes(this._element),...typeof d=="object"?d:{}},C("offcanvas",d,pn),d}_initializeBackDrop(){return new zi({isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(d){M.off(document,"focusin.bs.offcanvas"),M.on(document,"focusin.bs.offcanvas",v=>{document===v.target||d===v.target||d.contains(v.target)||d.focus()}),d.focus()}_addEventListeners(){M.on(this._element,"click.dismiss.bs.offcanvas",'[data-bs-dismiss="offcanvas"]',()=>this.hide()),M.on(this._element,"keydown.dismiss.bs.offcanvas",d=>{this._config.keyboard&&d.key==="Escape"&&this.hide()})}static jQueryInterface(d){return this.each(function(){const v=Wt.getOrCreateInstance(this,d);if(typeof d=="string"){if(v[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);v[d](this)}})}}M.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(A){const d=l(this);if(["A","AREA"].includes(this.tagName)&&A.preventDefault(),F(this))return;M.one(d,"hidden.bs.offcanvas",()=>{T(this)&&this.focus()});const v=t.findOne(".offcanvas.show");v&&v!==d&&Wt.getInstance(v).hide(),Wt.getOrCreateInstance(d).toggle(this)}),M.on(window,"load.bs.offcanvas.data-api",()=>t.find(".offcanvas.show").forEach(A=>Wt.getOrCreateInstance(A).show())),we(Wt);const xi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),mn=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,fn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,gn=(A,d)=>{const v=A.nodeName.toLowerCase();if(d.includes(v))return!xi.has(v)||!!(mn.test(A.nodeValue)||fn.test(A.nodeValue));const x=d.filter(N=>N instanceof RegExp);for(let N=0,X=x.length;N<X;N++)if(x[N].test(v))return!0;return!1};function Fi(A,d,v){if(!A.length)return A;if(v&&typeof v=="function")return v(A);const x=new window.DOMParser().parseFromString(A,"text/html"),N=Object.keys(d),X=[].concat(...x.body.querySelectorAll("*"));for(let ie=0,Me=X.length;ie<Me;ie++){const Re=X[ie],lt=Re.nodeName.toLowerCase();if(!N.includes(lt)){Re.remove();continue}const et=[].concat(...Re.attributes),ze=[].concat(d["*"]||[],d[lt]||[]);et.forEach(tt=>{gn(tt,ze)||Re.removeAttribute(tt.nodeName)})}return x.body.innerHTML}const yn=new RegExp("(^|\\s)bs-tooltip\\S+","g"),vn=new Set(["sanitize","allowList","sanitizeFn"]),Yi={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},ui={AUTO:"auto",TOP:"top",RIGHT:se()?"left":"right",BOTTOM:"bottom",LEFT:se()?"right":"left"},Xi={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Pi={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"};class Ut extends be{constructor(d,v){if(e===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(d),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(v),this.tip=null,this._setListeners()}static get Default(){return Xi}static get NAME(){return"tooltip"}static get Event(){return Pi}static get DefaultType(){return Yi}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(d){if(this._isEnabled)if(d){const v=this._initializeOnDelegatedTarget(d);v._activeTrigger.click=!v._activeTrigger.click,v._isWithActiveTrigger()?v._enter(null,v):v._leave(null,v)}else{if(this.getTipElement().classList.contains("show"))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const d=M.trigger(this._element,this.constructor.Event.SHOW),v=I(this._element),x=v===null?this._element.ownerDocument.documentElement.contains(this._element):v.contains(this._element);if(d.defaultPrevented||!x)return;const N=this.getTipElement(),X=n(this.constructor.NAME);N.setAttribute("id",X),this._element.setAttribute("aria-describedby",X),this.setContent(),this._config.animation&&N.classList.add("fade");const ie=typeof this._config.placement=="function"?this._config.placement.call(this,N,this._element):this._config.placement,Me=this._getAttachment(ie);this._addAttachmentClass(Me);const{container:Re}=this._config;ae.set(N,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(Re.appendChild(N),M.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=e.createPopper(this._element,N,this._getPopperConfig(Me)),N.classList.add("show");const lt=typeof this._config.customClass=="function"?this._config.customClass():this._config.customClass;lt&&N.classList.add(...lt.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(ze=>{M.on(ze,"mouseover",G)});const et=this.tip.classList.contains("fade");this._queueCallback(()=>{const ze=this._hoverState;this._hoverState=null,M.trigger(this._element,this.constructor.Event.SHOWN),ze==="out"&&this._leave(null,this)},this.tip,et)}hide(){if(!this._popper)return;const d=this.getTipElement();if(M.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;d.classList.remove("show"),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(x=>M.off(x,"mouseover",G)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const v=this.tip.classList.contains("fade");this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!=="show"&&d.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))},this.tip,v),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return!!this.getTitle()}getTipElement(){if(this.tip)return this.tip;const d=document.createElement("div");return d.innerHTML=this._config.template,this.tip=d.children[0],this.tip}setContent(){const d=this.getTipElement();this.setElementContent(t.findOne(".tooltip-inner",d),this.getTitle()),d.classList.remove("fade","show")}setElementContent(d,v){if(d!==null)return m(v)?(v=y(v),void(this._config.html?v.parentNode!==d&&(d.innerHTML="",d.appendChild(v)):d.textContent=v.textContent)):void(this._config.html?(this._config.sanitize&&(v=Fi(v,this._config.allowList,this._config.sanitizeFn)),d.innerHTML=v):d.textContent=v)}getTitle(){let d=this._element.getAttribute("data-bs-original-title");return d||(d=typeof this._config.title=="function"?this._config.title.call(this._element):this._config.title),d}updateAttachment(d){return d==="right"?"end":d==="left"?"start":d}_initializeOnDelegatedTarget(d,v){const x=this.constructor.DATA_KEY;return(v=v||ae.get(d.delegateTarget,x))||(v=new this.constructor(d.delegateTarget,this._getDelegateConfig()),ae.set(d.delegateTarget,x,v)),v}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(v=>Number.parseInt(v,10)):typeof d=="function"?v=>d(v,this._element):d}_getPopperConfig(d){const v={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:x=>this._handlePopperPlacementChange(x)}],onFirstUpdate:x=>{x.options.placement!==x.placement&&this._handlePopperPlacementChange(x)}};return{...v,...typeof this._config.popperConfig=="function"?this._config.popperConfig(v):this._config.popperConfig}}_addAttachmentClass(d){this.getTipElement().classList.add("bs-tooltip-"+this.updateAttachment(d))}_getAttachment(d){return ui[d.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(d=>{if(d==="click")M.on(this._element,this.constructor.Event.CLICK,this._config.selector,v=>this.toggle(v));else if(d!=="manual"){const v=d==="hover"?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,x=d==="hover"?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;M.on(this._element,v,this._config.selector,N=>this._enter(N)),M.on(this._element,x,this._config.selector,N=>this._leave(N))}}),this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const d=this._element.getAttribute("title"),v=typeof this._element.getAttribute("data-bs-original-title");(d||v!=="string")&&(this._element.setAttribute("data-bs-original-title",d||""),!d||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",d),this._element.setAttribute("title",""))}_enter(d,v){v=this._initializeOnDelegatedTarget(d,v),d&&(v._activeTrigger[d.type==="focusin"?"focus":"hover"]=!0),v.getTipElement().classList.contains("show")||v._hoverState==="show"?v._hoverState="show":(clearTimeout(v._timeout),v._hoverState="show",v._config.delay&&v._config.delay.show?v._timeout=setTimeout(()=>{v._hoverState==="show"&&v.show()},v._config.delay.show):v.show())}_leave(d,v){v=this._initializeOnDelegatedTarget(d,v),d&&(v._activeTrigger[d.type==="focusout"?"focus":"hover"]=v._element.contains(d.relatedTarget)),v._isWithActiveTrigger()||(clearTimeout(v._timeout),v._hoverState="out",v._config.delay&&v._config.delay.hide?v._timeout=setTimeout(()=>{v._hoverState==="out"&&v.hide()},v._config.delay.hide):v.hide())}_isWithActiveTrigger(){for(const d in this._activeTrigger)if(this._activeTrigger[d])return!0;return!1}_getConfig(d){const v=Ee.getDataAttributes(this._element);return Object.keys(v).forEach(x=>{vn.has(x)&&delete v[x]}),(d={...this.constructor.Default,...v,...typeof d=="object"&&d?d:{}}).container=d.container===!1?document.body:y(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),C("tooltip",d,this.constructor.DefaultType),d.sanitize&&(d.template=Fi(d.template,d.allowList,d.sanitizeFn)),d}_getDelegateConfig(){const d={};if(this._config)for(const v in this._config)this.constructor.Default[v]!==this._config[v]&&(d[v]=this._config[v]);return d}_cleanTipClass(){const d=this.getTipElement(),v=d.getAttribute("class").match(yn);v!==null&&v.length>0&&v.map(x=>x.trim()).forEach(x=>d.classList.remove(x))}_handlePopperPlacementChange(d){const{state:v}=d;v&&(this.tip=v.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(v.placement)))}static jQueryInterface(d){return this.each(function(){const v=Ut.getOrCreateInstance(this,d);if(typeof d=="string"){if(v[d]===void 0)throw new TypeError(`No method named "${d}"`);v[d]()}})}}we(Ut);const Qi=new RegExp("(^|\\s)bs-popover\\S+","g"),En={...Ut.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},hi={...Ut.DefaultType,content:"(string|element|function)"},Ji={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class pi extends Ut{static get Default(){return En}static get NAME(){return"popover"}static get Event(){return Ji}static get DefaultType(){return hi}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){return this.tip||(this.tip=super.getTipElement(),this.getTitle()||t.findOne(".popover-header",this.tip).remove(),this._getContent()||t.findOne(".popover-body",this.tip).remove()),this.tip}setContent(){const d=this.getTipElement();this.setElementContent(t.findOne(".popover-header",d),this.getTitle());let v=this._getContent();typeof v=="function"&&(v=v.call(this._element)),this.setElementContent(t.findOne(".popover-body",d),v),d.classList.remove("fade","show")}_addAttachmentClass(d){this.getTipElement().classList.add("bs-popover-"+this.updateAttachment(d))}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const d=this.getTipElement(),v=d.getAttribute("class").match(Qi);v!==null&&v.length>0&&v.map(x=>x.trim()).forEach(x=>d.classList.remove(x))}static jQueryInterface(d){return this.each(function(){const v=pi.getOrCreateInstance(this,d);if(typeof d=="string"){if(v[d]===void 0)throw new TypeError(`No method named "${d}"`);v[d]()}})}}we(pi);const Oi={offset:10,method:"auto",target:""},Zi={offset:"number",method:"string",target:"(string|element)"};class si extends be{constructor(d,v){super(d),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(v),this._selector=`${this._config.target} .nav-link, ${this._config.target} .list-group-item, ${this._config.target} .dropdown-item`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,M.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return Oi}static get NAME(){return"scrollspy"}refresh(){const d=this._scrollElement===this._scrollElement.window?"offset":"position",v=this._config.method==="auto"?d:this._config.method,x=v==="position"?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.find(this._selector).map(N=>{const X=r(N),ie=X?t.findOne(X):null;if(ie){const Me=ie.getBoundingClientRect();if(Me.width||Me.height)return[Ee[v](ie).top+x,X]}return null}).filter(N=>N).sort((N,X)=>N[0]-X[0]).forEach(N=>{this._offsets.push(N[0]),this._targets.push(N[1])})}dispose(){M.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(d){if(typeof(d={...Oi,...Ee.getDataAttributes(this._element),...typeof d=="object"&&d?d:{}}).target!="string"&&m(d.target)){let{id:v}=d.target;v||(v=n("scrollspy"),d.target.id=v),d.target="#"+v}return C("scrollspy",d,Zi),d}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const d=this._getScrollTop()+this._config.offset,v=this._getScrollHeight(),x=this._config.offset+v-this._getOffsetHeight();if(this._scrollHeight!==v&&this.refresh(),d>=x){const N=this._targets[this._targets.length-1];this._activeTarget!==N&&this._activate(N)}else{if(this._activeTarget&&d<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let N=this._offsets.length;N--;)this._activeTarget!==this._targets[N]&&d>=this._offsets[N]&&(this._offsets[N+1]===void 0||d<this._offsets[N+1])&&this._activate(this._targets[N])}}_activate(d){this._activeTarget=d,this._clear();const v=this._selector.split(",").map(N=>`${N}[data-bs-target="${d}"],${N}[href="${d}"]`),x=t.findOne(v.join(","));x.classList.contains("dropdown-item")?(t.findOne(".dropdown-toggle",x.closest(".dropdown")).classList.add("active"),x.classList.add("active")):(x.classList.add("active"),t.parents(x,".nav, .list-group").forEach(N=>{t.prev(N,".nav-link, .list-group-item").forEach(X=>X.classList.add("active")),t.prev(N,".nav-item").forEach(X=>{t.children(X,".nav-link").forEach(ie=>ie.classList.add("active"))})})),M.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:d})}_clear(){t.find(this._selector).filter(d=>d.classList.contains("active")).forEach(d=>d.classList.remove("active"))}static jQueryInterface(d){return this.each(function(){const v=si.getOrCreateInstance(this,d);if(typeof d=="string"){if(v[d]===void 0)throw new TypeError(`No method named "${d}"`);v[d]()}})}}M.on(window,"load.bs.scrollspy.data-api",()=>{t.find('[data-bs-spy="scroll"]').forEach(A=>new si(A))}),we(si);class mi extends be{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains("active"))return;let d;const v=l(this._element),x=this._element.closest(".nav, .list-group");if(x){const ie=x.nodeName==="UL"||x.nodeName==="OL"?":scope > li > .active":".active";d=t.find(ie,x),d=d[d.length-1]}const N=d?M.trigger(d,"hide.bs.tab",{relatedTarget:this._element}):null;if(M.trigger(this._element,"show.bs.tab",{relatedTarget:d}).defaultPrevented||N!==null&&N.defaultPrevented)return;this._activate(this._element,x);const X=()=>{M.trigger(d,"hidden.bs.tab",{relatedTarget:this._element}),M.trigger(this._element,"shown.bs.tab",{relatedTarget:d})};v?this._activate(v,v.parentNode,X):X()}_activate(d,v,x){const N=(!v||v.nodeName!=="UL"&&v.nodeName!=="OL"?t.children(v,".active"):t.find(":scope > li > .active",v))[0],X=x&&N&&N.classList.contains("fade"),ie=()=>this._transitionComplete(d,N,x);N&&X?(N.classList.remove("show"),this._queueCallback(ie,d,!0)):ie()}_transitionComplete(d,v,x){if(v){v.classList.remove("active");const X=t.findOne(":scope > .dropdown-menu .active",v.parentNode);X&&X.classList.remove("active"),v.getAttribute("role")==="tab"&&v.setAttribute("aria-selected",!1)}d.classList.add("active"),d.getAttribute("role")==="tab"&&d.setAttribute("aria-selected",!0),Y(d),d.classList.contains("fade")&&d.classList.add("show");let N=d.parentNode;if(N&&N.nodeName==="LI"&&(N=N.parentNode),N&&N.classList.contains("dropdown-menu")){const X=d.closest(".dropdown");X&&t.find(".dropdown-toggle",X).forEach(ie=>ie.classList.add("active")),d.setAttribute("aria-expanded",!0)}x&&x()}static jQueryInterface(d){return this.each(function(){const v=mi.getOrCreateInstance(this);if(typeof d=="string"){if(v[d]===void 0)throw new TypeError(`No method named "${d}"`);v[d]()}})}}M.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(A){["A","AREA"].includes(this.tagName)&&A.preventDefault(),F(this)||mi.getOrCreateInstance(this).show()}),we(mi);const en={animation:"boolean",autohide:"boolean",delay:"number"},tn={animation:!0,autohide:!0,delay:5e3};class fi extends be{constructor(d,v){super(d),this._config=this._getConfig(v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return en}static get Default(){return tn}static get NAME(){return"toast"}show(){M.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),Y(this._element),this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.remove("showing"),this._element.classList.add("show"),M.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains("show")&&(M.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.remove("show"),this._queueCallback(()=>{this._element.classList.add("hide"),M.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),super.dispose()}_getConfig(d){return d={...tn,...Ee.getDataAttributes(this._element),...typeof d=="object"&&d?d:{}},C("toast",d,this.constructor.DefaultType),d}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,v){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const x=d.relatedTarget;this._element===x||this._element.contains(x)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',()=>this.hide()),M.on(this._element,"mouseover.bs.toast",d=>this._onInteraction(d,!0)),M.on(this._element,"mouseout.bs.toast",d=>this._onInteraction(d,!1)),M.on(this._element,"focusin.bs.toast",d=>this._onInteraction(d,!0)),M.on(this._element,"focusout.bs.toast",d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const v=fi.getOrCreateInstance(this,d);if(typeof d=="string"){if(v[d]===void 0)throw new TypeError(`No method named "${d}"`);v[d](this)}})}}return we(fi),{Alert:We,Button:Ze,Carousel:ot,Collapse:Oe,Dropdown:Ct,Modal:Ht,Offcanvas:Wt,Popover:pi,ScrollSpy:si,Tab:mi,Toast:fi,Tooltip:Ut}});$(document).ready(function(){var o='<i class="fa fa-angle-up" aria-hidden="true"></i>',i='<i class="fa fa-angle-down" aria-hidden="true"></i>',e='<span class="rs-menu-parent">'+i+"</span>",t='<div class="sub-menu-close"><i class="fa fa-times" aria-hidden="true"></i>Close</div>';$(".nav-menu .rs-mega-menu").append(e),$(".nav-menu > .menu-item-has-children").append(e),$(".nav-menu > .menu-item-has-children .sub-menu > .menu-item-has-children").append(e),$(".nav-menu .menu-item-has-children .sub-menu").append(t),$(".nav-menu .rs-mega-menu .mega-menu").append(t),$("span.rs-menu-parent").on("click",function(s){s.preventDefault();var r=$(this),l=r.siblings("ul"),u=r.parent("li"),m=u.siblings("li"),y="span.rs-menu-parent";if(l.hasClass("sub-menu"))var l=r.siblings("ul.sub-menu");else if(l.hasClass("mega-menu"))var l=r.siblings("ul.mega-menu");l.hasClass("visible")?(setTimeout(function(){l.removeClass("visible")},10),r.html(i)):(setTimeout(function(){l.addClass("visible")},10),r.html(o)),u.find("ul.visible").removeClass("visible"),u.siblings("li").children("ul").removeClass("visible"),m.find("ul.visible").removeClass("visible"),u.children("ul").find(y).html(i),m.children(y).html(i),m.find(y).html(i)}),$("ul.nav-menu div.sub-menu-close").on("click",function(s){s.preventDefault();var r=$(this).parent("ul");r.removeClass("visible"),r.siblings("span.rs-menu-parent").html(i)}),$("a.rs-menu-toggle").on("click",function(s){s.preventDefault();var r=$(".rs-menu ul").height();$(this).hasClass("rs-menu-toggle-open")?($(this).removeClass("rs-menu-toggle-open").addClass("rs-menu-toggle-close"),$(".rs-menu").animate({height:"0px"},{queue:!1,duration:300}).addClass("rs-menu-close")):($(this).removeClass("rs-menu-toggle-close").addClass("rs-menu-toggle-open"),$(".rs-menu").animate({height:r},{queue:!1,duration:300}).removeClass("rs-menu-close"))});var n=0;$(window).on("load",function(){n=$(window).width(),$(".rs-menu").addClass("rs-menu-close")}),$(window).resize(function(){n!==$(window).width()&&($(".visible").removeClass("visible"),$(".rs-menu-toggle").removeClass("rs-menu-toggle-open").addClass("rs-menu-toggle-close"),$(".rs-menu").css("height","0").addClass("rs-menu-close"),$("span.rs-menu-parent").html(i),n=$(window).width())})});export{Client as C,FeaturePolicy as F,Html as H,ListView as L,TabEditor as T,Utils$1 as U,Toast as a};
